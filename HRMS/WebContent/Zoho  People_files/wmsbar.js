var wmsjsversion="42";var dext=".sas";var cadapter=".int";var debug=false;var silent=false;var WMSIAMURL=window.location.protocol+"//accounts.zoho.com";var wmsmeetingurl=window.location.protocol+"//meeting.zoho.com";var _WMSIAMTICKETNAME="IAMAGENTTICKET";var _WMSMAILURL=window.location.protocol+"//zmail.zoho.com/";var _WMSCHATURL=window.location.protocol+"//chat.zoho.com/";var _WMSPHOTOSERVER=window.location.protocol+"//contacts.zoho.com";var _WMSCONFIG="15";var _WMSCALENDARSERVER=window.location.protocol+"//calendar.zoho.com";var _WMSCONT="wms";var _WMSDOMAIN="zoho.com";var _WMS_SAMEDOMAIN=false;var _WMS_FORCEDOMAIN=false;var _WMSCFPARAMNAME;var _WMSCFTOKEN;var _WMSDRAGDROP=true;var _WMSSST=false;var _WMSCONSECUTIVEFAILURECNT=0;var _MAX_WMS_FAILURE=3;var currentbanner=null;var wmsReconnectionTimer;var _TZOFFSET=((new Date()).getTimezoneOffset())*-1;var op=(((navigator.userAgent).indexOf("Opera")!=-1));var opera_browser=op;var ie=!op&&/msie/i.test(navigator.userAgent);var mz=!op&&!ie&&/mozilla\/5/i.test(navigator.userAgent);var wms_sf=(((navigator.userAgent).indexOf("Safari")!=-1));var version=parseInt(navigator.appVersion);var ie5=(ie&&(version==4)&&(navigator.userAgent.indexOf("msie 5.0")!=-1));var ie5_5=(ie&&(version==4)&&(navigator.userAgent.indexOf("msie 5.5")!=-1));var ie6=(ie&&(version==4)&&(navigator.userAgent.indexOf("msie 6.")!=-1));var ie7=(ie&&navigator.userAgent.indexOf("MSIE 7.")!=-1);if(!ie&&document.layers){var browser_nn4=true}else{if(document.layers||(!document.all&&document.getElementById)){var browser_nn6=true}}var WM_ACK_CONNECT=0;var WM_INFO=1;var WM_CUSTOM=2;var WM_LOGOUT=3;var WM_CROSSPRODUCT=4;var WM_PRESENCE=6;var WM_RECONNECT=-1;var WM_SERVER_UP=-3;var WM_NFY_LOGOUT=-2;var WM_NFY_ATTACH=-8;var WM_NFY_DETACH=-9;var CT_JOIN=10;var CT_QUIT=11;var CT_TXT_MSG=12;var CT_NFY_USERSTATUS=13;var CT_NFY_USERADD=14;var CT_NFY_USERDELETE=15;var CT_INF_MSG=16;var CT_GUEST_DENIED=17;var CT_NFY_GUESTACCESS=18;var CT_NFY_APPROVAL=102;var CT_ATT_MSG=20;var WM_NFY_COLLABADD=21;var WM_NFY_COLLABDELETE=22;var CT_NFY_SETTITLE=19;var WM_NFY_STATUS=23;var WM_NFY_CSTATUSCHANGE=24;var WM_NFY_USERIMGCHANGE=25;var CT_MEET_MSG=26;var CONTACT_INFO=27;var CT_CLOSE_WIN=28;var WM_AV_MSG=29;var WM_CLEAR_NOTI=32;var CT_NFY_ACTCHATADD=33;var CT_NFY_ACTCHATDELETE=34;var WM_SKIPTRANS=36;var WM_USER_LANG_CHANGE=37;var WM_SYSTEM_MSG=38;var ACS_MSG=43;var CT_NFY_MSG=112;var NFY_GUEST_LINK=103;var NFY_USER_TYPING=104;var NFY_USER_IDLE=105;var NFY_USER_ENTERED=110;var WM_ZTI_FAIL_MSG=601;var WMS_ONLINE=1;var WMS_OFFLINE=0;var WMS_INVISIBLE=2;var WMS_BUSY=3;var WMS_IDLE=4;var WMS_CON_UNAPRD=-1;var WMS_CON_REJECT=-2;var WMS_CON_REQACC=-3;var WMS_CON_DELETE=-4;var WMS_CON_REMOVE=-5;var WMS_CON_NOCHAT=-6;var WMS_CON_ACCEPT=10;var CT_NFY_LIVESUPPORT=4;var CT_NFY_ZOHOGROUP=5;var CT_NFY_MULTIPROTOCOL=6;var NFY_REQ_CSUPPORT=106;var NFY_ACC_CSUPPORT=108;var NFY_QIT_CSUPPORT=109;var NFY_ENDLIVESUPPORT=113;var CT_GUEST_REQ=100;var WM_PUB_SUB=800;var MP_LOGIN=300;var MP_LOGOUT=301;var MP_RELOGIN=302;var MP_PRESENCE=303;var MP_CONTACT_UPDATE=304;var MP_CONTACT_INF_UPDATE=305;var MP_SERVER_DOWN=306;var MP_ADDBOOK=307;var MP_CAPTCHA=309;var wmsCommonAjax;function WmsCommonAjax(){}WmsCommonAjax.request=function(a){if(!WmsServerCheck.online){return}WmsServerCheck.checktimer=setTimeout("WmsServerCheck.goOfflineCheck()",WmsServerCheck.timeout);try{if(window.XMLHttpRequest){wmsCommonAjax=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsCommonAjax=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsCommonAjax){wmsCommonAjax.onreadystatechange=WmsCommonAjax.dataDispatcher}else{wmsCommonAjax=false}wmsCommonAjax.open("GET",a,true);wmsCommonAjax.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(ie){wmsCommonAjax.send()}else{wmsCommonAjax.send(null)}}catch(b){print("http connect error WmsCommonAjax "+b);WmsServerCheck.online=false;Collaboration.goOffline();clearTimeout(WebMessanger.showbannertime);WebMessanger.showbannertime=setTimeout(function(){WMSUI.showNetDownBanner()},120000)}};WmsCommonAjax.dataDispatcher=function(){if(wmsCommonAjax.readyState==4){if(wmsCommonAjax.status==200){WmsServerCheck.lastresptime=new Date().getTime();clearTimeout(WmsServerCheck.checktimer)}else{if(wmsCommonAjax.status==0){WmsServerCheck.online=false;Collaboration.goOffline();clearTimeout(WebMessanger.showbannertime);WebMessanger.showbannertime=setTimeout(function(){WMSUI.showNetDownBanner()},120000)}}}};function WmsSyncAjax(){this.request=b;this.postrequest=a;function b(c){try{var g=null;if(window.XMLHttpRequest){g=new XMLHttpRequest()}else{if(window.ActiveXObject){g=new ActiveXObject("Microsoft.XMLHTTP")}}g.open("GET",c,false);g.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(ie){g.send()}else{g.send(null)}if(g.status==200){return g.responseText}else{if(g.status==503){WebMessanger.reconnect(75000,"rsdown",false)}}}catch(f){}}function a(c,h){try{var g=null;if(window.XMLHttpRequest){g=new XMLHttpRequest()}else{if(window.ActiveXObject){g=new ActiveXObject("Microsoft.XMLHTTP")}}g.open("POST",c,false);g.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");g.setRequestHeader("Content-length",h.length);g.setRequestHeader("Connection","close");g.send(h);if(g.status==200){return g.responseText}else{if(g.status==503){WebMessanger.reconnect(75000,"rsdown",false)}}}catch(f){}}}var wmssyncajx=new WmsSyncAjax();var wmsOnDemandAjax;function WmsOnDemandAjax(){}WmsOnDemandAjax.request=function(a){try{if(window.XMLHttpRequest){wmsOnDemandAjax=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsOnDemandAjax=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsOnDemandAjax){wmsOnDemandAjax.onreadystatechange=WmsOnDemandAjax.dataDispatcher}else{wmsOnDemandAjax=false}wmsOnDemandAjax.open("GET",a,true);wmsOnDemandAjax.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(ie){wmsOnDemandAjax.send()}else{wmsOnDemandAjax.send(null)}}catch(b){print("http connect error "+b)}};WmsOnDemandAjax.dataDispatcher=function(){try{if(wmsOnDemandAjax.readyState==4){if(wmsOnDemandAjax.status==200){response=wmsOnDemandAjax.responseText;if(response!=""){var list=eval(response);if(list==null){return}var len=list.length;var i=0;for(i=0;i<len;i++){var msgobj=list[i];WebMessanger.wmsOnDemandAjaxDispatcher(msgobj.module,msgobj.objType,WmsAjax.getObject(msgobj.objType,msgobj.objString))}}}else{if(wmsOnDemandAjax.status==503){WebMessanger.reconnect(75000,"rsdown",false)}else{print("http read error : "+wmsOnDemandAjax.status)}}}}catch(e){}};var wmsAjax;function WmsAjax(){}WmsAjax.request=function(a){try{if(window.XMLHttpRequest){wmsAjax=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsAjax=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsAjax){wmsAjax.onreadystatechange=WmsAjax.dataDispatcher}else{wmsAjax=false}wmsAjax.open("GET",a,true);wmsAjax.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(ie){wmsAjax.send()}else{wmsAjax.send(null)}}catch(b){print("http connect error "+b)}};WmsAjax.postrequest=function(a,c){try{if(window.XMLHttpRequest){wmsAjax=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsAjax=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsAjax){wmsAjax.onreadystatechange=WmsAjax.dataDispatcher}else{wmsAjax=false}wmsAjax.open("POST",a,true);wmsAjax.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");wmsAjax.setRequestHeader("Content-length",c.length);wmsAjax.setRequestHeader("Connection","close");wmsAjax.send(c)}catch(b){}};WmsAjax.dataDispatcher=function(){try{if(wmsAjax.readyState==4){if(wmsAjax.status==200){response=wmsAjax.responseText;if(response!=""){var list=eval(response);if(list==null){return}var len=list.length;var i=0;for(i=0;i<len;i++){var msgobj=list[i];WebMessanger.wmsAjaxDispatcher(msgobj.module,msgobj.objType,WmsAjax.getObject(msgobj.objType,msgobj.objString))}}}else{if(wmsAjax.status==503){WebMessanger.reconnect(75000,"rsdown",false)}else{print("http read error : "+wmsAjax.status)}}}}catch(e){}};WmsAjax.getObject=function(a,f){if(a=="do"){var b=new DataObject();for(i=0;i<f.length;i++){var g=f[i];var c=g.tname;var e=g.cols;var n=g.rows;for(j=0;j<n.length;j++){var l=n[j];var h=new Array();for(k=0;k<l.length;k++){h[k]=[e[k],l[k]]}b.addRowsForTable(c,h)}}return b}return f};function print(b){if(debug==true){var a=document.getElementById("debug");a.innerHTML=a.innerHTML+b+"<br>"}}function printtime(){print(new Date())}var pmonInterval=15000;var lpt;function plive(){lpt=new Date()}function pmonitor(g){try{if(WebMessanger.disablewms){return}var a=new Date();if(g==true){lpt=a}var c=((_WMSCONFIG&WMSSessionConfig.REUSE_SESSION)==WMSSessionConfig.REUSE_SESSION);if((a-lpt)>(pmonInterval*3)){if(c){var f=WebMessanger.isConnected();if(f){WebMessanger.reconnect(CT_JOIN,"psdown",true);return}}else{WebMessanger.reconnect(CT_JOIN,"psdown",true);return}}}catch(b){}setTimeout("pmonitor(false)",pmonInterval)}function push(a){if(debug){try{print(a.mtype+":"+JSON.stringify(a.msg))}catch(b){}}if(WebMessanger.offline){WMSUI.hideAllOfflineBanner()}WebMessanger.offvalue=-1;WebMessanger.push(a);WebMessanger.lastmessage=a;WebMessanger.lastmessagetime=new Date()}function getPrd(){return WebMessanger.getPrd()}function getWmsConfig(){return _WMSCONFIG}function getUserName(){return WebMessanger.getUserName()}function getNickName(){return WebMessanger.getNickName()}function getZuid(){return WebMessanger.getZuid()}function getUserId(){return WebMessanger.getUserId()}function getSid(){return WebMessanger.getSid()}function _getAuthType(){return WebMessanger.authtype}function getRawSid(){return WebMessanger.getRawSid()}function getWmsContacts(){return WmsContacts.getZohoContacts()}function updateWmsContacts(a){WmsContacts.init(a)}function isReconnecting(){return WebMessanger.isReconnecting()}function disablewms(){WebMessanger.disable()}function isdisablewms(){return WebMessanger.isdisablewms()}function requestsuccess(){if(_WMSCONSECUTIVEFAILURECNT>=_MAX_WMS_FAILURE){_WMSCONSECUTIVEFAILURECNT=0;currentbanner=null;clearTimeout(wmsReconnectionTimer);setTimeout("Collaboration.serverup()",100);WMSUI.hideAllOfflineBanner()}}function goOffline(){try{var a;_WMSCONSECUTIVEFAILURECNT++;if(_WMSCONSECUTIVEFAILURECNT>=_MAX_WMS_FAILURE){a=wmssyncajx.request("/"+_WMSCONT+"/servercheck"+dext+"?check=true"+nocachefix(true));var c=((_WMSCONFIG&WMSSessionConfig.REUSE_SESSION)==WMSSessionConfig.REUSE_SESSION);if(!c){WebMessanger.disable()}if(a=="SUCCESS"){if(currentbanner!="wms"&&!c){WMSUI.showWmsDownBanner();WebMessanger.reconnectTimer(true)}currentbanner="wms";Collaboration.wmsOffline()}else{if(currentbanner!="net"&&!c){WMSUI.showNetDownBanner();WebMessanger.reconnectTimer(true)}currentbanner="net";Collaboration.goOffline()}}}catch(b){}}function WebMessanger(){}WebMessanger.loadlocal=function(){try{var f=document.getElementsByTagName("head");if(!f||f.length==0){f=[];f[0]=document.createElement("head");document.insertBefore(doc.body,f[0])}if(this.loadlocalfiles){var c=new Array("style/base.css","style/"+this.theme+"/grey.css","style/palette.css","style/bar/smiley.css","style/zmsg.css");try{if(this.theme=="azureblue"){c.push("style/azureblue/zmsg.css")}if(document.doctype!=undefined||document.all[0].text!=undefined){c.push("style/bar/bartransitionaldoc.css")}}catch(w){}for(var v=0;v<c.length;v++){var z=document.createElement("link");z.rel="stylesheet";z.href="/"+_WMSCONT+"/"+c[v]+"?version="+wmsjsversion;f[0].appendChild(z)}var t=new Array("javascript/bar/wmsui.js","javascript/pubsub/pubsub.js","javascript/proxywms.js","javascript/zmsgUI.js","javascript/bar/do.js","javascript/embed/resource.js","javascript/contactmanage.js","javascript/bar/ChatWindow.js","javascript/bar/message.js","javascript/bar/chat.js","javascript/bar/util.js","javascript/bar/wmsdate.js","javascript/bar/blink.js","javascript/bar/self.js","javascript/bar/smiley.js","javascript/cookiehandler.js","javascript/bar/wmszohoapi.js","javascript/groupmanage.js","javascript/activechat.js","javascript/bar/wmskeyhandler.js","javascript/WMSSessionConfig.js","javascript/bar/wmssettings.js","javascript/bar/wmsdragdrop.js","javascript/bar/wmssound.js");for(var v=0;v<t.length;v++){var u=document.createElement("script");u.defer=true;u.src="/"+_WMSCONT+"/"+t[v]+"?version="+((new Date().getTime())%100);f[0].appendChild(u)}}}catch(w){}if(typeof WmsContactImpl=="undefined"){var o=document.createElement("script");o.defer=true;o.src="/"+_WMSCONT+"/javascript/embed/contactimpl.js?version="+wmsjsversion;f[0].appendChild(o)}if(ie6||ie5||ie5_5&&this.theme=="bar"){var z=document.createElement("link");z.rel="stylesheet";z.href="/"+_WMSCONT+"/style/bar/pngiehack.css?version="+wmsjsversion;f[0].appendChild(z)}if(typeof Collaboration=="undefined"){var s=document.createElement("script");s.defer=true;s.src="/"+_WMSCONT+"/javascript/embed/collabimpl.js?version="+wmsjsversion;f[0].appendChild(s)}if(typeof WmsChatUIImpl=="undefined"){var o=document.createElement("script");o.defer=true;o.src="/"+_WMSCONT+"/javascript/chatuiimpl.js?version="+wmsjsversion;f[0].appendChild(o)}if(typeof ZohoFeedImpl=="undefined"){var o=document.createElement("script");o.defer=true;o.src="/"+_WMSCONT+"/javascript/zohofeedimpl.js?version="+wmsjsversion;f[0].appendChild(o)}if(typeof CustomChat=="undefined"){var l=document.createElement("script");l.defer=true;l.src="/"+_WMSCONT+"/javascript/customchatimpl.js?version="+wmsjsversion;f[0].appendChild(l)}if(typeof ZTI=="undefined"){var b=document.createElement("script");b.defer=true;b.src="/"+_WMSCONT+"/javascript/ztiimpl.js?version="+wmsjsversion;f[0].appendChild(b)}if(typeof WMSTP=="undefined"){var q=document.createElement("script");q.defer=true;q.src="/"+_WMSCONT+"/javascript/wmstpimpl.js?version="+wmsjsversion;f[0].appendChild(q)}if(typeof WmsUIImpl=="undefined"){var h=document.createElement("script");h.defer=true;h.src="/"+_WMSCONT+"/javascript/wmsuiimpl.js?version="+wmsjsversion;f[0].appendChild(h)}if(typeof WmsGroupImpl=="undefined"){var o=document.createElement("script");o.defer=true;o.src="/"+_WMSCONT+"/javascript/groupimpl.js?version="+wmsjsversion;f[0].appendChild(o)}if(typeof NotificationApiImpl=="undefined"){var p=document.createElement("script");p.defer=true;p.src="/"+_WMSCONT+"/javascript/notificationapiimpl.js?version="+wmsjsversion;f[0].appendChild(p)}var a=document.createElement("STYLE");a.type="text/css";var r=".wmspd,.wmspd1,.wms-rig,.wms-rigb,div.wmssmileycon,div.wmsctable,.wms-nh,.wmshistory_drpdwnmain,.wms-contactinfo-voice,.wms-contactinfo-voice-hover,.wms-contactinfo-video,.wms-contactinfo-video-hover,.wms-contactinfo-mail,.wms-contactinfo-mail-hover,.wms-contactinfo-file,.wms-contactinfo-file-hover,.wms-statesmsg,.wms_footerstsmsg,.wms-contactinfodiv,.wms-addpopmn,.wmsststxt{ z-index:"+(this.setzindex+999)+" }";if(a.styleSheet){a.styleSheet.cssText=r+".wms-cw {*z-index:"+-1+"}"}else{try{a.innerHTML=r+".wms-cw {z-index:"+(this.setzindex+99)+"}"}catch(w){try{a.appendChild(document.createTextNode(r+".wms-cw {z-index:"+(this.setzindex+99)+"}"))}catch(n){}}}f[0].appendChild(a);wms_cover=document.createElement("DIV");wms_cover.id="wmscoverid";wms_cover.style.display="none";wms_cover.className="wms_cover";if(ie){wms_cover.onclick=function(){this.style.display="none"}}else{wms_cover.setAttribute("onclick","this.style.display='none';")}document.body.appendChild(wms_cover);if(this.rebrand!=""){var z=document.createElement("link");z.rel="stylesheet";if(this.cssstaticdomain!="css.zohostatic.com"){var g=window.location.protocol+"//"+this.cssstaticdomain+"/ichat/v"+wmsjsversion+"/css/rebrand/"+this.rebrand+"/"+this.theme+"/rebrand.css?version="+wmsjsversion;if(window.location.href.indexOf("https")!=-1){g=window.location.protocol+"//"+this.cssstaticdomain+"/ichat/v"+wmsjsversion+"_https/css/rebrand/"+this.rebrand+"/"+this.theme+"/rebrand.css?version="+wmsjsversion}}else{var g="/"+_WMSCONT+"/style/rebrand/"+this.rebrand+"/"+this.theme+"/rebrand.css?version="+wmsjsversion}z.href=g;f[0].appendChild(z)}};WebMessanger.populateSettings=function(a){WebMessanger.settings.sound=true;WebMessanger.settings.onlineopen=false;WebMessanger.settings.onlynames=true;WebMessanger.settings.showusrnotification=false};WebMessanger.init=function(c){if(!_WMS_SAMEDOMAIN&&!opera_browser&&(!ie||(ie&&_WMS_FORCEDOMAIN))){document.domain=_WMSDOMAIN}silent=c;if(typeof this.countrycode=="undefined"){this.countrycode="US"}if(typeof this.language=="undefined"){this.language="en"}if(typeof this.rebrand=="undefined"){this.rebrand=""}if(typeof this.jsstaticdomain=="undefined"){this.jsstaticdomain="js.zohostatic.com"}if(typeof this.cssstaticdomain=="undefined"){this.cssstaticdomain="css.zohostatic.com"}if(typeof this.meeting=="undefined"){this.meeting=true}if(typeof this.theme=="undefined"){this.theme="bar"}if(typeof this.setzindex=="undefined"){this.setzindex=999}if(typeof this.disablenetworkdownbanner=="undefined"){this.disablenetworkdownbanner=false}if(typeof WMSUI.hidden=="undefined"){if(this.loadlocalfiles){if(!silent){setTimeout("WMSUI.init()",3000)}}else{if(!silent){WMSUI.init()}}}WebMessanger.settings=new Object();WebMessanger.populateSettings(new Object());WebMessanger.statusarr=new Array("Offline","Available","Invisible","Busy","Idle");WebMessanger.scodearr=new Array(0,1,3,4);WebMessanger.lastconnect=-1;WebMessanger.wmsservicestatus=true;WebMessanger.offline=false;try{WebMessanger.locationurl=window.location.href}catch(g){}WebMessanger.loadlocal();try{WebMessanger.getResource()}catch(f){}WebMessanger.disablewms=false;WebMessanger.showbannertime=0;WebMessanger.showchatbannertime=0;WebMessanger.offvalue=-1;WebMessanger.lastmessage="";WebMessanger.lastmessagetime="";WebMessanger.reconnectPrevlimit=30;WmsServerCheck.init();if(WebMessanger.isPresenceEnabled()){setTimeout(function(){WMSUI.runIdleTimer()},10);setTimeout(function(){WMSUI.checkDocumentActive()},20)}if(this.loadlocalfiles){setTimeout("WindowHandler.init()",1000)}else{WindowHandler.init()}WebMessanger.systemdown=false;WebMessanger.ucmap=new Object();WebMessanger.waitchats=new Object();WebMessanger.liveChats=new Array();WebMessanger.chatmap=new Object();var b=document.getElementsByTagName("head");if(!b||b.length==0){b=[];b[0]=document.createElement("head");document.insertBefore(doc.body,b[0])}if(debug){var a=document.createElement("div");a.id="debug";document.body.appendChild(a)}};WebMessanger.forceReconnect=function(){document.getElementById("recntime").innerHTML=WmsResource.getRealValue("Connecting ...");clearTimeout(wmsReconnectionTimer);WebMessanger.reconnectPrevlimit=30;WebMessanger.disablewms=false;WebMessanger.triggerbind();setTimeout(function(){WebMessanger.reconnectTimer(true)},1000)};WebMessanger.reconnectTimer=function(f,e){var b=0;if(f){clearTimeout(wmsReconnectionTimer);b=30;WebMessanger.reconnectPrevlimit=30}else{b=e}var a=document.getElementById("recntime");if(!WebMessanger.disablewms){return}b--;var c=WmsResource.getRealValue("Connecting_in_");if(a!=null){document.getElementById("recntime").innerHTML=(b>120)?(c+"5m.."):(c+b+"sec..")}if(b==0){if(a!=null){document.getElementById("recntime").innerHTML=WmsResource.getRealValue("Connecting_...")}if(WebMessanger.reconnectPrevlimit<90){WebMessanger.reconnectPrevlimit=WebMessanger.reconnectPrevlimit+30;b=WebMessanger.reconnectPrevlimit}else{WebMessanger.reconnectPrevlimit=300;b=WebMessanger.reconnectPrevlimit}WebMessanger.disablewms=false;WebMessanger.triggerbind()}wmsReconnectionTimer=setTimeout(function(){WebMessanger.reconnectTimer(false,b)},1000)};WebMessanger.reconnect=function(b,a,c){printtime();print("---------disconnected---------");if(c!=null&&c==true){print("reconnect forced");this.reconnecting=false}if(this.reconnecting==true){print("already connecting");return}print("now reconnecting");this.reconnecting=true;if(this.retry==undefined){this.retry=0}this.retry++;setTimeout(function(){printtime();print("------------reconnecting-------");WebMessanger.registerWms(WebMessanger.prd,WebMessanger.zuid,WebMessanger.uname,WebMessanger.nname,silent,true)},b);print(""+a);WebMessanger.serverdown();WindowHandler.getAllChatTranscript();WMSUI.RestartTimers()};WebMessanger.isReconnecting=function(){return this.reconnecting};WebMessanger.registerZuid=function(e,b,a,c){WebMessanger.registerWms(e,b,a,null,c)};WebMessanger.registerAnnon=function(c,a,e,b){WebMessanger.disableContacts();WebMessanger.disableGroups();WebMessanger.disableActiveChat();WebMessanger.disableProfile();WebMessanger.disableMeeting();WebMessanger.disableNotification();WebMessanger.disableCWActions();this.registerAnnonUser=true;WebMessanger.registerWms(c,a,a,e,b)};WebMessanger.register=function(c,b,a){if(WebMessanger.isZuid(b)){WebMessanger.registerWms(c,b,null,null,a)}else{WebMessanger.registerWms(c,null,b,null,a)}};WebMessanger.enableToggleUI=function(){WMSUI.enableShowHide()};WebMessanger.disableDragDrop=function(){_WMSDRAGDROP=false};WebMessanger.setIamTicketName=function(a){_WMSIAMTICKETNAME=a};WebMessanger.setPhotoServer=function(a){_WMSPHOTOSERVER=a};WebMessanger.setIamServer=function(a){WMSIAMURL=a};WebMessanger.setChatServer=function(a){_WMSCHATURL=a};WebMessanger.setMailServer=function(a){_WMSMAILURL=a};WebMessanger.setCalendarServer=function(a){_WMSCALENDARSERVER=a};WebMessanger.setTheme=function(a){this.theme=a};WebMessanger.setDomain=function(a){_WMSDOMAIN=a};WebMessanger.getDomain=function(){return _WMSDOMAIN};WebMessanger.setConfig=function(a){_WMSCONFIG=a};WebMessanger.registerNotifications=function(b,a,c){_WMSCONFIG=0;WebMessanger.registerWms(b,a,a,c,true)};WebMessanger.registerWms=function(l,n,r,h,o,q){this.prd=l;this.uname=(r!=null&&r!=undefined)?r:"";this.zuid=(n!=null&&n!=undefined)?n:"";if(typeof this.nname=="undefined"){this.nname=(h!=null&&h!=undefined)?h:""}if(q==undefined&&this.settings==undefined){WebMessanger.init((o!=undefined)?o:false)}var f=document.getElementById("pconnect");if(f==undefined){var p='<IFRAME name="wmspconnect" style="display:none;" id="pconnect" src="/'+_WMSCONT+"/blank.html?domain="+_WMSDOMAIN+'"></IFRAME>';var c=document.createElement("DIV");c.innerHTML=p;c.style.display="none";document.body.appendChild(c);f=document.getElementById("pconnect")}if((new Date().getTime()-WebMessanger.lastconnect)>10000){WebMessanger.lastconnect=new Date().getTime();var b=(this.zuid!="")?this.zuid:this.uname;var g=false;if(!o){g=true}var e=this.prd;var a="/"+_WMSCONT+"/pconnect"+dext+"?prd="+e+"&uname="+b+"&ie="+((_WMS_FORCEDOMAIN)?false:ie)+"&opera="+opera_browser+"&samedomain="+_WMS_SAMEDOMAIN+"&safari="+wms_sf+nocachefix(true)+"&config="+_WMSCONFIG+"&settings="+g+"&wmscont="+_WMSCONT;if(_WMSSST){a+="&sst=true"}setTimeout(function(){f.src=a},1);setTimeout("pmonitor(true)",(pmonInterval*2))}};WebMessanger.getZuid=function(){return this.zuid};WebMessanger.disableContacts=function(){WMSUI.contactsenabled=false};WebMessanger.disableGroups=function(){WMSUI.groupsenabled=false};WebMessanger.disableActiveChat=function(){WMSUI.activechatenabled=false};WebMessanger.disableProfile=function(){WMSUI.profileenabled=false};WebMessanger.disableNotification=function(){WMSUI.notificationenabled=false};WebMessanger.disableCWActions=function(){this.disableCWAction=true};WebMessanger.setDateFormat=function(b){var a=/^((dd|MM|y{2,4})( {0,1})\/( {0,1})(dd|MM)( {0,1})\/( {0,1})(dd|MM|y{2,4}))$/;if(a.test(b)){this.dateformat=b}};WebMessanger.getDateFormat=function(){return this.dateformat};WebMessanger.getUserName=function(){return this.uname};WebMessanger.getNickName=function(){return this.nname};WebMessanger.setNickName=function(a){this.nname=a};WebMessanger.getUserId=function(){return this.uid};WebMessanger.getPrd=function(){return this.prd};WebMessanger.getSid=function(){return this.sid};WebMessanger.setSid=function(a){this.sid=a};WebMessanger.getRawSid=function(){return this.rawsid};WebMessanger.getRebrand=function(){return this.rebrand};WebMessanger.escape=function(a){return a.replace(/\"/g,'\\"')};WebMessanger.encode=function(c){try{var a=/<([^<>]*)>/g;return c.replace(a,"&lt;$1&gt;")}catch(b){return c}};WebMessanger.decodehtml=function(a){var a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");return a};WebMessanger.getNotification=function(){var a="getnoti"+cadapter;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.setStatus=function(b,c){if(b>4&&b<0){return}if(WmsResource.getRealValue("Available")==c){c="Available"}else{if(WmsResource.getRealValue("Busy")==c){c="Busy"}else{if(b==2){c="Invisible"}}}var a="setstatus"+cadapter+"?smsg="+encodeURIComponent(c)+"&scode="+b;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.getStatusMessage=function(){var a="getdefaultstatus"+cadapter;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.syncStatusMessage=function(){var url="getdefaultstatus"+cadapter;var response=wmssyncajx.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(url)+nocachefix());if(response==""){return null}var list=eval(response);return list[0].objString.response[0].objString};WebMessanger.getAllStatusMessage=function(){var a="getcstatus"+cadapter;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.getBarChatSettings=function(b){var a="getwmssettings"+cadapter+"?property="+encodeURIComponent(b);WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.UpdateWmsSettings=function(e,c,b){var a="updwmssettings"+cadapter+"?property="+encodeURIComponent(e)+"&key="+c+"&value="+b;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.clearCustomStatus=function(){var a="clearcstatus"+cadapter+"?user=1";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.clearReminder=function(b){var a="calid="+encodeURIComponent(b)+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/clearreminder"+dext,a)};WebMessanger.getZohoGroups=function(){var a="getgroups"+cadapter+"?module=fetchgroup&pno=1&lim=1";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.getChatTranscript=function(){var a="getchats"+cadapter+"?pno="+ZMSG_CHATPGNO+"&lim="+ZMSG_CHATCOUNT+"&search="+encodeURIComponent(ZMSG_SEARCHVALUE);WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.getChatCount=function(){var a="getchatcount"+cadapter+"?search="+encodeURIComponent(ZMSG_SEARCHVALUE);WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.deleteSelectedChats=function(b){var a="deleteselectedchat"+cadapter+"?chid="+b;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.deleteChat=function(a){var b="deletechat"+cadapter+"?chid="+a;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix())};WebMessanger.continueChat=function(b){var a=true;var e=false;var c="continuechat"+cadapter+"?chid="+b+"&btf="+a+"&autojoin="+e+"&sid="+encodeURIComponent(WebMessanger.getSid());WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(c)+nocachefix())};WebMessanger.disable=function(){if(debug){print("---------------WMS Disabled---------");printtime()}this.disablewms=true};WebMessanger.isOnline=function(a){WmsAjax.postrequest("/"+_WMSCONT+"/isonline"+dext,"ulist="+encodeURIComponent(a)+nocachefix())};WebMessanger.isdisablewms=function(){return this.disablewms};WebMessanger.setRebrand=function(a){this.rebrand=a};WebMessanger.setJsStaticDomain=function(a){this.jsstaticdomain=a};WebMessanger.setCssStaticDomain=function(a){this.cssstaticdomain=a};WebMessanger.useSameDomain=function(){_WMS_SAMEDOMAIN=true};WebMessanger.setWmsContext=function(a){_WMSCONT=a};WebMessanger.forceDomainChange=function(){_WMS_FORCEDOMAIN=true};WebMessanger.setLocale=function(f,c){var e=new Array("en","zh","ta","ja","de");var a=-1;for(var b=0;b<e.length;b++){if(e[b]==f){a=b;break}}if(a>-1){this.language=f;this.countrycode=c}else{this.language="en";this.countrycode="US"}};WebMessanger.disableMeeting=function(){this.meeting=false};WebMessanger.setMeetingUrl=function(a){wmsmeetingurl=a};WebMessanger.reload=function(){try{var a=newurl=window.location.href;if(a.indexOf("#")>-1){newurl=window.location.href.substring(0,window.location.href.indexOf("#"))}setTimeout(function(){window.location.href=newurl;return true},3000)}catch(b){setTimeout(function(){window.location.href=WebMessanger.locationurl;return true},3000)}};WebMessanger.push=function(F){if(F.mtype==WM_RECONNECT){WebMessanger.reconnect(CT_JOIN,"psdown",true);if(!silent){WMSUI.clearNotification()}}else{if(F.mtype==WM_NFY_LOGOUT){WebMessanger.disable();var v=F.msg;setTimeout(function(){WebMessanger.clearTicket(v.ticket);try{Collaboration.handleLogout(v.reason)}catch(I){}WebMessanger.reload()},1)}else{if(F.mtype==WM_SERVER_UP){if(!silent){WMSUI.clearNotification()}WmsContacts.init();try{AcsApi.handleServerUP()}catch(C){}setTimeout("Collaboration.serverup()",100);WmsServerCheck.online=true}else{if(F.mtype==WM_NFY_ATTACH){var t=F.msg;this.uid=t.uid;if(t.nname!=""){this.nname=t.nname}this.sid=t.sid;this.rawsid=t.rsid;myMsgObj.sender=t.uname;myMsgObj.nname=this.nname;myMsgObj.dname=this.nname;myMsgObj.nickname=this.nname;myMsgObj.zuid=t.zuid;this.zuid=t.zuid;if(!silent){WMSUI.clearNotification();setTimeout(function(){WMSUI.updateContacts(true)},1);WmsContacts.updateFromMDParent(WmsContacts.getZohoContacts())}setTimeout("WebMessanger.serverup()",100);try{WmsContactImpl.handleGetContacts()}catch(C){}}else{if(F.mtype==WM_NFY_DETACH){setTimeout("WebMessanger.serverdown()",100)}else{if(F.mtype==-7){try{Collaboration.handleServiceMessage(F.msg)}catch(C){}}else{if(F.mtype==-5){try{var v=F.msg;WebMessanger.disablemsg=v;Collaboration.handleWmsDisable(v.reason)}catch(C){}WebMessanger.disable()}else{if(F.mtype==NFY_USER_IDLE){var v=F.msg;v.msg=trimLength(WebMessanger.getContactName(v.zuid,v.dname),13)+" "+WmsResource.getRealValue("is_idle")+".";if(!silent){Self.status.update(v)}var E=v.chid;try{WmsChatUIImpl.handleUserIdle(v.dname,E)}catch(C){}}else{if(F.mtype==NFY_USER_ENTERED){var v=F.msg;v.msg=trimLength(WebMessanger.getContactName(v.zuid,v.dname),13)+" "+WmsResource.getRealValue("has_entered_text")+".";if(!silent){Self.status.update(v)}var E=v.chid;try{WmsChatUIImpl.handleUserEnteredText(v.dname,E)}catch(C){}}else{if(F.mtype==NFY_USER_TYPING){var v=F.msg;v.msg=trimLength(WebMessanger.getContactName(v.zuid,v.dname),13)+" "+WmsResource.getRealValue("is_typing")+".";if(!silent){Self.status.update(v)}var E=v.chid;try{WmsChatUIImpl.handleUserTyping(v.dname,E)}catch(C){}}else{if(F.mtype==WM_ACK_CONNECT){var t=F.msg;this.uid=t.uid;if(t.nname!=""){this.nname=t.nname}this.sid=t.sid;this.rawsid=t.rsid;myMsgObj.sender=t.uname;myMsgObj.nname=this.nname;myMsgObj.dname=this.nname;myMsgObj.nickname=this.nname;myMsgObj.zuid=t.zuid;this.zuid=t.zuid;print("---------------connected successfully---------");printtime();this.retry=0;this.reconnecting=false;WmsServerCheck.online=true;setTimeout(function(){Collaboration.onConnect()},100);WebMessanger.serverup()}else{if(F.mtype==WM_CLEAR_NOTI){var t=F.msg;if(t.opr=="clearunreadcount"){NotificationApiImpl.handleUnreadChatCount(0);if(!silent){WMSUI.clearUnreadNotification();ZMSGUI.clearAllUnreadChats()}}else{if(t.opr=="clearallnotifications"){NotificationApiImpl.handleUnreadChatCount(0);if(!silent){WMSUI.clearNotification();try{ZMSG_CLKUNREAD=false;ZMSGUI.hideunread()}catch(C){}}}else{if(t.opr=="clearreminder"){var s=t.data;if(s.reminder!=null){if(!silent){WMSUI.removeNotificationHolder("reminder"+s.reminder,false)}}}else{if(t.opr=="updateunreadcount"){var s=t.data;if(s.chatcount!=undefined){if(!silent){WMSUI.setUnreadChatNotifications(s)}}}else{if(t.opr=="notifyunreadcount"){var s=t.data;if(s.chatcount!=undefined){NotificationApiImpl.handleUnreadChatCount(s.chatcount);if(silent){return}WMSUI.setUnreadChatNotifications(s);if(s.chid!=undefined){ZMSGUI.markChatAsRead(s.chid)}}}else{if(t.opr=="clearlivenotifications"){if(!silent){WMSUI.clearLiveNotification(t.id)}}}}}}}}else{if(F.mtype==CT_NFY_ACTCHATADD){WMSUI.actchatupdated=true;var t=F.msg;WmsActiveChat.updateList(t)}else{if(F.mtype==CT_NFY_ACTCHATDELETE){WMSUI.actchatupdated=true;var t=F.msg;for(d in t){try{if(document.getElementById(t[d])!=undefined){var l=WmsResource.getRealValue("This_chat_is_idle_for_long_time");l='<dd class="wmstxt1"><div class="inftxt">'+l+"</div></dd>";Message.display(t[d],l,false)}}catch(C){}}WmsActiveChat.removeList(t)}else{if(F.mtype==CT_NFY_MSG){var t=F.msg;try{Collaboration.handleChatNotifyMessage(t.chid,t.sender,t.msg)}catch(C){}}else{if(F.mtype==CT_INF_MSG){var t=F.msg;t.sender="CT_INF_MSG";t.msg=Message.getInfoMsgString(t.msg);Message.formatAndDisplay(t)}else{if(F.mtype==WM_INFO){try{var t=F.msg;try{Collaboration.handleZohoMessage(F.prd,t.MSG,t.URL,t.URLSTRING,t.CATEGORY,t.SENDER,t.ATTACHMENTS,t.PARAMS,t.ID,t.DNAME,t.ORGS,t.GROUPS)}catch(C){}if(!silent){setTimeout(function(){WMSUI.addFeed(t)},1)}}catch(a){}}else{if(F.mtype==WM_CUSTOM){Collaboration.handleCustomMessage(F.msg)}else{if(F.mtype==WM_CROSSPRODUCT){if(F.prd=="CL"){var t=F.msg;if(t.operation=="EVENT REMINDER"){if(!silent){WMSUI.showRemainder(t.data)}}}Collaboration.handleCrossProductMessage(F.prd,F.msg)}else{if(F.mtype==ACS_MSG){try{var z=F.msg;AcsApi.handlePush(z.type,z.data)}catch(C){}}else{if(F.mtype==WM_PRESENCE){var t=F.msg}else{if(F.mtype==WM_LOGOUT){}else{if(F.mtype==WM_ZTI_FAIL_MSG){var t=F.msg;ZTI.handleFailure(t.reason,t)}else{if(F.mtype==CT_JOIN){var t=F.msg;var H=t.title;var E=t.chid;var n=t.ctype;WebMessanger.liveChats.push(E);if(n==1){try{WmsChatUIImpl.handleNewChat(t)}catch(C){}}if((n==1||n==5)&&!silent){if(!(n==5&&CustomChat.isActive(E,t.addinfo))){if(WmsChatUIImpl.isActive(E)){return}try{if(t.silent=="true"){return}}catch(g){}if(WindowHandler.getWinObjById(E)==null){if(t.autojoin!="false"&&t.creator!=myMsgObj.zuid){WmsSound.playTune("newchat")}}setTimeout(function(){WmsContacts.verifyUserStatus(t.users)},1);setTimeout(function(){WMSUI.createNewChat(t)},1);WebMessanger.mapChat(t)}}else{if(n==2){Collaboration.handleUserList(E,t.users)}}if(n==4||n==5){CustomChat.handleUserList(E,t)}}else{if(F.mtype==WM_PUB_SUB){try{var l=F.msg;var b=l.opr;if(b=="pubsub.ulist"){PubSubApi.addUsers(l.pskey,l.psid,l.ulist);PubSubImpl.handleUserList(l.pskey,l.ulist)}else{if(b="pubsub.usersubscribed"){PubSubApi.addUsers(l.pskey,l.psid,l.ulist);PubSubImpl.handleUserIn(l.pskey,l.ulist)}else{if(b="pubsub.userunsubscribed"){PubSubApi.removeUsers(l.pskey,l.psid,l.ulist);PubSubImpl.handleUserOut(l.pskey,l.ulist)}else{if(b="pubsub.message"){PubSubImpl.handleMessage(l.pskey,l.msg)}}}}}catch(C){}}else{if(F.mtype==CT_ATT_MSG){var v=F.msg;var n=v.ctype;var E=v.chid;if((n==1||n==5)&&!silent){if(!(n==5&&CustomChat.isActive(E,v.addinfo))){if(WmsChatUIImpl.isActive(E)){return}Message.formatAndDisplay(v);if(WindowHandler.getWinObjById(E)!=null){if(!WmsSound.getWinFocus()){WmsSound.playTune("chatmsg")}}}}}else{if(F.mtype==CT_TXT_MSG){var t=F.msg;var n=t.ctype;var E=t.chid;if(n==1){try{WmsChatUIImpl.handleChatMessage(t)}catch(C){}}if((n==1||n==5)&&!silent){if(!(n==5&&CustomChat.isActive(E,t.addinfo))){if(WmsChatUIImpl.isActive(E)){return}if(!Message.isLocalUser(t.uname)){Message.formatAndDisplay(t);Self.status.clear(E);setTimeout(function(){Message.show(t)},1000);if(WindowHandler.getWinObjById(E)!=null){if(!WmsSound.getWinFocus()){WmsSound.playTune("chatmsg")}}}else{if(!Message.isSameBrowser(t.sid)){WebMessanger.removeLiveChat(E);WindowHandler.removeWinById(E);ChatBlink.stopRepeat()}}}}else{if(n==2){Collaboration.handleMessage(E,t.sender,t.zuid,t.dname,t.msg)}}if(n==4||n==5){CustomChat.handleMessage(t)}}else{if(F.mtype==CT_CLOSE_WIN){var t=F.msg;var E=t.chid;var n=t.ctype;WebMessanger.removeLiveChat(E);WindowHandler.removeWinById(E);ChatBlink.stopRepeat();if(n==4||n==5){CustomChat.handleCloseWin(E)}}else{if(F.mtype==WM_AV_MSG){WMSTP.handleAVMessage(F.msg)}else{if(F.mtype==CT_NFY_USERSTATUS){var t=F.msg;var n=t.ctype;var E=t.chid;if((n==1||n==5)&&!silent){if(!(n==5&&CustomChat.isActive(E,t.addinfo))){if(t.status==0){if(Message.isLocalUser(t.uname)){WebMessanger.removeLiveChat(E);try{if(t.close!=null&&t.close=="true"){WindowHandler.removeWinById(E);ChatBlink.stopRepeat()}}catch(C){}}else{var q=WindowHandler.getWinObjById(E).partcount;t.msg="&nbsp;";if(!silent){if(q==1){Self.status.update(t)}}}}}}else{if(n==2){Collaboration.handlePresence(E,t.uname,t.zuid,t.dname,t.status)}}if(n==4||n==5){CustomChat.handlePresence(E,t.uname,t.zuid,t.dname,t.status)}}else{if(F.mtype==CT_NFY_USERADD){var t=F.msg;var n=t.ctype;var E=t.chid;if((n==1||n==5)&&!silent){if(!(n==5&&CustomChat.isActive(E,t.addinfo))){WindowHandler.addParticipantsByID(E,t.users);WebMessanger.mapChat(v)}}else{if(n==2){Collaboration.handleUserAdd(E,t.users)}}if(n==4||n==5){CustomChat.handleUserAdded(E,t.users,t.pcount)}}else{if(F.mtype==CT_NFY_USERDELETE){var t=F.msg;var n=t.ctype;var E=t.chid;if((n==1||n==5)&&!silent){if(!(n==5&&CustomChat.isActive(E,t.addinfo))){WindowHandler.deleteParticipantsByID(E,t.users);WebMessanger.mapChat(v)}}else{if(n==2){Collaboration.handleUserDeleted(E,t.users)}}if(n==4||n==5){CustomChat.handleUserDeleted(E,t.users,t.pcount)}}else{if(F.mtype==WM_NFY_COLLABADD){var t=F.msg;Collaboration.handleCollabAdd(t.uname,t.dname,t.zuid,t.time,t.chid)}else{if(F.mtype==WM_NFY_COLLABDELETE){var t=F.msg;Collaboration.handleCollabDelete(t.uname,t.dname,t.zuid,t.time,t.chid)}else{if(F.mtype==CT_NFY_SETTITLE){var v=F.msg;if(v!=undefined){var D=v.msg;var E=D.chid;var H=D.title;try{WindowHandler.setTitle(E,H)}catch(C){}try{WMSUI.actchatupdated=true;WmsActiveChat.updateChatTitle(E,H)}catch(p){}}}else{if(F.mtype==WM_NFY_CSTATUSCHANGE){var t=F.msg;var h=WebMessanger.scode;var G=t.scode;var r=t.smsg;WebMessanger.scode=G;WebMessanger.smsg=r;if(!silent){if(h!=4||G==2){setTimeout(function(){WMSUI.updateStatus(t.scode,t.smsg)},1);WMSUI.updateUserInfo()}else{WMSUI.changedsmsg=r;WMSUI.changedscode=G}}}else{if(F.mtype==WM_NFY_STATUS){var t=F.msg;t.dname=WebMessanger.getContactName(t.zuid,t.dname);try{WmsContactImpl.handlePresence(t.zuid,t.uname,t.dname,t.scode,t.smsg)}catch(C){}WindowHandler.updateUserStatus(t.zuid,t.scode,t.smsg);if(!silent){WMSUI.showUserStatus(t);setTimeout(function(){WMSUI.updateContacts(false)},1)}WmsContacts.updateStatus(t)}else{if(F.mtype==CONTACT_INFO){var t=F.msg;WmsContacts.updateContacts(t);if(!silent){var B=WmsContacts.isInitialised();WmsContacts.initialized=true;setTimeout(function(){WMSUI.updateContacts(!B)},1)}try{WmsContactImpl.handleGetContacts()}catch(C){}}else{if(F.mtype==MP_LOGIN){var t=F.msg;try{if(t.protocol=="gmail"||t.protocol=="yahoo"||t.protocol=="msn"){var c=t.loginid;mailsubscribers[c+t.protocol]=new Object();mailcnt[c+t.protocol+"mailcnt"]=0}}catch(C){}WmsMPAccounts.updateobj(t.loginid,t.status,t.statusmsg,t.protocol,t.userenteredid,t.mailnotification);WmsContactImpl.handleLogin(t.loginid,t.status,t.statusmsg,t.protocol,t.userenteredid,t.mailnotification)}else{if(F.mtype==MP_LOGOUT){var t=F.msg;WmsMPAccounts.updateobj(t.loginid,WmsMPAccounts.accountstatus.LOGGEDOUT,t.statusmsg,t.protocol,t.userenteredid);WmsContactImpl.handleLogout(t.loginid,WmsMPAccounts.accountstatus.LOGGEDOUT,t.statusmsg,t.protocol,t.userenteredid);WmsContacts.removeList(t.loginid);if(!silent){var B=WmsContacts.isInitialised();WmsContacts.initialized=true;setTimeout(function(){WMSUI.updateContacts(!B)},1)}}else{if(F.mtype==MP_RELOGIN){var t=F.msg;WmsMPAccounts.updateobj(t.loginid,t.status,t.statusmsg,t.protocol,t.userenteredid);WmsContactImpl.handleRelogin(t.loginid,t.status,t.statusmsg,t.protocol,t.userenteredid)}else{if(F.mtype==MP_CONTACT_INF_UPDATE){var t=F.msg;WmsContacts.updatempscontactinfo(t);if(!silent){var B=WmsContacts.isInitialised();WmsContacts.initialized=true;setTimeout(function(){WMSUI.updateContacts(!B)},1)}}else{if(F.mtype==MP_ADDBOOK){var t=F.msg;WmsContacts.updateAddressBook(t);if(!silent){var B=WmsContacts.isInitialised();WmsContacts.initialized=true;setTimeout(function(){WMSUI.updateContacts(!B)},1)}}else{if(F.mtype==MP_PRESENCE){var t=F.msg;WmsContacts.updatempscontactlist(t);WMSUI.updateContacts(false);for(var A in t){WindowHandler.updateUserStatus(t[A]["uname"],t[A]["scode"],t[A]["smsg"])}}else{if(F.mtype==MP_CONTACT_UPDATE){var t=F.msg;if(t.type=="addcon"){WmsContactImpl.handleMPInvite(t.protocol,t.contactid,t.loginid)}else{if(t.type=="removecon"){}}}else{if(F.mtype==WM_NFY_USERIMGCHANGE){if(!silent){WMSUI.populateudtls()}}else{if(F.mtype==CT_NFY_APPROVAL){var t=F.msg;var u=true;if(t.status==WMS_CON_ACCEPT){t.status=t.scode;WmsContactImpl.handleAccept(t.zuid,t.uname,t.dname,t.scode,t.smsg);if(!silent){setTimeout(function(){WMSUI.showAccept(t)},1)}}else{if(t.status==WMS_ONLINE){WmsContactImpl.notifyAccept(t.zuid,t.uname,t.dname,t.scode,t.smsg);t.status=t.scode;if(!silent){setTimeout(function(){WMSUI.clearInvite(t)},1)}}else{if(t.status==WMS_CON_REQACC){WmsContactImpl.handleInvite(t.zuid,t.uname,t.dname,t.scode,t.smsg);if(!silent){setTimeout(function(){WMSUI.showInvite(t)},1)}u=false}else{if(t.status==WMS_CON_UNAPRD){WmsContactImpl.notifyInvite(t.zuid,t.uname,t.dname,t.scode,t.smsg);if(!silent){setTimeout(function(){WMSUI.clearInvite(t)},1)}}else{if(t.status==WMS_CON_REJECT){WmsContactImpl.handleReject(t.zuid,t.uname,t.dname,t.scode,t.smsg);if(!silent){}u=false}else{if(t.status==WMS_CON_REMOVE){WmsContacts.deletecontact(t.zuid);WmsContactImpl.notifyRemove(t.zuid,t.uname,t.dname,t.scode,t.smsg);if(!silent){setTimeout(function(){WMSUI.clearInvite(t)},1)}}else{if(t.status==WMS_CON_DELETE){WmsContactImpl.handleDelete(t.zuid,t.uname,t.dname,t.scode,t.smsg);if(!silent){}}}}}}}}t.scode=t.status;t.dname=WebMessanger.getContactName(t.zuid,t.dname);WmsContacts.updatezohocontacts(t);WmsContactImpl.handlePresence(t.zuid,t.uname,t.dname,t.status,t.smsg);if(u&&!silent){setTimeout(function(){WMSUI.updateContacts(false)},1)}}else{if(F.mtype==NFY_REQ_CSUPPORT){if(!silent){Self.Idle=true;ChatBlink.start(WmsResource.getRealValue("Live_Support")+" - "+F.msg["guname"]);WMSUI.createLiveSupport(F.msg)}}else{if(F.mtype==NFY_ACC_CSUPPORT){var v=F.msg;if(!silent){WMSUI.removeLiveSupport(v.chid)}}else{if(F.mtype==NFY_QIT_CSUPPORT){var v=F.msg;if(!silent){ChatBlink.stopRepeat();WMSUI.missedLiveSupport(v.chid)}}else{if(F.mtype==NFY_ENDLIVESUPPORT){if(!silent){var t=F.msg;if(!silent){WMSUI.endLiveSupport(t)}}}else{if(F.mtype==CT_GUEST_REQ){if(!silent){var t=F.msg;var f="creator="+myMsgObj.sender+"&ulist="+t.guid+"&title="+t.title+"&type=guestim"+nocachefix();f=f+"&sid="+encodeURIComponent(WebMessanger.getSid());WmsAjax.postrequest("/"+_WMSCONT+"/createchat"+dext,f)}}else{if(F.mtype==WM_USER_LANG_CHANGE){var t=F.msg;setTimeout(function(){WebMessanger.clearTicket();Collaboration.handleLanguageChange(t)},1)}else{if(F.mtype==WM_SYSTEM_MSG){var t=F.msg;if(t.module=="feeddelete"){ZohoFeedImpl.handleFeedDelete(t);try{var w=t.data["deletedid"];var o=t.data["unreadcount"];for(A=0;A<WMSUI.getNotifycnt();A++){if(w==WMSUI.feedinfo[w]["ID"]){WMSUI.clearLiveNotification(w)}}}catch(C){}if(o!=0){WMSUI.setNotificationCount(o)}ZMSGUI.deleteFeed()}else{if(t.module=="updatewmssettings"){if(!silent){WmsSettings.handleUpdateWmsSettings(t.data)}}}}else{if(F.mtype==WM_SKIPTRANS){var t=F.msg;WindowHandler.skipTranscript(t)}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}};WebMessanger.mapChat=function(c){try{var g=c.users;var a=c.chid;if(g.length==1){var b=g[0].zuid;if(WebMessanger.chatmap[a]!=null){if(b!=WebMessanger.chatmap[a]){delete WebMessanger.ucmap[WebMessanger.chatmap[a]];delete WebMessanger.chatmap[a];return}}WebMessanger.ucmap[b]=a;WebMessanger.chatmap[a]=b;WebMessanger.waitchats[b]="JOIN"}else{delete WebMessanger.ucmap[WebMessanger.chatmap[a]];delete WebMessanger.chatmap[a]}}catch(f){}};WebMessanger.callClearNotification=function(){var a="clearnotifications"+cadapter;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.ClearNotificationById=function(b){var a="nid="+encodeURIComponent(b)+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/clearlivenotifications"+dext,a)};WebMessanger.markAllRead=function(){var a="deleteuchat"+cadapter;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WebMessanger.getChatForUser=function(a){return WebMessanger.ucmap[a]};WebMessanger.loadTranscript=function(f,a,b){if(f.trim()==""){if(!silent){if(WindowHandler.getWinObjById(a)!=undefined){WindowHandler.getWinObjById(a).updateSkipTranscriptMessage()}}return}f=Message.format(f);f=Message.replaceAttURL(f);f=Smiley.replace(f);if(!silent){var e=WindowHandler.getWinObjById(a);var c=e.msgdisp;if(c!=null){c.innerHTML=f;if(a==Message.lastjoinId){WindowHandler.highlightByWinId(a)}if(b){e.scrollDisplay()}else{e.setScrollValue(0)}e.updateSkipTranscriptMessage()}}};WebMessanger.wmsOnDemandAjaxDispatcher=function(b,c,a){if(b=="resource"){WebMessanger.setResources(a);if(!silent){WMSUI.populateStrings()}}};WebMessanger.wmsAjaxDispatcher=function(module,type,dataObj){if(debug){}if(module=="unreadmessage"){if(dataObj.tableToRowList!=null){ZMSGUI.fillNew(dataObj.tableToRowList)}}else{if(module=="showunread"){ZMSGUI.fillunreadChat(dataObj.tableToRowList)}else{if(module=="zohomessage"){ZMSGUI.fillHistory(dataObj.tableToRowList)}else{if(module=="zohomsgcount"){ZMSGUI.fillNavigation(eval(dataObj))}else{if(module=="zohomessageapi"){ZohoFeedImpl.handleFeedHistory(dataObj.tableToRowList)}else{if(module=="zohomsgcountapi"){ZohoFeedImpl.handleFeedHistoryCount(eval(dataObj))}else{if(module=="zohofeedsinrange"){ZohoFeedImpl.handleFeedsInRange(dataObj.tableToRowList)}else{if(module=="unreadmessageapi"){ZohoFeedImpl.handleUnreadFeeds(dataObj.tableToRowList)}else{if(module=="mpsacnts"){WmsMPAccounts.updateaccountslist(dataObj.tableToRowList)}else{if(module=="onlinestatus"){Collaboration.handleIsOnline(dataObj)}else{if(module=="getdefaultstatus"){WebMessanger.smsg=dataObj.smsg;WebMessanger.scode=dataObj.scode;if(!silent){WMSUI.populateudtls();try{WMSUI.updateUserInfo()}catch(e){}WebMessanger.getAllStatusMessage()}try{WmsContactImpl.handleStatusMessage(dataObj.scode,dataObj.smsg)}catch(e){}}else{if(module=="getcustomstatus"){if(!silent){WMSUI.populteCustomStatus(dataObj.getRowsForTable("UserStatus"))}try{WmsContactImpl.handeAllStatusMessages(dataObj.getRowsForTable("UserStatus"))}catch(e){}}else{if(module=="getnotification"){if(!silent){WMSUI.setNotification(dataObj)}if(dataObj.chatcount!=undefined){NotificationApiImpl.handleUnreadChatCount(dataObj.chatcount)}}else{if(module=="clearcustomstatus"){}else{if(module=="addcontact"){if(!silent){WMSUI.showInviteStatus(dataObj)}}else{if(module=="reinvitecontactbyemailid"){if(!silent){if(dataObj){WMSUI.statusbar.innerHTML=WmsResource.getRealValue("Contact_successfully_reinvited")}}}else{if(module=="getgroups"){if(!silent){WmsGroups.updategrouplist(dataObj)}}else{if(module=="gettranscript"){if(!silent){ZMSGUI.populate(dataObj)}}else{if(module=="gettranscriptcount"){if(!silent){ZMSGUI.showChatCount(dataObj)}}else{if(module=="deletechat"){if(!silent){ZMSGUI.handleDeleteChat()}}else{if(module=="deleteselectedchat"){if(!silent){ZMSGUI.handleDeleteChat()}}else{if(module=="addmember"){if(!silent){if(dataObj.errorMessage=="Error adding member"){alert(WmsResource.getRealValue("The_email_address_you_entered_is_invaild"))}}}else{if(module=="getzohocontacts"){if(!silent){WMSUI.handleGetZohoContacts(dataObj)}}}}}}}}}}}}}}}}}}}}}}}}};WebMessanger.setResources=function(a){WmsResource.init();WmsResource.MessageObject=a};WebMessanger.presenceDispatcher=function(b,c,a){};WebMessanger.clearWaitChat=function(a){try{if(WebMessanger.waitchats[a]=="WAIT"){WebMessanger.waitchats[a]="CLEARED"}}catch(b){}};WebMessanger.gchat=function(b){var a="type=gim&creator="+myMsgObj.sender+"&ulist="+b+nocachefix();if(!silent){a=a+"&sid="+encodeURIComponent(WebMessanger.getSid())}WmsAjax.postrequest("/"+_WMSCONT+"/createchat"+dext,a)};WebMessanger.chat=function(a){WebMessanger.userclick=true;try{if(WebMessanger.waitchats[a]=="WAIT"){return}}catch(f){}WebMessanger.waitchats[a]="WAIT";setTimeout("WebMessanger.clearWaitChat('"+a+"')",5000);ChatBlink.stopRepeat();var b=WebMessanger.ucmap[a];if(b!=undefined){WebMessanger.join(b)}else{if(WmsContacts.isMPUser(a)){var c="creator="+myMsgObj.sender+"&ulist="+a+"&type=mp"+nocachefix();if(!silent){c=c+"&sid="+encodeURIComponent(WebMessanger.getSid())}WmsAjax.postrequest("/"+_WMSCONT+"/createchat"+dext,c)}else{var c="creator="+myMsgObj.sender+"&ulist="+a+nocachefix();if(!silent){c=c+"&sid="+encodeURIComponent(WebMessanger.getSid())}WmsAjax.postrequest("/"+_WMSCONT+"/createchat"+dext,c)}}};WebMessanger.newChat=function(a){if(WmsContacts.isMPUser(""+a)){WebMessanger.chat(a);return}WebMessanger.userclick=true;try{if(WebMessanger.waitchats[a]=="WAIT"){return}}catch(c){}WebMessanger.waitchats[a]="WAIT";setTimeout("WebMessanger.clearWaitChat('"+a+"')",5000);ChatBlink.stopRepeat();var b="creator="+myMsgObj.sender+"&ulist="+a+"&type=nim"+nocachefix();if(!silent){b=b+"&sid="+encodeURIComponent(WebMessanger.getSid())}WmsAjax.postrequest("/"+_WMSCONT+"/createchat"+dext,b)};WebMessanger.mpchat=function(a){WebMessanger.userclick=true;ChatBlink.stopRepeat();var b=WebMessanger.ucmap[a];if(b!=undefined){WebMessanger.join(b)}else{var c="creator="+myMsgObj.sender+"&type=mp&ulist="+a+nocachefix();if(!silent){c=c+"&sid="+encodeURIComponent(WebMessanger.getSid())}WmsAjax.postrequest("/"+_WMSCONT+"/createchat"+dext,c)}};WebMessanger.getZohoContacts=function(){var a=nocachefix(true);WmsAjax.request("/"+_WMSCONT+"/getzohocontacts"+dext,a)};WebMessanger.joinCollab=function(a){if(isNaN(a)||a.trim()==""){return}setTimeout(function(){var b="uname="+myMsgObj.sender+"&chid="+a+nocachefix();b=b+"&sid="+encodeURIComponent(WebMessanger.getSid());WmsAjax.postrequest("/"+_WMSCONT+"/joinchat"+dext,b)},100)};WebMessanger.attachSession=function(a){if(isNaN(a)||a.trim()==""){return}setTimeout(function(){var b="chid="+a+nocachefix();if(!silent){b=b+"&sid="+encodeURIComponent(WebMessanger.getSid())}WmsAjax.postrequest("/"+_WMSCONT+"/attachsession"+dext,b)},100)};WebMessanger.join=function(a){if(isNaN(a)||a.trim()==""){return}setTimeout(function(){var b="uname="+myMsgObj.sender+"&chid="+a+nocachefix();if(!silent){b=b+"&sid="+encodeURIComponent(WebMessanger.getSid())}WmsAjax.postrequest("/"+_WMSCONT+"/joinchat"+dext,b)},100)};WebMessanger.quit=function(a){if(isNaN(a)||a.trim()==""){return}WmsAjax.postrequest("/"+_WMSCONT+"/quitchat"+dext,"close=true&uname="+myMsgObj.sender+"&sid="+encodeURIComponent(WebMessanger.getSid())+"&chid="+a+nocachefix())};WebMessanger.verifyUserStatus=function(c,b){var a="czuid="+c+"&ccode="+b+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/verifystatus"+dext,a)};WebMessanger.getResource=function(){var url="?lang="+WebMessanger.language+"&ccode="+WebMessanger.countrycode;if(this.rebrand!=""){url=url+"&rebrand="+this.rebrand}var transcript=wmssyncajx.request("/"+_WMSCONT+"/getresource"+dext+url);var resObj=eval(transcript);resObj=resObj[0];WebMessanger.setResources(resObj.objString);if(!silent){WMSUI.populateStrings()}};WebMessanger.skipTranscript=function(a){var b="chid="+encodeURIComponent(a)+"&dname="+encodeURIComponent(WebMessanger.getNickName())+"&skiptrans="+true+nocachefix();WmsProxyAjax.postrequest("/"+_WMSCONT+"/skiptranscript"+dext,b)};WebMessanger.enableTranscript=function(a){var b="chid="+encodeURIComponent(a)+"&dname="+encodeURIComponent(WebMessanger.getNickName())+"&skiptrans="+false+nocachefix();WmsProxyAjax.postrequest("/"+_WMSCONT+"/skiptranscript"+dext,b)};WebMessanger.setIdle=function(b,c){var a="sid="+encodeURIComponent(WebMessanger.getSid())+"&smsg="+encodeURIComponent(c)+"&"+nocachefix();WmsProxyAjax.postrequest("/"+_WMSCONT+"/useridle"+dext,a)};WebMessanger.setActive=function(b,c){var a="smsg="+encodeURIComponent(c)+"&scode="+b+"&sid="+encodeURIComponent(WebMessanger.getSid())+nocachefix();WmsProxyAjax.postrequest("/"+_WMSCONT+"/useractive"+dext,a)};WebMessanger.setTimeZoneOffset=function(a){_TZOFFSET=a};WebMessanger.transcript=function(a,b){if(b==null){b=true}setTimeout(function(){var c="/"+_WMSCONT+"/getwmstranscript"+dext+"?chid="+a+"&partial="+b+"&lang="+WebMessanger.language+"&ccode="+WebMessanger.countrycode+"&uname="+myMsgObj.sender+"&tzoffset="+_TZOFFSET+"&view=chatwindow&displayid="+a+nocachefix(true);if(WebMessanger.getDateFormat()!=undefined){c=c+"&dateformat="+encodeURIComponent(WebMessanger.getDateFormat())}var e=wmssyncajx.request(c);Message.PREV_SENDER["ch"+a]=null;WmsChatUIImpl.handleTranscript(a,e);if(WmsChatUIImpl.isActive(a)){return}WebMessanger.loadTranscript(e,a,b)},10)};WebMessanger.loadContinueChat=function(did,chid,view,obj){var url="viewwmstranscript"+cadapter+"?chid="+chid+"&tzoffset="+_TZOFFSET+"&makeread=false&partial=false&lang="+WebMessanger.language+"&ccode="+WebMessanger.countrycode+"&view="+view+"&displayid="+did;var transres=eval(wmssyncajx.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(url)+nocachefix()));var transcript=transres[0]["objString"]["response"];try{transcript=HtmlTag.cure(transcript)}catch(e){}transcript=Smiley.replace(transcript);transcript=Message.replaceAttURL(transcript);var parentobj=obj.parentNode;if(view=="chatwindow"){WindowHandler.loadContinueChatTranscript(did,transcript,parentobj)}else{if(view=="history"||view=="unread"){ZMSGUI.loadContinueChatTranscript(did,transcript,parentobj,view)}}};WebMessanger.customtranscript=function(a,b){if(b==null){b=true}setTimeout(function(){var c="/"+_WMSCONT+"/getwmstranscript"+dext+"?chid="+a+"&partial="+b+"&lang="+WebMessanger.language+"&ccode="+WebMessanger.countrycode+"&uname="+myMsgObj.sender+"&tzoffset="+_TZOFFSET+nocachefix(true);if(WebMessanger.getDateFormat()!=undefined){c=c+"&dateformat="+encodeURIComponent(WebMessanger.getDateFormat())}var g=wmssyncajx.request(c);try{g=HtmlTag.cure(g)}catch(f){}g=Smiley.replace(g);g=Message.replaceAttURL(g);if(g.indexOf("<a href='#' onclick=WebMessanger.transcript")==0){g=g.replace("<a href='#' onclick=WebMessanger.transcript","<a href='javascript:;' onclick=WebMessanger.customtranscript")}if(g.indexOf("<a href='javascript:;' onclick=WebMessanger.transcript")==0){g=g.replace("<a href='javascript:;' onclick=WebMessanger.transcript","<a href='javascript:;' onclick=WebMessanger.customtranscript")}CustomChat.handleTranscript(a,g)},10)};WebMessanger.sendMessage=function(a,g,c){var b="chid="+a+"&sender="+myMsgObj.sender+"&msg="+encodeURIComponent(g)+"&dname="+encodeURIComponent(WebMessanger.getNickName())+"&sid="+encodeURIComponent(WebMessanger.getSid())+nocachefix();try{if(c!=undefined&&c!=""){b=b+"&style="+encodeURIComponent(c)}}catch(f){}WmsAjax.postrequest("/"+_WMSCONT+"/sendmessage"+dext,b)};WebMessanger.serverup=function(){try{AcsApi.handleServerUP()}catch(a){}setTimeout("Collaboration.serverup()",100);if(WebMessanger.systemdown){}else{Cookie.restore()}WebMessanger.systemdown=false;if(!silent){WMSUI.setDisplayName();setTimeout(function(){WMSUI.setDisplayName()},2000)}};WebMessanger.serverdown=function(){WebMessanger.systemdown=true;setTimeout("Collaboration.serverdown()",100)};WebMessanger.feedhistory=function(){ZMSGUI.launchHistory()};WebMessanger.enableSST=function(){_WMSSST=true;this.authtype=3};WebMessanger.isZuid=function(a){return !isNaN(a)};WebMessanger.getContactName=function(b,a){try{if(b==null||b==undefined){return a}if(!WebMessanger.isZuid(b)){return a}if(myMsgObj.zuid==b){return myMsgObj.nickname}if(WmsContacts.zohocontacts[b]!=undefined){return WmsContacts.zohocontacts[b]["DNAME"]}}catch(c){}return a};WebMessanger.documentready=function(){WmsContacts.init();WmsGroups.init();WmsActiveChat.init();WebMessanger.getStatusMessage()};WebMessanger.setCSRFParamName=function(a){_WMSCFPARAMNAME=a};WebMessanger.setCSRFTokenName=function(a){_WMSCFTOKEN=a};WebMessanger.setBarSettingsValue=function(a){for(d in a){if(d==undefined&&a[d]==undefined){continue}for(k in WmsSettings.bsettings){if(d==k){WmsSettings.bsettings[k]=a[d]}}}WmsSettings.populate()};WebMessanger.escapeHTML=function(a){return(a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"#39;"))};WebMessanger.unescapeHTML=function(a){return(a.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;</g,"<").replace(/&quot;/g,'"').replace(/&#39;/g,"'"))};WebMessanger.setChatTitle=function(a,c){var b="chid="+a+"&title="+encodeURIComponent(c)+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/settitle"+dext,b)};WebMessanger.addMember=function(n,l,o){var p=o.split(",");var b=o.split(",");var q=l.split(",");for(var e=0,a=p.length-1;e<a;e++){if(l.indexOf(WmsContacts.getEmailId(b[e]))==-1){p.splice(e,1)}}var h=[];var f=[];for(var e=0,g=p.length-1;e<g;e++){if(WmsContacts.isMPUser(p[e])){h.push(p[e])}else{f.push(p[e])}}if(h.length!=0){var c="chid="+n+"&ulist="+encodeURIComponent(h)+"&type=mp"+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/addmember"+dext,c)}if(f.length!=0){var c="chid="+n+"&ulist="+encodeURIComponent(f)+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/addmember"+dext,c)}};WebMessanger.deleteMember=function(b,a){var c="chid="+b+"&ulist="+encodeURIComponent(a)+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/deletemember"+dext,c)};WebMessanger.setZIndex=function(a){this.setzindex=a};WebMessanger.disableWMSStatus=function(){this.wmsservicestatus=false};WebMessanger.isServiceStatus=function(){return this.wmsservicestatus};WebMessanger.setServiceStatus=function(a,b){WMSUI.setServiceStatus(a,b,true)};WebMessanger.disableNetworkDownBanner=function(){this.disablenetworkdownbanner=true};WebMessanger.clearTicket=function(b){var a="?"+nocachefix(true);if(b!=undefined){a=a+"&lgtticket="+b}wmssyncajx.request("/"+_WMSCONT+"/cleariamcache"+dext+a)};WebMessanger.isPresenceEnabled=function(){if(getWmsConfig()&4==4||getWmsConfig()&8==8){return true}return false};WebMessanger.removeLiveChat=function(a){var b=WebMessanger.liveChats.indexOf(a);if(b!=-1){WebMessanger.liveChats.splice(b,1)}};function WmsServerCheck(){}WmsServerCheck.init=function(){WmsServerCheck.lastresptime=null;WmsServerCheck.checktimer=0;WmsServerCheck.online=false;WmsServerCheck.timeout=5000};WmsServerCheck.goOfflineCheck=function(){if(!WmsServerCheck.online){return}if(WmsServerCheck.lastresptime==null||(new Date().getTime()-WmsServerCheck.lastresptime)>5000){WmsServerCheck.online=false;Collaboration.goOffline();clearTimeout(WmsServerCheck.checktimer);clearTimeout(WebMessanger.showbannertime);WebMessanger.showbannertime=setTimeout(function(){WMSUI.showNetDownBanner()},120000)}};function nocachefix(b){if(b){return"&nocache="+(new Date()).getTime()}var a="";if(_WMSCFPARAMNAME!=undefined){a="&"+_WMSCFPARAMNAME+"="+_WMSCFTOKEN}a+="&nocache="+(new Date()).getTime();return a}function getITicket(){var a=_WMSIAMTICKETNAME;var e=(document.cookie).indexOf(a);var c="";if(e!=-1){var b=a.length;beginIndex=(e+b);endIndex=(document.cookie).indexOf(";");c=(document.cookie).substr((beginIndex+1),(endIndex-1));if(c.indexOf(";")!=-1){c=c.substring(0,c.indexOf(";"))}}return c}var myMsgObj=new Object();myMsgObj.chid="-1";myMsgObj.sender="";myMsgObj.nickname="j";myMsgObj.msg="";myMsgObj.uname="";function WMSUI(){}WMSUI.populatecounter=0;WMSUI.throttletimer=0;WMSUI.generateUI=function(){var a='<div onclick="SELECTCHAT"><p id="ptitle" class="wms-ch" onmouseover="SHOWCLOSEIMG" onmouseout="HIDECLOSEIMG"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-normalclose" title="'+WmsResource.getRealValue("Close")+'" onclick="CHATCLOSE" id="ccCHATID" style="display:none"/><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-po" title="'+WmsResource.getRealValue("Popout")+'" onclick="POPOUT" id="cpCHATID" style="display:none"/><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-min" onclick="TOGGLEBODY" title="'+WmsResource.getRealValue("Minimize")+'" id="cmCHATID" style="display:none"/><img id="wmsctimage" class="wms-cp" src="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-SCODE" id="wmsctscode" style="width: 12px;"/><span class="wms-cn wms-bt" id="wmschattitle" title="FULLCHATTITLE" >CHATTITLE</span><span class="wms-ash" id="wmsctsmsg">STATUSMSG</span></p>';a+='<span id="ctoolbar" class="wms-op" style="display:block">';if(!WebMessanger.registerAnnonUser){a+='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" id="wmstvideo" style="display:none;" onclick="STARTVIDEOCHAT" title="'+WmsResource.getRealValue("Start_video_chat")+'" class="wms-video" onmouseover="this.className=\'wms-video-hover\';" onmouseout="this.className=\'wms-video\';" />';a+='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" id="wmstvoice" style="display:none;"  onclick="STARTAUDIOCHAT" title="'+WmsResource.getRealValue("Start_voice_chat")+'" class="wms-voice" onmouseover="this.className=\'wms-voice-hover\';" onmouseout="this.className=\'wms-voice\';" />'}if(!WebMessanger.disableCWAction){a+='<a href="javascript:;" onclick="TOGGLEACTION" id="ta_WININDEX" class="wms-action" title="'+WmsResource.getRealValue("Actions")+'" >'+WmsResource.getRealValue("Actions")+'<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-acticon"/></a>'}a+='<div id="actiondiv" style="display:none;right:-1px; top:61px;z-index:999;" class="wms-rig"><p style="display:none;" id="wmstmeet" onclick="STARTMEETING" class="wms-rigp" onmouseover="this.className=\'wms-rigpsel\'" onmouseout="this.className=\'wms-rigp\'" >'+WmsResource.getRealValue("Share_Desktop")+'</p><p onmouseover="this.className=\'wms-rigpsel\'" onmouseout="this.className=\'wms-rigp\'"onclick="EDITCHATTITLE" class="wms-rigp" >'+WmsResource.getRealValue("Set_Chat_Title")+'</p><p onmouseover="this.className=\'wms-rigpsel\'" onmouseout="this.className=\'wms-rigp\'" onclick="SHOWADDMEMBER" class="wms-rigp">'+WmsResource.getRealValue("Add_Member")+'</p><form action="'+_WMSCHATURL+'upload.ext" name="uploadsCHATID" target="CHATIDsendfiles" enctype="multipart/form-data" method="post" onmouseover="this.className=\'wms-rigpsel\'" onmouseout="this.className=\'wms-rigp\'" class="wms-rigp" style="position:relative;" id="formsend" title="'+WmsResource.getRealValue("File_transfer_is_supported_between_zoho_users_only")+'"><p><input type="hidden" name="chid" value="CHATID"><input type="hidden" name="ncf"><input type="hidden" name="mod" value="att"><input type="hidden" name="sid" value=""><input type="hidden" name="sender" value=""><input name="file1" id="wms-file" type="file" onChange="WMSUI.submitFile(document.uploadsCHATID,\'CHATID\');"  onclick="ADDWMSCLICK" style="position:absolute;cursor:pointer;opacity:0;width:90px;filter:alpha(opacity=1)" size="1"/><iframe id="CHATIDsendfiles" name="CHATIDsendfiles" style="display:none;"></iframe>'+WmsResource.getRealValue("Send_File")+'</p></form><p style="display:none;" id="wmsgrpmbmrs" onclick="TOGGLEGROUPMEMBERS" class="wms-rigp" onmouseover="this.className=\'wms-rigpsel\'" onmouseout="this.className=\'wms-rigp\'" >'+WmsResource.getRealValue("Show_Members")+"</p></div></span>";a+='<div id="addmember" class="wms-op" style="display:none;height:22px"><img  id="canceladdmem" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"  onclick="SHOWADDMEMBER" class="wms-addmember-cancel" title="'+WmsResource.getRealValue("Cancel")+'"/><input type="text" class="wms-addmember-txtbox" id="addmemberinput" onkeyup="MEMBERPOP" onblur="util.fillDefault(this,\''+WmsResource.getRealValue("Enter_an_email_address")+"')\" onclick=\"util.checkEmpty(this,'"+WmsResource.getRealValue("Enter_an_email_address")+'\')"><input type="hidden" id="addmemberhiddeninput"><img  src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"  onclick="ADDMEMBER" class="wms-addmember-disable" id="addmemberimg" title="'+WmsResource.getRealValue("Add_Member")+'"/></div><br style="clear:both; overflow:hidden; height:1px;">';a+='<div id="wms-addmemouter" class="wmspd1 wmsaddmemberdisplay" ></div>';a+='<div class=\'WMSCHATCLASS\' id="ctrlcomp"><div class="wms-groupmbr-mn" id="wmsgroupmbr" style="display:none"></div><dl class="wmscmdl" id="msgdisp"></dl></div><div class="wmstyptxt" id="wmsustat">&nbsp;</div><div id="txtbxdiv" class="wmscmtd"><textarea class="wmseditor" style="resize:none;" id="editor" onkeydown="return WMSUI.handleEvent(event,this,\'CHATID\')" onkeyup="return WMSUI.handleStatus(event,\'CHATID\')" onclick="KEYCLICKHANDLE CHKGRPMEMBERS" onblur="WMSUI.blurChat(\'CHATID\')"></textarea></div>';a=a.replace(/WMSCHATCLASS/g,"wmscmd");return a};WMSUI.isMaximized=function(){return(WMSUI.toolbar.style.display=="block")};WMSUI.toggle=function(){if(WMSUI.enablehide){if(WMSUI.toolbar.style.display=="block"){Cookie.set("wmsuihide","1",60000);WMSUI.hideAll();WMSUI.collapsetbar.style.display="block";try{WmsContactImpl.handleShowContactsUI()}catch(a){}}else{Cookie.set("wmsuihide","0",60000);WMSUI.restore();WMSUI.collapsetbar.style.display="none";try{WmsContactImpl.handleHideContactsUI()}catch(a){}}}};WMSUI.hideAll=function(){WMSUI.toolbar.style.display="none";WMSUI.hidden=true};WMSUI.restore=function(){WMSUI.toolbar.style.display="block";WMSUI.hidden=false};WMSUI.generateBarUI=function(){var a='<div onclick="TOGGLEBODY" id="bCHATID" class="wms-tab-selected" onmouseover="SHOWCLOSEIMG" onmouseout="HIDECLOSEIMG"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" title="'+WmsResource.getRealValue("Close")+'" onmouseover="CLOSEMOUSEOVER" onmouseout="CLOSEMOUSEOUT" onclick="CHATCLOSE" id="bcCHATID" style="display:none"/><span title="'+WmsResource.getRealValue("Minmize_Maximize")+'" id="bartitle" class="wms-selspan">CHATTITLE</span></div>';return a};WMSUI.barmouseover=function(a,b){try{if(a.className!="wms-tab-selected"||b){a.className="wms-tab-mouseover"}}catch(c){}};WMSUI.barmouseout=function(a,b){try{if(a.className!="wms-tab-selected"||b){a.className="wms-tab-normal"}}catch(c){}};WMSUI.barclick=function(a){try{a.className="wms-tab-selected"}catch(b){}};WMSUI.closemouseover=function(a){try{a.className="wms-selected"}catch(b){}};WMSUI.closemouseout=function(a){try{a.className=""}catch(b){}};WMSUI.createNewChat=function(t){WMSUI.hideContactinfo();var q=t.title;var r=t.chid;var b=t.users.length;if(b==1){var c=t.users[0]["scode"];var f=t.users[0]["smsg"];try{if(WmsContacts.isMPUser(t.users[0]["uname"])){var s=t.users[0]["dname"];var g=WmsContacts.get(s.substring(s.indexOf("|")+1,s.length));c=g.STATUS;f=g.STATUSMSG;if(g.DNAME!=undefined){q=g.DNAME}}}catch(p){}}else{var c="10";var f=WmsResource.getRealValue("Group_Chat")}try{var a=WindowHandler.getWinObjById(r);if(a!=null&&a!="empty"){a.updateParticipants(t.users);a.updateToolBar();if(a.getObjId()==r&&!a.isPopedOut()&&document.getElementById(r)!=null){if(WebMessanger.userclick){a.showWin()}WebMessanger.userclick=false;return}else{if(a.isPopedOut()){return}}}}catch(h){}try{if(WebMessanger.registerAnnonUser&&b==1){q=t.users[0]["dname"]}var l=Factory.createDialog(WMSUI.generateUI(t),WMSUI.generateBarUI(),"divId="+r+",title="+escape(q)+",scode="+c+",smsg="+escape(f));WebMessanger.transcript(r);var o=WindowHandler.getWinObjById(l);o.updateSkipTranMenu(t.writetrans);if(t.addinfo!=undefined){o.updateAddInfo(t.addinfo)}o.updateParticipants(t.users);o.updateToolBar();o.showWin();o.getMeFront();if(t.join){o.composer.focus()}if(Cookie.isMinimized(r)){o.minimize()}Cookie.removeFromOpenedChats(r)}catch(n){}};WMSUI.addonclick=function(obj,fn){if(ie){obj.onclick=function(){eval(fn)}}else{obj.setAttribute("onclick",fn)}};WMSUI.openNotify=function(a){if(a=="MAIL"){return Collaboration.openUnreadMails()}else{if(a=="FEED"){WMSUI.clearFeedsNotification();ZMSGUI.launchNew();return false}else{if(a=="CHAT"){return ZMSGUI.getOfflineMessage()}}}};WMSUI.setNotification=function(countobj){if(WMSUI.userdtlsdiv.innerHTML==""){WebMessanger.getStatusMessage()}if(WMSUI.notifydiv.innerHTML==""){WMSUI.notifydiv.innerHTML='<p class="wms-th" onclick="WMSUI.hidendtls();" style="cursor:pointer" title="'+WmsResource.getRealValue("Click_to_minimize")+"\" onmouseover=\"document.getElementById('noti-min').style.visibility='visible'\" onmouseout=\"document.getElementById('noti-min').style.visibility='hidden'\"><img src=\"/"+_WMSCONT+'/images/spacer.gif" id="noti-min" class="wms-min1" onclick="WMSUI.hideusrs();" title="'+WmsResource.getRealValue("Minimize")+'" style="visibility:hidden;"/><span class="wms-oh">'+WmsResource.getRealValue("Notification")+'</span></p><div class="wmsssd" id="wmsnotify"></div><div class="wms-clsnot" id="wms-notifylinks"><a onclick="ZMSGUI.launchHistory();" href="javascript:;">'+WmsResource.getRealValue("Feeds")+'</a>&nbsp;|&nbsp;<a onclick="WMSUI.callClearNotification();" href="javascript:;">'+WmsResource.getRealValue("Clear")+"</a></div>"}var obj=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsnotify","DIV");var nhtml="";if(countobj.mailcount!=undefined&&countobj.mailcount!=0){nhtml+='<p class="wms-np"><img class="wms-umi" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt" id="mails">'+WmsResource.getRealValue("You_have")+' <a class="wms-lt" href="'+_WMSMAILURL+'" onclick="return WMSUI.openNotify(\'MAIL\')" target="_blank">'+countobj.mailcount+" "+WmsResource.getRealValue("unread")+"</a> "+WmsResource.getRealValue("mail_s")+" </span></p>"}if(countobj.zmsgcount!=undefined&&countobj.zmsgcount!=0){WMSUI.clearFeedsNotification();nhtml+='<p class="wms-np" id="wmsfeeds"><img class="wms-ufi" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt" id="feeds">'+WmsResource.getRealValue("You_have")+' <a class="wms-lt" onclick="return WMSUI.openNotify(\'FEED\')" target="_blank" href="javascript:;">'+countobj.zmsgcount+" "+WmsResource.getRealValue("unread")+" </a> "+WmsResource.getRealValue("feed_s")+"</span></p>";WMSUI.feedcount=countobj.zmsgcount;WMSUI.feedinitcnt=countobj.zmsgcount}if(countobj.chatcount!=undefined&&countobj.chatcount!=0){WMSUI.removeUnreadChats();nhtml+='<p class="wms-np" id="unreadchats"><img class="wms-uci" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt">'+WmsResource.getRealValue("You_have")+' <a class="wms-lt" onclick="return WMSUI.openNotify(\'CHAT\')" href="javascript:;" >'+countobj.chatcount+" "+WmsResource.getRealValue("unread")+"</a> "+WmsResource.getRealValue("chat_s")+' <a href="javascript:;" class="wms-lt" onclick="WMSUI.markasRead();">'+WmsResource.getRealValue("Mark_all_read")+"</a></span></p>";WMSUI.chatcnt=countobj.chatcount}if(WMSUI.nonotify){var objlinks=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wms-notifylinks","DIV");if(nhtml==""){obj.innerHTML='<p class="wms-np"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" style="width:10px;"/><span>'+WmsResource.getRealValue("No_notifications")+"</span></p>";objlinks.innerHTML='<a onclick="ZMSGUI.launchHistory();" href="javascript:;">'+WmsResource.getRealValue("Feeds")+"</a>"}else{obj.innerHTML=nhtml;objlinks.innerHTML='<a onclick="ZMSGUI.launchHistory();" href="javascript:;">'+WmsResource.getRealValue("Feeds")+'</a>&nbsp;|&nbsp;<a onclick="WMSUI.callClearNotification();" href="javascript:;">'+WmsResource.getRealValue("Clear")+"</a>"}}else{if(nhtml!=""){obj.innerHTML+=nhtml}}var count=eval(countobj.mailcount)+eval(countobj.zmsgcount)+eval(countobj.chatcount);if(count>0){var ecnt=WMSUI.getNotifycnt();WMSUI.setNotificationCount(count+ecnt)}};WMSUI.clearFeedsNotification=function(){WMSUI.removeFeeds();var a=WMSUI.getNotifycnt()-WMSUI.feedcount;WMSUI.feedcount=0;WMSUI.setNotificationCount(a)};WMSUI.removeFeeds=function(){try{var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsfeeds","P");var a=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsnotify","DIV");a.removeChild(c)}catch(b){}};WMSUI.removeUnreadChats=function(){try{var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,"unreadchats","P");var a=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsnotify","DIV");a.removeChild(c)}catch(b){}};WMSUI.markasRead=function(){WebMessanger.markAllRead();WMSUI.clearUnreadNotification()};WMSUI.clearUnreadNotification=function(){WMSUI.removeUnreadChats();var a=WMSUI.getNotifycnt()-WMSUI.chatcnt;WMSUI.chatcnt=0;WMSUI.setNotificationCount(a)};WMSUI.clearNotification=function(){WMSUI.feedcount=0;WMSUI.chatcnt=0;WMSUI.setNotificationCount(0)};WMSUI.clearLiveNotification=function(b){WMSUI.feedcount-=1;var a=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsnotify","DIV");a=WindowHandler.getObjectInObject(a,b,"P");if(a!=null||a!=undefined){a.style.display="none";delete WMSUI.feedinfo[b];WMSUI.decrNotificationCount()}};WMSUI.callClearNotification=function(){ZMSGUI.unreadChat();WebMessanger.callClearNotification();WMSUI.clearNotification()};WMSUI.openfeed=function(b){var a=WMSUI.feedinfo[b];WMSUI.removeNotification(b);WebMessanger.ClearNotificationById(b);return Collaboration.openURL(a.URL,a.URLSTRING,a.ATTACHMENTS,a.PRODID)};WMSUI.populatefeed=function(msgObj){try{var handlemsg=ZohoFeedImpl.handleLiveFeedsUI(msgObj);if(handlemsg!==false){return handlemsg}}catch(exp){}var sender="";var dname;try{sender=msgObj.SENDER;if(sender!=null&&sender!=""){try{dname=msgObj.DNAME}catch(e){}if(!isNaN(sender)){dname=WebMessanger.getContactName(sender,dname)}else{dname=(dname!=undefined&&dname!="")?dname:sender}}}catch(e){}if(msgObj.PARAMS!=""){msgObj.MSG=(dname!=undefined&&dname!="")?WmsResource.getRealData(msgObj.MSG,msgObj.PARAMS)+"<span id='wmsfeedsender' class='wmsfeedsender'><span> - </span><a href='javascript:;' onClick='WebMessanger.chat(\""+sender+"\");'>"+dname+"</a></span>":WmsResource.getRealData(msgObj.MSG,msgObj.PARAMS)}else{var Regsender=eval("/"+sender+" /i");msgObj.MSG=(msgObj.MSG.search(Regsender)==0)?msgObj.MSG.replace(Regsender,""):msgObj.MSG;msgObj.MSG=(dname!=undefined&&dname!="")?WmsResource.getRealData(msgObj.MSG)+"<span id='wmsfeedsender' class='wmsfeedsender'><span> - </span><a href='javascript:;' onClick='WebMessanger.chat(\""+sender+"\");'>"+dname+"</a></span>":WmsResource.getRealData(msgObj.MSG)}var html='<p class="wms-np" id="'+msgObj.ID+'"><img class="wms-ufi" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt">'+msgObj.MSG;if(msgObj.URL!=""&&msgObj.URLSTRING!=""){html=html+' <a href="'+msgObj.URL+'" class="wms-lt" target="_blank" onClick="return WMSUI.openfeed('+msgObj.ID+')">'+msgObj.URLSTRING+"</a>"}else{if(msgObj.URL!=""){html=html+' <a href="'+msgObj.URL+'" class="wms-lt" target="_blank" onClick="return WMSUI.openfeed('+msgObj.ID+')">'+msgObj.URL+"</a>"}else{if(msgObj.URLSTRING!=""){html=html+" - "+msgObj.URLSTRING}}}html+="</span></p>";return html};WMSUI.addFeed=function(a){try{WMSUI.feedcount++;WMSUI.feedinfo[a.ID]=a;WMSUI.addNotification(WMSUI.populatefeed(a))}catch(b){}};WMSUI.addNotification=function(a){if(WMSUI.nonotify){WMSUI.notifydiv.innerHTML='<p class="wms-th" onclick="WMSUI.hidendtls();" style="cursor:pointer" title="'+WmsResource.getRealValue("Click_to_minimize")+"\" onmouseover=\"document.getElementById('noti-min').style.visibility='visible'\" onmouseout=\"document.getElementById('noti-min').style.visibility='hidden'\"><img src=\"/"+_WMSCONT+'/images/spacer.gif" id="noti-min" class="wms-min1" onclick="WMSUI.hideusrs();" title="'+WmsResource.getRealValue("Minimize")+'" style="visibility:hidden;"/><span class="wms-oh">'+WmsResource.getRealValue("Notification")+'</span></p><div class="wmsssd" id="wmsnotify"></div><div class="wms-clsnot" id="wms-notifylinks"><a onclick="ZMSGUI.launchHistory();" href="javascript:;">'+WmsResource.getRealValue("Feeds")+'</a>&nbsp;|&nbsp;<a onclick="WMSUI.callClearNotification();" href="javascript:;">'+WmsResource.getRealValue("Clear")+"</a></div>"}WMSUI.incrNotificationCount();var b=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsnotify","DIV");b.innerHTML+=a;WMSUI.nonotify=false};WMSUI.removeNotification=function(f){try{if(f.length-f.lastIndexOf("inv")==3){var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,f,"DIV")}else{var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,f,"P")}if(c!=null){var a=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsnotify","DIV");WMSUI.decrNotificationCount();a.removeChild(c)}}catch(b){}};WMSUI.rejectContact=function(b,a,c){try{WmsContacts.reject("zoho",a,WebMessanger.uname);WMSUI.removeNotification(b+""+c)}catch(f){}};WMSUI.addContact=function(b,a,c){try{WmsContacts.add("zoho",a,WebMessanger.uname);WMSUI.removeNotification(b+""+c)}catch(f){}};WMSUI.acceptContact=function(b,a,c){WmsContacts.accept("zoho",a,WebMessanger.uname);WMSUI.removeNotification(b+""+c)};WMSUI.hidenoti=function(a,b){WMSUI.removeNotification(a+""+b)};WMSUI.populateInfo=function(){var a='<div class="wmsleto"></div>';if(WMSUI.onlineusrs>0){a=a+"<p>"+WmsResource.getRealValue("$1_Friends_Online","<strong>"+WMSUI.onlineusrs+"</strong>")+"</p>"}else{a+="<p>"+WmsResource.getRealValue("No_Friends_Online")+"</p>"}if(WMSUI.getNotifycnt()>0){a=a+"<p>"+WmsResource.getRealValue("$1_Notifications","<strong>"+WMSUI.getNotifycnt()+"</strong>")+"</p>"}else{a+="<p>"+WmsResource.getRealValue("No_notifications")+"</p>"}if(WindowHandler.getChatCount()>0){a=a+'<p class="wmscm wto">'+WmsResource.getRealValue("$1_Live_Chats","<strong>"+WindowHandler.getChatCount()+"</strong>")+'</p><div class="wmsribo"></div>'}else{a+='<p class="wmscm wto">'+WmsResource.getRealValue("No_Live_Chats")+'</p><div class="wmsribo"></div>'}WMSUI.infodiv.innerHTML=a};WMSUI.showInfo=function(){WMSUI.infodiv.style.display="block"};WMSUI.hideInfo=function(){WMSUI.infodiv.style.display="none"};WMSUI.clearInvite=function(a){try{WMSUI.removeNotification(a.zuid+"inv")}catch(b){}try{WMSUI.removeNotification(a.zuid+"del")}catch(b){}try{WMSUI.removeNotification(a.zuid+"rej")}catch(b){}};WMSUI.showInvite=function(a){var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,a.zuid+"inv","DIV");if(c==null){var b='<div class="wms-invtmn" id="'+a.zuid+'inv"><div class="wms-ntfmn"><img class="wms-cp" src="'+_WMSPHOTOSERVER+"/file?ID="+a.zuid+'&t=user&height=70&width=70"><img width="69" height="69" class="wms-ntfhrimg" id="userphoto" src="'+_WMSPHOTOSERVER+"/file?ID="+a.zuid+'&t=user&height=70&width=70"></div><div title="'+a.email+'" class="wms-ntfcnt"><span>'+a.dname+"</span> "+WmsResource.getRealValue("has_added_you_in_his_her_buddies_list")+'</div><div class="wms-ntfbotmn"><input type="button"  value="'+WmsResource.getRealValue("Accept")+'" class="wms-bn" onclick="javascript:WMSUI.acceptContact(\''+a.zuid+"','"+a.uname+"','inv');\">&nbsp;<a class=\"wms-rejbtn\" onclick=\"javascript:WMSUI.rejectContact('"+a.zuid+"','"+a.uname+"','inv');\" href=\"#\">"+WmsResource.getRealValue("Reject")+"</a></div></div>";WMSUI.addNotification(b)}};WMSUI.showReject=function(a){var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,a.zuid+"rej","P");if(c==null){var b='<p class="wms-np" id="'+a.zuid+'rej"><img class="wms-ui" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt">'+a.dname+" "+WmsResource.getRealValue("has_rejected_you_from_his_her_buddies_list")+' <br><input type="button" value="'+WmsResource.getRealValue("Reinvite")+'" onclick="javascript:WMSUI.addContact(\''+a.zuid+"','"+a.uname+'\',\'rej\');"> &nbsp;&nbsp; <a href="javascript:;" class="wms-lt" onclick="javascript:WMSUI.hidenoti(\''+a.zuid+"','rej');\">"+WmsResource.getRealValue("Cancel")+"</a></span></p>";WMSUI.addNotification(b)}};WMSUI.showDelete=function(a){var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,a.zuid+"del","P");if(c==null){var b='<p class="wms-np" id="'+a.zuid+'del"><img class="wms-ui" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt">'+a.dname+" "+WmsResource.getRealValue("has_deleted_you_from_his_her_buddies_list")+' <br><input type="button" value="'+WmsResource.getRealValue("Reinvite")+'" onclick="javascript:WMSUI.addContact(\''+a.zuid+"','"+a.uname+'\',\'del\');"> &nbsp;&nbsp; <a href="javascript:;" class="wms-lt" onclick="javascript:WMSUI.hidenoti(\''+a.zuid+"','del');\">"+WmsResource.getRealValue("Cancel")+"</a></span></p>";WMSUI.addNotification(b)}};WMSUI.showAccept=function(a){var c=WindowHandler.getObjectInObject(WMSUI.notifydiv,a.zuid+"acc","P");if(c==null){var b='<p class="wms-np" id="'+a.zuid+'acc"><img class="wms-ui" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt">'+a.dname+" "+WmsResource.getRealValue("has_accepted_you_in_his_her_buddies_list")+' &nbsp;&nbsp;&nbsp; <a href="javascript:;" class="wms-lt" onclick="javascript:WMSUI.hidenoti(\''+a.zuid+"','acc');\">"+WmsResource.getRealValue("Hide")+"</a></span></p>";WMSUI.addNotification(b)}};WMSUI.blink={init:function(c,b,a){WMSUI.blinkObj=c;WMSUI.blinkint=a;WMSUI.blink.start(b)},start:function(a){if(a==0){WMSUI.blinkObj.style.display="block";return}if(WMSUI.blinkObj.style.display=="block"){WMSUI.blinkObj.style.display="none"}else{WMSUI.blinkObj.style.display="block"}wmsnfytimer=setTimeout("WMSUI.blink.start("+ --a+")",WMSUI.blinkint)}};WMSUI.blinkNotification=function(a){WMSUI.blink.init(WMSUI.notiicon,2,500)};WMSUI.getNotifycnt=function(){var cnt=eval(WMSUI.notiicon.innerHTML);if(isNaN(cnt)){cnt=0}return cnt};WMSUI.incrNotificationCount=function(){var a=WMSUI.getNotifycnt();WMSUI.setNotificationCount(a+1)};WMSUI.decrNotificationCount=function(){var a=WMSUI.getNotifycnt();WMSUI.setNotificationCount(a-1)};WMSUI.setNotificationCount=function(b){if(b==undefined||b==""){b=0}WMSUI.notiicon.innerHTML=(b<100)?b:"..";WMSUI.notiicon.title=b;WMSUI.notificount=b;if(b>0){WMSUI.nonotify=false;WMSUI.notiicon.style.display="block";WMSUI.blinkNotification(b);if(WMSUI.hidden){WMSUI.populateInfo();WMSUI.showInfo()}}else{WMSUI.notiicon.innerHTML="";WMSUI.notiicon.style.display="none";WMSUI.nonotify=true;WMSUI.feedcount=0;try{var f=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wmsnotify","DIV");f.innerHTML='<p class="wms-np"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" style="width:10px;"/><span>'+WmsResource.getRealValue("No_notifications")+"</span></p>";var a=WindowHandler.getObjectInObject(WMSUI.notifydiv,"wms-notifylinks","DIV");a.innerHTML='<a onclick="ZMSGUI.launchHistory();" href="javascript:;">'+WmsResource.getRealValue("Feeds")+"</a>"}catch(c){}}};WMSUI.setServiceStatus=function(a,b,c){if(WebMessanger.isServiceStatus()===true||c===true){WMSUI.statusbar.innerHTML=a;if(b!=undefined){WMSUI.statusbar.title=WmsResource.getRealValue("Click_here_to_chat");WMSUI.statusbar.style.cursor="pointer";WMSUI.addonclick(WMSUI.statusbar,b)}}};WMSUI.getBarIcon=function(c){var e="";if(c=="wmsudtlsbar"){e='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-pro" title="'+WmsResource.getRealValue("Settings")+'"/>'}else{if(c=="wmsntfybar"){var b=WMSUI.i18N("Notifications","Notifications");e='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-ni" title="'+b+'"/>';if(WMSUI.contactsenabled==false&&WMSUI.groupsenabled==false&&WMSUI.activechatenabled==false){if(WMSUI.profileenabled==false){e+='<span class="wms-otnot1">'+b+"</span>"}else{e+='<span class="wms-otnot">'+b+"</span>"}}}}if(c=="wmsactchatbar"){e='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" id="wmsactchatbaricon" class="wms-active" title="'+WMSUI.i18N("Active_Chats","Active Chats")+'"/>';if(WMSUI.contactsenabled==false&&WMSUI.groupsenabled==false){if(WMSUI.profileenabled==false){e+='<span class="wms-otact1">'+WMSUI.i18N("Active_Chats","Active Chats")+"</span>"}else{e+='<span class="wms-otact">'+WMSUI.i18N("Active_Chats","Active Chats")+"</span>"}}}else{if(c=="wmsgrpbar"){var a=WMSUI.i18N("Groups","Groups");e='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-gi" title="'+a+'"/>';if(WMSUI.contactsenabled==false&&WMSUI.profileenabled==false){if(WMSUI.activechatenabled==false){e+='<span class="wms-otg2">'+a+"</span>"}else{e+='<span class="wms-otg3">'+a+"</span>"}}else{if(WMSUI.contactsenabled==false){if(WMSUI.activechatenabled==false){e+='<span class="wms-otg1">'+a+"</span>"}else{e+='<span class="wms-otg">'+a+"</span>"}}}}else{if(c=="wmsusrsbar"){if(WMSUI.contactsenabled){e=WMSUI.getContactsText(((WMSUI.contactsText!="")?WMSUI.contactsText:WMSUI.i18N("Contacts","Contacts")),0)}}}}return e};WMSUI.populate=function(){if(typeof WMSUI.contactsenabled=="undefined"){WMSUI.contactsenabled=true}if(typeof WMSUI.groupsenabled=="undefined"){WMSUI.groupsenabled=true}if(typeof WMSUI.activechatenabled=="undefined"){WMSUI.activechatenabled=true}if(typeof WMSUI.profileenabled=="undefined"){WMSUI.profileenabled=true}if(typeof WMSUI.notificationenabled=="undefined"){WMSUI.notificationenabled=true}WMSUI.toolbar=document.createElement("DIV");WMSUI.toolbar.id="wmstoolbar";WMSUI.toolbar.className="wms-cd";WMSUI.toolbar.style.display="block";WMSUI.toolbar.style.zIndex=WebMessanger.setzindex;WMSUI.addonclick(WMSUI.toolbar,"WMSUI.isDIVEnabled(event)");WMSUI.notificationholder=document.createElement("DIV");WMSUI.notificationholder.id="wmsnotificationholder";WMSUI.notificationholder.className="wms-nh";WMSUI.toolbar.appendChild(WMSUI.notificationholder);WMSUI.statusbar=document.createElement("DIV");WMSUI.statusbar.id="wmsstatusbar";WMSUI.statusbar.className="wms-sm";WMSUI.toolbar.appendChild(WMSUI.statusbar);WMSUI.collapsebar=document.createElement("DIV");WMSUI.collapsebar.id="wmscollapsebar";WMSUI.collapsebar.className="wms-md";WMSUI.collapsetbar=document.createElement("DIV");WMSUI.collapsetbar.id="wmscollapsetbar";WMSUI.collapsetbar.className="wms-colpsbar";WMSUI.collapsetbar.style.display="none";WMSUI.collapsetbar.innerHTML='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-maxi" title="'+WMSUI.i18N("Restore","Restore")+'"/>';WMSUI.collapsetbar.onclick=function(){WMSUI.toggle()};WMSUI.collapsetbar.onmouseover=function(){if(WMSUI.hidden){WMSUI.populateInfo();WMSUI.showInfo()}};WMSUI.collapsetbar.onmouseout=function(){WMSUI.hideInfo()};WMSUI.toolbar.appendChild(WMSUI.collapsebar);document.body.appendChild(WMSUI.collapsetbar);WMSUI.userdtlsbar=document.createElement("DIV");WMSUI.userdtlsbar.id="wmsudtlsbar";WMSUI.userdtlsbar.className="wms-ud";WMSUI.userdtlsbar.innerHTML=WMSUI.getBarIcon(WMSUI.userdtlsbar.id);WMSUI.addonclick(WMSUI.userdtlsbar,"WMSUI.toggleudtls()");if(!WMSUI.profileenabled){WMSUI.userdtlsbar.style.display="none"}WMSUI.toolbar.appendChild(WMSUI.userdtlsbar);WMSUI.notifybar=document.createElement("DIV");WMSUI.notifybar.id="wmsntfybar";WMSUI.notifybar.className="wms-nd";WMSUI.notifybar.innerHTML=WMSUI.getBarIcon(WMSUI.notifybar.id);WMSUI.addonclick(WMSUI.notifybar,"WMSUI.togglendtls()");WMSUI.notiicon=document.createElement("LABEL");WMSUI.notiicon.id="wmsntfyicon";WMSUI.notiicon.className="wmsnotifyi";WMSUI.notiicon.style.display="none";WMSUI.toolbar.appendChild(WMSUI.notifybar);WMSUI.notifybar.appendChild(WMSUI.notiicon);WMSUI.notifydiv=document.createElement("DIV");WMSUI.notifydiv.className="wms-ucd";WMSUI.notifydiv.style.display="none";WMSUI.notifydiv.innerHTML="";if(!WMSUI.notificationenabled){WMSUI.notifybar.style.display="none"}WMSUI.toolbar.appendChild(WMSUI.notifydiv);if(WMSUI.activechatenabled){WMSUI.actchatbar=document.createElement("DIV");WMSUI.actchatbar.id="wmsactchatbar";WMSUI.actchatbar.className="wms-nd";WMSUI.actchatbar.innerHTML=WMSUI.getBarIcon(WMSUI.actchatbar.id);WMSUI.addonclick(WMSUI.actchatbar,"WMSUI.toggleacttls()");WMSUI.acticon=document.createElement("LABEL");WMSUI.acticon.id="wmsacticon";WMSUI.acticon.className="wmsactivei";WMSUI.acticon.style.display="none";WMSUI.toolbar.appendChild(WMSUI.actchatbar);WMSUI.actchatbar.appendChild(WMSUI.acticon)}if(WMSUI.groupsenabled){WMSUI.groupbar=document.createElement("DIV");WMSUI.groupbar.id="wmsgrpbar";WMSUI.groupbar.className="wms-ud";WMSUI.groupbar.innerHTML=WMSUI.getBarIcon(WMSUI.groupbar.id);WMSUI.addonclick(WMSUI.groupbar,"WMSUI.togglegdtls()");WMSUI.toolbar.appendChild(WMSUI.groupbar)}if(WMSUI.contactsenabled){WMSUI.usersbar=document.createElement("DIV");WMSUI.usersbar.id="wmsusrsbar";WMSUI.usersbar.className="wms-od";WMSUI.addonclick(WMSUI.usersbar,"WMSUI.toggleusrs()");WMSUI.toolbar.appendChild(WMSUI.usersbar);WMSUI.usersbar.innerHTML=WMSUI.getBarIcon(WMSUI.usersbar.id)}var b=document.createElement("DIV");b.style.display="none";WMSUI.imageloader=document.createElement("IMG");WMSUI.imageloader.type="image";WMSUI.imageloader.onload=function(){if(this.src.indexOf("https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif")==-1){WMSUI.imageobj.src=this.src;WMSUI.imageloader.src="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif"}};b.appendChild(WMSUI.imageloader);WMSUI.toolbar.appendChild(b);WMSUI.userdtlsdiv=document.createElement("DIV");WMSUI.userdtlsdiv.className="wms-ucd";WMSUI.userdtlsdiv.style.display="none";WMSUI.toolbar.appendChild(WMSUI.userdtlsdiv);var a=document.createElement("DIV");a.id="wmschatbar";WindowHandler.setChatBar(a);WMSUI.toolbar.appendChild(a);WMSUI.infodiv=document.createElement("DIV");WMSUI.infodiv.className="wms-ttipdiv";WMSUI.infodiv.style.display="none";document.body.appendChild(WMSUI.infodiv);WMSUI.infodiv.onmouseover=function(){WMSUI.showInfo()};WMSUI.infodiv.onmouseout=function(){WMSUI.hideInfo()};WMSUI.infodiv.onclick=function(){WMSUI.toggle();WMSUI.hideInfo()};document.body.appendChild(WMSUI.toolbar)};WMSUI.loadImage=function(a,b){if(a.src==b){return}a.onload=function(){};WMSUI.imageobj=a;WMSUI.imageloader.src=b};WMSUI.restorebarfromcookie=function(){if(WMSUI.enablehide&&Cookie.get("wmsuihide")=="1"){WMSUI.hideAll();WMSUI.collapsetbar.style.display="block";try{WmsContactImpl.handleShowContactsUI()}catch(a){}}};WMSUI.hideudtls=function(){WMSUI.userdtlsdiv.style.display="none";WMSUI.makeNormal(WMSUI.userdtlsbar);try{WMSUI.hideEditStatus()}catch(a){}};WMSUI.hidegrps=function(){WMSUI.groupdiv.style.display="none";WMSUI.makeNormal(WMSUI.groupbar)};WMSUI.checkHideusrs=function(a){try{if(ie){var c=a.srcElement.id}else{var c=a.target.id}if(c!="wmssound"&&c!="wmsinvite"){WMSUI.hideusrs()}}catch(b){}};WMSUI.hideusrs=function(){WMSUI.usersdiv.style.display="none";WMSUI.makeNormal(WMSUI.usersbar);try{WMSUI.hideaddContacts()}catch(a){}Cookie.set("con","0",60000)};WMSUI.showusrs=function(){WMSUI.searchpresent="contacts";WMSUI.updateUserInfo();WMSUI.usersdiv.style.display="block";WMSUI.makeSelect(WMSUI.usersbar)};WMSUI.makeSelect=function(b){if(ie){if(WebMessanger.theme=="bar"){b.style.borderTop="1px solid #FFFFFF"}b.style.backgroundColor="#FFFFFF"}var a=b.className;b.className=a.replace("-selected","")+"-selected"};WMSUI.makeNormal=function(b){if(ie){if(WebMessanger.theme=="bar"){b.style.borderTop="1px solid #9a9a9a"}b.style.background="none"}var a=b.className;b.className=a.replace("-selected","")};WMSUI.hidegdtls=function(){WMSUI.groupdiv.style.display="none";WMSUI.makeNormal(WMSUI.groupbar)};WMSUI.hidendtls=function(){WMSUI.notifydiv.style.display="none";WMSUI.makeNormal(WMSUI.notifybar)};WMSUI.showOptions=function(f,a,o){var b=WMSUI.getEventSrc(o);if(b.id!="wmscntopt"+a){return}if(WMSUI.optionsdiv.style.display=="block"&&WMSUI.currentId==a){WMSUI.optionsdiv.style.display="none";if(WmsSettings.soc==1){f.className="wms-optioncont"}else{f.className="wms-option"}}else{WMSUI.currentId=a;WMSUI.optionsdiv.innerHTML=WMSUI.populateoptions();WMSUI.optionsdiv.className="wms-rigb";WMSUI.optionsdiv.style.display="block";WMSUI.cntoptionheight=WMSUI.optionsdiv.offsetHeight;if(WmsSettings.soc==1){f.className="wms-optioncont-sel"}else{f.className="wms-option-sel"}try{WMSUI.optionsdiv.style.zIndex=parseInt(WMSUI.optionsdiv.style.zIndex)+2}catch(l){}var g=util.findPosXY(WMSUI.contactscont,true);WMSUI.contdivtop=g.y;var h=util.findPosXY(f,true);var q=((h.x)-((ie)?80:81));WMSUI.optionsdiv.style.left=q+"px";var p=((h.y)-WMSUI.contactscont.scrollTop);var c=p-WMSUI.contdivtop;var n=WMSUI.contdivtop+200;c=c+WMSUI.searchcntheight+18;if(n<(p+WMSUI.cntoptionheight)){c=c-(WMSUI.cntoptionheight+16)}WMSUI.optionsdiv.style.top=c+"px";WMSUI.addIndocClickcallbackQue(a,f,function(e){if(e!="wmscntopt"+a){if(e.indexOf("wmscntopt")==-1){WMSUI.optionsdiv.style.display="none"}(WmsSettings.soc==1)?f.className="wms-optioncont":f.className="wms-option";f.style.display="none"}},o)}clearTimeout(WMSUI.contactdetailtimer);try{WMSUI.hideContactinfo()}catch(l){}WMSUI.hideOptionImg()};WMSUI.contactScrolled=function(a){WMSUI.handleDocumentClick(a)};WMSUI.addIndocClickcallbackQue=function(f,e,c,b){if(ie){WMSUI.handleDocumentClick(b);WMSKeyHandler.skipeventlistener=true}var a=new Object();a.htmlObj=e;a["function"]=c;WMSUI.docClickcallbackQue[f]=a};WMSUI.handleDocumentClick=function(b){try{var a=WMSUI.getEventSrc(b);var g=WMSUI.docClickcallbackQue;for(var f in g){var c=g[f];c["function"](a.id);delete WMSUI.docClickcallbackQue[f]}}catch(e){}};WMSUI.renamecntct=function(b){try{var g=b.dname.value;try{WmsContacts.rename(WMSUI.currentId,g)}catch(a){}var f=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsdn"+WMSUI.currentId,"DIV");f.innerHTML=WebMessanger.encode(trimLength(g,18))}catch(c){}};WMSUI.showrenamecntct=function(){try{var c=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsdn"+WMSUI.currentId,"DIV");c.innerHTML='<form onsubmit="WMSUI.renamecntct(this);return false;"><input class="wms-dedit" id="wmsdedit" name="dname" type="text" onkeyup="WMSUI.checkRenameKeycode(event,this.value)"></form>';var a=WindowHandler.getObjectInObject(c,"wmsdedit","INPUT");a.value=WebMessanger.decodehtml(WmsContacts.getDisplayName(WMSUI.currentId));a.select();a.focus()}catch(b){}};WMSUI.checkRenameKeycode=function(a,b){try{if(a.keyCode==27){var f=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsdn"+WMSUI.currentId,"DIV");f.innerHTML=WebMessanger.decodehtml(WmsContacts.getDisplayName(WMSUI.currentId))}}catch(c){}};WMSUI.deletecntct=function(){if(confirm(WmsResource.getRealValue("Are_you_sure_you_wish_to_delete_this_contact"))){WmsContacts.remove("zoho",WMSUI.currentId,WebMessanger.uname)}};WMSUI.deleteParticipant=function(b,a,e){var c=WindowHandler.getWinObjById(b).title;if(confirm(WmsResource.getRealValue("Are_you_sure_to_delete_the_participant_$1_from_the_$2",""+e+","+c+""))){WebMessanger.deleteMember(b,a)}};WMSUI.startMeeting=function(c){try{if(c==undefined){c=WMSUI.currentId}var b=WmsContacts.contactslist[c]["EMAILID"];var a=wmsmeetingurl+"/login/MeetNow.jsp?participants="+b+"&source=chatbar";window.open(a)}catch(f){}};WMSUI.startVideoChat=function(a){if(WMSTP.isVideoEnabled()){if(a==undefined){a=WMSUI.currentId}WMSTP.handleNewVideo(getZuid(),a)}};WMSUI.startAudioChat=function(a){if(WMSTP.isAudioEnabled()){if(a==undefined){a=WMSUI.currentId}WMSTP.handleNewAudio(getZuid(),a)}};WMSUI.mailopen=function(h,g,c){var a=parseInt((g*screen.width)/100);var f=parseInt((c*screen.height)/100);var b=(screen.width-a)/2;var e=(screen.height-f)/2;return window.open(h,new Date().getTime(),"height="+f+", width="+a+",status=yes,toolbar=no,top="+e+", left="+b+", menubar=no,location=no,scrollbars=yes,resizable=yes")};WMSUI.sendmail=function(){var a=WmsContacts.getEmailId(WMSUI.currentId);WMSUI.mailopen(_WMSMAILURL+"mail/compose.do?mode=compose&tp=zb&ct="+a,80,77)};WMSUI.populateoptions=function(){var e=WMSUI.currentId;var c="";if(!WmsContacts.isMPUser(e)){c="<p class='wms-rigp' onmouseover='this.className=\"wms-rigpsel\"' onmouseout='this.className=\"wms-rigp\"' onclick='WMSUI.showrenamecntct();' title='"+WmsResource.getRealValue("Rename")+"' >"+WmsResource.getRealValue("Rename")+"</p><p class='wms-rigp' onmouseover='this.className=\"wms-rigpsel\"' onmouseout='this.className=\"wms-rigp\"' onclick='WMSUI.deletecntct();' title='"+WmsResource.getRealValue("Delete")+"' >"+WmsResource.getRealValue("Delete")+"</p>"}if(WmsContacts.status(e)!==false&&WmsContacts.status(e)>-1){var b="";if(WebMessanger.meeting){b=WmsResource.getRealValue("Share_Desktop");c+="<p class='wms-rigp' title='"+b+"' onmouseover='this.className=\"wms-rigpsel\"' onmouseout='this.className=\"wms-rigp\"' onclick='WMSUI.startMeeting();'>"+b+"</p>"}try{if(WMSTP.isVideoEnabled()&&e.indexOf("|")==-1){b=WmsResource.getRealValue("Video_chat");c+="<p class='wms-rigp' title='"+b+"' onmouseover='this.className=\"wms-rigpsel\"' onmouseout='this.className=\"wms-rigp\"' onclick='WMSUI.startVideoChat();'>"+b+"</p>"}if(WMSTP.isAudioEnabled()&&e.indexOf("|")==-1){b=WmsResource.getRealValue("Voice_chat");c+="<p class='wms-rigp' title='"+b+"' onmouseover='this.className=\"wms-rigpsel\"' onmouseout='this.className=\"wms-rigp\"' onclick='WMSUI.startAudioChat();'>"+b+"</p>"}}catch(a){}}return c};WMSUI.getNickName=function(){return(WebMessanger.getNickName().trim()!="")?WebMessanger.getNickName():WebMessanger.uname};WMSUI.populateudtls=function(){var c="";var a="";if(WmsSettings.soc==1){c="checked=true"}if(WmsSettings.sound==1){a="checked=true"}if(WebMessanger.scode==undefined){WebMessanger.getStatusMessage()}try{var b='<p class="wms-th" onclick="WMSUI.hideudtls();" style="cursor:pointer" title="'+WmsResource.getRealValue("Click_to_minimize")+"\" onmouseover=\"document.getElementById('set-min').style.visibility='visible'\" onmouseout=\"document.getElementById('set-min').style.visibility='hidden'\"><img src=\"/"+_WMSCONT+'/images/spacer.gif" id="set-min" class="wms-min1" onclick="WMSUI.hideusrs();" title="'+WmsResource.getRealValue("Minimize")+'" style="visibility:hidden;"/><span class="wms-oh">'+WmsResource.getRealValue("Settings")+'</span></p><dl class="wms-uddl"><div class="wmsbar-prflmn"><div class="wmsbar-prflsubmn wmsbar-SCODE"><img style="margin-bottom:2px;" src="'+_WMSPHOTOSERVER+'/file?height=50&width=50" title="'+WMSUI.getNickName()+'" height="30" width="30"/></div><div class="wmsbar-username"><span id="wmsdname" class="wms-ot wms-bt">'+trimLength(WMSUI.getNickName(),13)+'</span></div></div><div class="wmsbar-chckbxmn"><p class="wmsbar-setngtxtbdr"></p><div class="wmsbar-chckbxmndiv"><p class="wmsbar-setngchckbxsub"><span id="wmspsoc"><input id="wmssoc"class="wmsbar-chckbox" type="checkbox" onclick="WMSUI.checkSettings(this,\'wmspsoc\')" CHKSOC /></span><span class="wmsbar-chckbxtxt">'+WmsResource.getRealValue("Show_contacts_names_only")+'</span></p><p class="wmsbar-setngchckbxsub"><span id="wmssound"><input id="wmspsound" class="wmsbar-chckbox" type="checkbox" onclick="WMSUI.toggleSound()" CHKSOUND/></span><span id="sndtxt" class="wmsbar-chckbxtxt">'+WmsResource.getRealValue("Play_Sounds")+"</span></p></div></div></dl>";b=b.replace(/SCODE/g,WebMessanger.scode);b=b.replace(/CHKSOC/g,c);b=b.replace(/CHKSOUND/g,a);WMSUI.userdtlsdiv.innerHTML=b;if(!WmsSound.IS_FLASH_EXIST){document.getElementById("wmspsound").setAttribute("style","display:none");document.getElementById("sndtxt").setAttribute("style","display:none")}}catch(f){}};WMSUI.checkSettings=function(c,b){var f=c.id;f=f.replace(/wms/g,"");var e=0;var a=WindowHandler.getObjectInObject(WMSUI.userdtlsdiv,b,"SPAN");a.innerHTML='<span style="float:left;margin-top:1px;*margin-top:5px;*width:17px;*height:13px;*margin-left:3px"><img src="https://img.zohostatic.com/ichat/v42_https/images/anim2.gif"></span>';if(c.checked){e=1}if(f=="scp"&&WmsSettings.soc==1){WmsSettings.updateWmsSettings("bchatsettings","soc",0)}else{if(f=="soc"&&WmsSettings.scp==1){WmsSettings.updateWmsSettings("bchatsettings","scp",0)}}WmsSettings.updateWmsSettings("bchatsettings",f,e)};WMSUI.updateWmsSettings=function(){WMSUI.populateudtls()};WMSUI.regenerateStatus=function(){WebMessanger.getAllStatusMessage()};WMSUI.showUserStatus=function(b){try{if(b.scode==2){b.scode=0}if((b.scode==0&&WmsContacts.status(b.zuid)>0)||(b.scode>0&&WmsContacts.status(b.zuid)==0)){var a=WmsResource.getRealValue(WebMessanger.statusarr[b.scode]);var c='<img class="wmsus-'+b.scode+'" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" title="'+a+'"/><span style="float:left;white-space:nowrap;width:200px; overflow:hidden;"> '+b.dname+" ("+MyDate.formatTime(new Date().getTime())+") </span>";var f="WebMessanger.chat('"+b.zuid+"')";WMSUI.setServiceStatus(c,f)}}catch(g){}};WMSUI.clearCustomStatus=function(){WebMessanger.clearCustomStatus();WebMessanger.scode="1";WebMessanger.smsg="Available";WMSUI.updateUserInfo();WMSUI.populateudtls()};WMSUI.updateStatus=function(a,b){WebMessanger.scode=a;WebMessanger.smsg=b;setTimeout("WMSUI.regenerateStatus();",500);WMSUI.populateudtls()};WMSUI.initI18NUserStatus=function(){WMSUI.i18Nuserstatus=new Object();WMSUI.i18Nuserstatus.Available=WMSUI.i18N("Available","Available");WMSUI.i18Nuserstatus.Invisible=WMSUI.i18N("Invisible","Invisible");WMSUI.i18Nuserstatus.Busy=WMSUI.i18N("Busy","Busy");WMSUI.i18Nuserstatus.Idle=WMSUI.i18N("Idle","Idle")};WMSUI.geti18NUserStatus=function(b,c){var a=new Object();c=c.trim();if(WMSUI.i18Nuserstatus==null){WMSUI.initI18NUserStatus()}if(c==WMSUI.i18Nuserstatus.Available||c.length==0){c="Available";b=1}else{if(c==WMSUI.i18Nuserstatus.Busy){c="Busy";b=3}else{if(c==WMSUI.i18Nuserstatus.Idle){c="Idle";b=4}else{if(c==WMSUI.i18Nuserstatus.Invisible){c="Invisible";b=2}}}}a.scode=b;a.smsg=c;return a};WMSUI.setStatus=function(b,c,f){try{var a=WMSUI.geti18NUserStatus(b,c);c=a.smsg;if(f){c=unescape(c);c=WebMessanger.unescapeHTML(c)}if(WebMessanger.smsg!=c||WebMessanger.scode!=b){WebMessanger.scode=b;WebMessanger.smsg=c;c=WebMessanger.encode(c);WebMessanger.setStatus(b,c);WMSUI.updateUserInfo()}}catch(g){}return false};WMSUI.hideEditStatus=function(){try{var a=WindowHandler.getObjectInObject(WMSUI.userdtlsdiv,"wmsstatus","DD");a.style.display="block"}catch(b){}};WMSUI.toggleaddcnt=function(){var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-addmem","DIV");if(a.style.display=="none"){WMSUI.showaddContacts()}else{WMSUI.hideaddContacts()}};WMSUI.blurChat=function(a){try{Self.status.idle(a);var c=WindowHandler.getWinObjById(a);c.blurChat()}catch(b){}};WMSUI.searchContacts=function(c,a){try{if(c==undefined){return}key=(window.event)?a.keyCode:a.which;if(key>=37&&key<=40){return}c=c.trim();WMSUI.checkConDettimer();WMSUI.hideContactinfo();if(WMSUI.searchpresent=="contacts"){if((c.length!=0||WMSUI.searchval.length!=0)&&WMSUI.searchval!=c){WMSUI.searchval=c;if(WMSUI.searchval!=WmsResource.getRealValue("Search_Contacts")){WMSUI.selectedId=-1;try{clearTimeout(WMSUI.searchtimer)}catch(a){}WMSUI.searchtimer=setTimeout("WMSUI.populateusrs()",300)}}}else{if(WMSUI.searchpresent=="group"){if((c.length!=0||WMSUI.grpsearchval.length!=0)&&WMSUI.grpsearchval!=c){WMSUI.grpsearchval=c;if(WMSUI.grpsearchval!=WmsResource.getRealValue("Search_Groups")){WMSUI.selectedId=-1;try{clearTimeout(WMSUI.searchtimer)}catch(a){}WMSUI.searchtimer=setTimeout("WMSUI.populategrps()",300)}}}}}catch(b){}};WMSUI.clearSearch=function(a){if(WMSUI.searchpresent=="contacts"&&a.value==WmsResource.getRealValue("Search_Contacts")){a.value=""}else{if(WMSUI.searchpresent=="group"&&a.value==WmsResource.getRealValue("Search_Groups")){a.value=""}}};WMSUI.SetSearchTxt=function(b){if(!(b.value!="")){var a="";if(WMSUI.searchpresent=="group"){a=WmsResource.getRealValue("Search_Groups")}else{if(WMSUI.searchpresent=="contacts"){a=WmsResource.getRealValue("Search_Contacts")}}b.value=a}};WMSUI.handleKeyDown=function(b){var a=(window.event)?b.keyCode:b.which;if(a==27){if(WMSUI.contactinfodiv.style.display=="block"){WMSUI.checkConDettimer();WMSUI.hideContactinfo();return false}if(WMSUI.searchval!=""&&WMSUI.searchval!=WmsResource.getRealValue("Search_Contacts")&&WMSUI.searchpresent=="contacts"){WMSUI.searchval="";WMSUI.showsearch(true);WMSUI.populateusrs()}else{if(WMSUI.grpsearchval!=""&&WMSUI.grpsearchval!=WmsResource.getRealValue("Search_Groups")&&WMSUI.searchpresent=="group"){WMSUI.grpsearchval="";WMSUI.showsearch(true);WMSUI.populategrps()}else{if(WMSUI.searchpresent=="group"){WMSUI.hidegrps()}else{if(WMSUI.searchpresent=="contacts"){WMSUI.hideusrs()}}}}if(ie){b.cancelBubble=true;b.returnValue=false}else{b.preventDefault();b.stopPropagation()}}else{if(a==38){WMSUI.moveUp()}else{if(a==40){WMSUI.moveDown()}else{if(a==13){WMSUI.enter(b)}}}}};WMSUI.moveDown=function(){try{if(WMSUI.searchpresent=="contacts"){var a=WMSUI.contactscont.getElementsByTagName("DL");try{a[WMSUI.selectedId].className="wms-oudl"}catch(f){}if(WMSUI.selectedId<WMSUI.contcount-1){WMSUI.selectedId++}else{WMSUI.selectedId=-1;WMSUI.contactscont.scrollTop=0;WMSUI.hideOptionImg();clearTimeout(WMSUI.contactdetailtimer);WMSUI.hideContactinfo()}a[WMSUI.selectedId].className="wms-oudl-selected";if(a[WMSUI.selectedId].offsetTop>(WMSUI.contactscont.offsetHeight-a[WMSUI.selectedId].offsetHeight)){WMSUI.contactscont.scrollTop=WMSUI.contactscont.scrollTop+a[WMSUI.selectedId].offsetHeight}var g=a[WMSUI.selectedId].id;var c=g.replace(/wmsc/g,"");WMSUI.checkContactsDetails(c,g)}else{if(WMSUI.searchpresent=="group"){var a=WMSUI.groupscont.getElementsByTagName("DL");try{a[WMSUI.selectedId].className="wms-oudl"}catch(f){}if(WMSUI.selectedId<WMSUI.grpcount-1){WMSUI.selectedId++}else{WMSUI.selectedId=-1;WMSUI.groupscont.scrollTop=0}a[WMSUI.selectedId].className="wms-oudl-selected";if(a[WMSUI.selectedId].offsetTop>(WMSUI.groupscont.offsetHeight+50-a[WMSUI.selectedId].offsetHeight)){WMSUI.groupscont.scrollTop=WMSUI.groupscont.scrollTop+a[WMSUI.selectedId].offsetHeight}}}}catch(b){}};WMSUI.moveUp=function(){try{if(WMSUI.searchpresent=="contacts"){if(WMSUI.selectedId<=0){return}var a=WMSUI.contactscont.getElementsByTagName("DL");try{a[WMSUI.selectedId].className="wms-oudl"}catch(c){}if(WMSUI.selectedId>0){WMSUI.selectedId--}a[WMSUI.selectedId].className="wms-oudl-selected";if(WMSUI.selectedId<2){WMSUI.contactscont.scrollTop=0}else{if(a[WMSUI.selectedId].offsetTop<(WMSUI.contactscont.scrollTop)){WMSUI.contactscont.scrollTop=WMSUI.contactscont.scrollTop-a[WMSUI.selectedId].offsetHeight}}var f=a[WMSUI.selectedId].id;var b=f.replace(/wmsc/g,"");WMSUI.checkContactsDetails(b,f)}else{if(WMSUI.searchpresent=="group"){var a=WMSUI.groupscont.getElementsByTagName("DL");try{a[WMSUI.selectedId].className="wms-oudl"}catch(c){}if(WMSUI.selectedId>0){WMSUI.selectedId--}a[WMSUI.selectedId].className="wms-oudl-selected";if(a[WMSUI.selectedId].offsetTop-50<WMSUI.groupscont.scrollTop){WMSUI.groupscont.scrollTop=WMSUI.groupscont.scrollTop-a[WMSUI.selectedId].offsetHeight}}}}catch(c){}};WMSUI.selectContact=function(a){WMSUI.selectedId=a;if(WMSUI.searchpresent=="contacts"){try{var c=WMSUI.contactscont.getElementsByTagName("DL")[a];c.className="wms-oudl-selected"}catch(b){}}else{if(WMSUI.searchpresent=="group"){try{WMSUI.groupscont.getElementsByTagName("DL")[a].className="wms-oudl-selected"}catch(b){}}}};WMSUI.enter=function(a){if(WMSUI.searchpresent=="contacts"){try{var b=WMSUI.contactscont.getElementsByTagName("DL")[WMSUI.selectedId].id}catch(a){return}b=b.replace("wmsc","");if(WmsContacts.status(b)!==false&&WmsContacts.status(b)>-1){WMSUI.chat(b,a);WMSUI.hideinfodiv(a)}}if(WMSUI.searchpresent=="group"){try{var b=WMSUI.groupscont.getElementsByTagName("DL")[WMSUI.selectedId].id}catch(a){return}b=b.replace("wmsg","");WMSUI.gchat(b,a);WMSUI.groupscont.scrollTop=0}};WMSUI.selectClass=function(b){if(b.className=="wms-oudl"){b.className="wms-oudl-selected"}try{WMSUI.contactscont.getElementsByTagName("DL")[WMSUI.selectedId].className="wms-oudl"}catch(a){}WMSUI.selectedId=-1};WMSUI.changeClass=function(a){if(a.className=="wms-oudl-selected"){a.className="wms-oudl"}};WMSUI.showsearch=function(a){WMSUI.objshown="search";if(WMSUI.searchpresent=="group"){WMSUI.groupssd.innerHTML='<input onkeyup="WMSUI.searchContacts(this.value,event);" onkeydown="return WMSUI.handleKeyDown(event);" type="text" id="wms-glist" name="clist" class="wmstxt" style="width:180px;color:#999;" value="'+((WMSUI.grpsearchval=="")?WmsResource.getRealValue("Search_Groups"):WMSUI.grpsearchval)+'" onclick="WMSUI.clearSearch(this)" onblur="WMSUI.SetSearchTxt(this)"/>';WMSUI.groupssd.style.display="block";WMSUI.searchcntheight=WMSUI.groupssd.offsetHeight;var b=(ie&&WMSUI.searchcntheight>0)?(WMSUI.searchcntheight+5):WMSUI.searchcntheight;WMSUI.groupscont.style.height=(WMSUI.grpheight-b)+"px";WMSUI.groupscont.scrollTop=0}else{if(WMSUI.searchpresent=="contacts"){var c=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsconcont","DIV");var e=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-addcntct","DIV");e.innerHTML='<input onkeyup="WMSUI.searchContacts(this.value,event);" onkeydown="return WMSUI.handleKeyDown(event);" type="text" id="wms-clist" name="clist" class="wmstxt" style="width:180px;color:#999;" value="'+((WMSUI.searchval=="")?WmsResource.getRealValue("Search_Contacts"):WMSUI.searchval)+'" onclick="WMSUI.clearSearch(this)" onblur="WMSUI.SetSearchTxt(this)"/>';e.style.display="block";WMSUI.searchcntheight=e.offsetHeight;var b=(ie&&WMSUI.searchcntheight>0)?(WMSUI.searchcntheight+18):WMSUI.searchcntheight;c.style.height=(WMSUI.cntheight-b)+"px";c.scrollTop=0}}if(a){WMSUI.focusSearch()}};WMSUI.focusSearch=function(){if(WMSUI.searchpresent=="group"){var a=WindowHandler.getObjectInObject(WMSUI.groupdiv,"wms-glist","INPUT")}else{var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-clist","INPUT")}setTimeout(function(){try{a.focus();a.select()}catch(b){}},100)};WMSUI.showaddContacts=function(){WebMessanger.getZohoContacts();var e=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-addmem","DIV");var b=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsinvite","IMG").offsetLeft-20+"px";var c='<div id="wmsaddmemdiv" class="wms-addpopmn" style=ADDLEFT><img id="wmsaddmemimg" class="wms-addpop-tparw" alt="" title="" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><div id="wmsaddpoptpmn" class="wms-addpoptp-mn"><span></span><em></em></div><div id="wms-addpoplft-prt" class="wms-addpoplft-prt"><div id="wmsaddpoprhtprt" class="wms-addpoprht-prt"><div id="wmsmidaddmem" style="margin:0px 0px 0 0;"><input id="wmsaddmemin" class="wms-addtxt-box" type="text" onkeyup="WMSUI.handleAddContacts(event,this)" value="'+WmsResource.getRealValue("Zoho_emailid_username")+'" onclick="WMSUI.clearAddContacts(this)" onblur="WMSUI.checkAndFillInput(this)"/><div class="wms-atosrcmn" id="wms-cnctautocomplete"></div><div id="wmsaddinfotxtmn" class="wms-addinfo-txtmn"><em><a href="javascript:;" id="wmsaddmemaddlink" onclick="WMSUI.addContacts()"></a> <i id="linkseparate" style="display:none;font-style:normal;color:#cacaca">|</i> <a id="wmsaddmemcloselink" href="javascript:;" style="text-decoration:none;margin:5px" onclick="WMSUI.hideaddContacts()">'+WmsResource.getRealValue("Close")+'</a></em><span id="wms-addcontspan"></span></div></div></div></div><div id="wms-addpopbotmn" class="wms-addpopbot-mn"><em></em><span></span></div></div>';c=c.replace(/ADDLEFT/g,"left:"+b);e.innerHTML=c;e.style.display="block";var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddmemin","INPUT");a.focus();a.select();WMSUI.addIndocClickcallbackQue("wms-addmem",e,function(f){if(f!="wmsaddmemdiv"&&f!="wmsaddmemimg"&&f!="wmsaddpoptpmn"&&f!="wms-addpoplft-prt"&&f!="wmsaddpoprhtprt"&&f!="wmsmidaddmem"&&f!="wmsaddmemin"&&f!="wmsaddinfotxtmn"&&f!="wms-addcontspan"&&f!="wms-addpopbotmn"&&f!="wmsaddmemaddlink"&&f!="wmsaddmemcloselink"&&f!="wmsinviteac"&&f!="wmsinviteaclink"){WMSUI.hideaddContacts()}},window.event)};WMSUI.handleGetZohoContacts=function(b){try{WMSUI.addmemcntlist=new Array();for(d in b){WMSUI.addmemcntlist.push(b[d])}}catch(a){}};WMSUI.checkAndFillInput=function(a){if(a.value.trim()==""){a.value=WmsResource.getRealValue("Zoho_emailid_username");a.select();WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddmemaddlink","a").innerHTML="";WindowHandler.getObjectInObject(WMSUI.usersdiv,"linkseparate","i").style.display="none"}};WMSUI.handleAddContacts=function(e,obj){if(!e){e=window.event}var key=(window.event)?e.keyCode:e.which;var list="";var autocompobj=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-cnctautocomplete","DIV");if(key==27){WMSUI.hideaddContacts()}else{if(key==13){try{if(autocompobj.style.display=="inline-block"&&WMSUI.selectinvitememberid!=-1){var taglist=autocompobj.getElementsByTagName("DIV");var emailid=taglist[WMSUI.selectinvitememberid].getElementsByTagName("SPAN")[0].id;WMSUI.toggleInviteCntac(false);WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddmemin","INPUT").value=emailid}else{WMSUI.addContacts()}}catch(e){}}else{if(key==40){try{var taglist=autocompobj.getElementsByTagName("DIV")}catch(e2){}try{taglist[WMSUI.selectinvitememberid].className="wms-atosrc-sub"}catch(e1){WMSUI.selectinvitememberid=-1}try{if(WMSUI.selectinvitememberid<taglist.length-1){WMSUI.selectinvitememberid++}else{WMSUI.selectinvitememberid=-1}}catch(e){}try{taglist[WMSUI.selectinvitememberid].className="wms-atosrc-sub-hover"}catch(e1){}}else{if(key==38){try{var taglist=autocompobj.getElementsByTagName("DIV")}catch(e1){}try{taglist[WMSUI.selectinvitememberid].className="wms-atosrc-sub"}catch(e2){WMSUI.selectinvitememberid=taglist.length}try{if(WMSUI.selectinvitememberid>=0){WMSUI.selectinvitememberid--}else{WMSUI.selectinvitememberid=taglist.length}}catch(e3){}try{taglist[WMSUI.selectinvitememberid].className="wms-atosrc-sub-hover"}catch(e4){}}else{var searchval=obj.value.trim();var searchdata="";var addinfotxt=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddinfotxtmn","DIV");var acobj=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-cnctautocomplete","DIV");var contentsize=0;if(searchval!=null&&searchval!=""){try{searchdata=eval("/"+searchval+"/i")}catch(e){}WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddmemaddlink","a").innerHTML=WmsResource.getRealValue("Invite");WindowHandler.getObjectInObject(WMSUI.usersdiv,"linkseparate","i").style.display="inline-block";try{for(i=0;i<WMSUI.addmemcntlist.length;i++){if(contentsize>8){break}var emailid=WMSUI.addmemcntlist[i];var dispname="";if(emailid.search(searchdata)==-1){continue}if(emailid!=undefined){dispname=""+emailid.replace(searchdata,"<b>"+emailid.match(searchdata)+"</b>")}if(dispname!=""){list=list+WMSUI.getInviteMemberHtml(dispname,emailid);contentsize++}}if(list!=""){acobj.innerHTML=list;WMSUI.toggleInviteCntac(true)}WMSUI.selectinvitememberid=-1}catch(e){}}else{WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddmemaddlink","a").innerHTML="";WindowHandler.getObjectInObject(WMSUI.usersdiv,"linkseparate","i").style.display="none"}if(list==""){WMSUI.toggleInviteCntac(false)}}}}}WMSUI.showStatusinContacts("")};WMSUI.toggleInviteCntac=function(b){var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddinfotxtmn","DIV");var c=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-cnctautocomplete","DIV");if(b){a.style.display="none";c.style.display="inline-block"}else{c.style.display="none";a.style.display="inline-block"}};WMSUI.getInviteMemberHtml=function(c,a){var b='<div class="wms-atosrc-sub" onmouseover="this.className=\'wms-atosrc-sub-hover\';" onmouseout="this.className=\'wms-atosrc-sub\';" id="wmsinviteac"><a id="wmsinviteaclink" href="javascript:;" onclick="WMSUI.addContacts(\''+a+"')\">"+WmsResource.getRealValue("Invite")+'</a><span id="EMAILID">'+c+"</span></div>";b=b.replace(/EMAILID/g,a);return b};WMSUI.clearAddContacts=function(a){if(a.value==WmsResource.getRealValue("Zoho_emailid_username")){a.value=""}};WMSUI.showStatusinContacts=function(a){var b=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-addcontspan","SPAN");b.innerHTML=a};WMSUI.showInviteStatus=function(c){var a="";var b=0;var e="";for(d in c){if(b>0){a+=","}a+=d;b++;e=c[d]}if(e=="Same user"){WMSUI.showStatusinContacts(a+" "+WmsResource.getRealValue("is_your_email_id"))}else{if(a!=""){WMSUI.showStatusinContacts(a+" "+WmsResource.getRealValue("found_to_be_Invalid_Zoho_Ids_Please_try_by_adding_their_email_id"))}else{WMSUI.showStatusinContacts(WMSUI.newaddmember+" "+WmsResource.getRealValue("sucessfully_added"))}}};WMSUI.addContacts=function(a){var b=a;var c=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsaddmemin","INPUT");if(a==undefined){b=c.value}if(b==WmsResource.getRealValue("Zoho_emailid_username")||b.trim()==""){WMSUI.showStatusinContacts(WmsResource.getRealValue("Please_enter_a_mailId_username"));return}WMSUI.newaddmember=b;c.value="";WMSUI.checkAndFillInput(c);WMSUI.toggleInviteCntac(false);WmsContacts.add("zoho",b,WebMessanger.uname)};WMSUI.hideaddContacts=function(){var b=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-addmem","DIV");b.style.display="none";try{WMSUI.addmemcntlist.length=0}catch(a){}};WMSUI.getEventSrc=function(a){if(!a){var a=window.event}if(a.target){targ=a.target}else{if(a.srcElement){targ=a.srcElement}}if(targ.nodeType==3){targ=targ.parentNode}return targ};WMSUI.gchat=function(c,b){if(WMSUI.objshown!=""){if(WMSUI.objshown=="search"){WMSUI.grpsearchval="";var a=WindowHandler.getObjectInObject(WMSUI.groupdiv,"wmsgrpsd","DIV");a.innerHTML='<input onkeydown="return WMSUI.handleKeyDown(event);" onkeyup="WMSUI.searchContacts(this.value,event);" type="text" id="wms-glist" name="clist" class="wmstxt" style="width:180px;color:#999;" value="'+WmsResource.getRealValue("Search_Groups")+'" onclick="WMSUI.clearSearch(this)" onblur="WMSUI.SetSearchTxt(this)"/>'}WMSUI.populategrps()}WebMessanger.gchat(c)};WMSUI.chat=function(f,c){var a=WMSUI.getEventSrc(c);WMSUI.checkConDettimer();WMSUI.hideContactinfo();WMSUI.setClickedId(f);if(a.id=="wmscntopt"+f||a.id=="wmsdedit"||a.tagName=="A"||a.tagName=="P"||a.className=="contactbot_title"||a.className=="contactinfo_lft"||a.className=="wms-contactinfo-mail"||a.className=="wms-video-hover"||a.className=="wms-contactinfo-file"||a.className=="wms-voice-hover"){return}if(WMSUI.objshown!=""){if(WMSUI.objshown=="search"){WMSUI.searchval="";var b=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-addcntct","DIV");b.innerHTML='<input onkeydown="return WMSUI.handleKeyDown(event);" onkeyup="WMSUI.searchContacts(this.value,event);" type="text" id="wms-clist" name="clist" class="wmstxt" style="width:180px;color:#999;" value="'+WmsResource.getRealValue("Search_Contacts")+'" onclick="WMSUI.clearSearch(this)" onblur="WMSUI.SetSearchTxt(this)"/>';WMSUI.searchcntheight=b.offsetHeight}WMSUI.populateusrs()}if(WmsContacts.status(f)<=4&&WmsContacts.status(f)>-1){WebMessanger.chat(f)}WMSUI.showOptionImg(f)};WMSUI.newChat=function(c){try{WMSUI.hideContactinfo()}catch(b){}if(WMSUI.objshown!=""){if(WMSUI.objshown=="search"){WMSUI.searchval="";var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-addcntct","DIV");a.innerHTML='<input onkeydown="return WMSUI.handleKeyDown(event);" onkeyup="WMSUI.searchContacts(this.value,event);" type="text" id="wms-clist" name="clist" class="wmstxt" style="width:180px;color:#999;" value="'+WmsResource.getRealValue("Search_Contacts")+'" onclick="WMSUI.clearSearch(this)" onblur="WMSUI.SetSearchTxt(this)"/>';WMSUI.searchcntheight=a.offsetHeight}WMSUI.populateusrs()}if(0>=WmsContacts.status(c)<=4){WebMessanger.newChat(c)}};WMSUI.setDisplayName=function(){try{var c=WMSUI.getNickName();var a=WindowHandler.getObjectInObject(WMSUI.userdtlsdiv,"wmsdname","SPAN");a.innerHTML=trimLength(c,13);WMSUI.updateUserInfo()}catch(b){}};WMSUI.initGroupsUI=function(){if(WMSUI.groupdiv==undefined){WMSUI.groupdiv=document.createElement("DIV");WMSUI.groupdiv.className="wms-ucd";WMSUI.groupdiv.style.display="none";WMSUI.groupdiv.innerHTML='<p class="wms-th" onclick="WMSUI.hidegrps();" style="cursor:pointer" title="'+WmsResource.getRealValue("Click_to_minimize")+"\"onmouseover=\"document.getElementById('grp-min').style.visibility='visible'\" onmouseout=\"document.getElementById('grp-min').style.visibility='hidden'\"><img src=\"/"+_WMSCONT+'/images/spacer.gif" id="grp-min" class="wms-min1" onclick="WMSUI.hideusrs();" title="'+WmsResource.getRealValue("Minimize")+'" style="visibility:hidden;"/><span class="wms-oh">'+WMSUI.i18N("Groups","Groups")+'</span></p><div id="wmsgrpsd" class="wmssearch"><input id="wms-glist" onkeydown="return WMSUI.handleKeyDown(event);" onkeyup="WMSUI.searchContacts(this.value,event);" onclick="WMSUI.clearSearch(this)" onblur="WMSUI.SetSearchTxt(this)" type="text" class="wmstxt" style="width:180px;color:#999;" value="'+WmsResource.getRealValue("Search_Groups")+'"/></div><div id="wmsgrpcont" class="wmsgrpcont"></div>';WMSUI.toolbar.appendChild(WMSUI.groupdiv);WMSUI.objshown="search";WMSUI.groupscont=WindowHandler.getObjectInObject(WMSUI.groupdiv,"wmsgrpcont","DIV");WMSUI.groupssd=WindowHandler.getObjectInObject(WMSUI.groupdiv,"wmsgrpsd","DIV")}};WMSUI.initContactsUI=function(){if(WMSUI.usersdiv==undefined||WMSUI.contactscont==undefined){WMSUI.usersdiv=document.createElement("DIV");if(!WMSUI.contactsenabled){return}WMSUI.usersdiv.className="wms-ucd";WMSUI.usersdiv.style.display="none";WMSUI.toolbar.appendChild(WMSUI.usersdiv);WMSUI.usersdiv.innerHTML='<p class="wms-th1"><img class="wms-ac" id="wmsinvite" onclick="return WMSUI.toggleaddcnt();" title="'+WmsResource.getRealValue("Invite")+'" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-min2" onclick="WMSUI.hideusrs();" title="'+WmsResource.getRealValue("Minimize")+'" "/><span class="wms-oh" id="wmsdname" onclick="WMSUI.hideusrs();" style="cursor:pointer" title="'+WmsResource.getRealValue("Click_to_minimize")+'"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsus-1"/><span class="wms-thuname">&nbsp;</span></span><div id="wms-userstatus" class="wmsuserstatus" ><div class="statusdiv" id="ustatustxt" ><input type="text" value=""  onclick="WMSUI.editUserStatus();" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="arrowdrop"  id="ustatusimg"  onclick="WMSUI.toggleustatus(event);" /></div></div></p><div class="wmspd1" style="display:none;overflow-x:hidden;" id="uslsdiv">&nbsp;</div><div class="wmssd"><div id="wms-addcntct" class="wmssearch"><input onkeydown="return WMSUI.handleKeyDown(event);" onkeyup="WMSUI.searchContacts(this.value,event);" onclick="WMSUI.clearSearch(this)" onblur="WMSUI.SetSearchTxt(this)" type="text" id="wms-clist" name="clist" class="wmstxt" style="width:180px;color:#999;" value="'+WmsResource.getRealValue("Search_Contacts")+'"/></div><div id="wms-addmem" class="wmsaddmem" style="display:none"></div><div id="wmsoptionsdiv" class="wms-rigb" style="display:none;" onmouseover="WMSUI.clearOptionTimer()" onmouseout="WMSUI.hideOption()"></div><div id="wmsconcont" class="wmsconcont" onscroll="WMSUI.contactScrolled(event);WMSUI.hideContactinfo()" onmouseout="WMSUI.setClickedId(-1);"></div><div id="wmscontactinfo" class="wms-contactinfodiv" style="position:absolute;display:none;"></div>';WMSUI.objshown="search";onmouseover="this.className='wms-oudl-selected';";WMSUI.contactinfodiv=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmscontactinfo","DIV");WMSUI.contactscont=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsconcont","DIV");WMSUI.optionsdiv=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsoptionsdiv","DIV");if(!WMSUI.showusers){WMSUI.usersdiv.style.display="none"}else{WMSUI.usersdiv.className="wms-ucd";WMSUI.usersbar.className="wms-od-selected"}WMSUI.updateUserInfo()}};WMSUI.displayStatus=function(c){var a="";if(WebMessanger.smsg!=undefined){if(WMSUI.i18Nuserstatus==null||WMSUI.i18Nuserstatus==undefined){WMSUI.initI18NUserStatus()}if(WMSUI.i18Nuserstatus[WebMessanger.smsg]!=undefined){a=WMSUI.i18Nuserstatus[WebMessanger.smsg]}else{a=WebMessanger.smsg}var b=WindowHandler.getObjectInObject(c,"wmsustxt","INPUT");b.value=a}};WMSUI.updateUserStatus=function(){try{var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-userstatus","DIV");a.innerHTML="&nbsp;";a.innerHTML='<div class="statusdiv" id="ustatustxt" onmouseout="WMSUI.setUserStatusBorder(false,false);" onmouseover="WMSUI.setUserStatusBorder(true,false);"  ><input type="text"  name="wmsustxt" id="wmsustxt" value=""  onclick="WMSUI.editUserStatus();" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="arrowdrop" id="ustatusimg" onclick="WMSUI.toggleustatus(event);" /></div>';WMSUI.displayStatus(a)}catch(b){}};WMSUI.setUserStatusBorder=function(c,b){try{c=(WMSUI.isUserStatusDiv)?true:c;var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"ustatustxt","DIV");var g=WindowHandler.getObjectInObject(WMSUI.usersdiv,"ustatusimg","IMG");if(b){a.className=(c)?"statusdivclick":"statusdiv";g.className=(c)?"arrowdropclick":"arrowdrop"}else{a.className=(c)?"statusdivhover":"statusdiv";g.className=(c)?"arrowdrophover":"arrowdrop"}}catch(f){}};WMSUI.editUserStatus=function(){var c='<textarea class="wmsststxt" onblur="WMSUI.updateUserStatus();" onkeyup="WMSUI.handleStatusChange(this.value,event)" id="wmsustxtarea">WMSUSERSTATUS</textarea>';c+='<div class="statusdiv" id="ustatustxt" ><input type="text" value=""  onclick="WMSUI.editUserStatus();" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="arrowdrop"  id="ustatusimg"  onclick="WMSUI.toggleustatus(event);" /></div>';var b=WebMessanger.smsg;if(b=="Available"||b=="Offline"||b=="Idle"||b=="Busy"||b=="Invisible"){b=WmsResource.getRealValue(b)}c=c.replace(/WMSUSERSTATUS/g,b);var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wms-userstatus","DIV");a.innerHTML="&nbsp;";a.innerHTML=c;WMSUI.setFocusUserStaus()};WMSUI.handleStatusChange=function(b,c){if(!c){c=window.event}var a=(window.event)?c.keyCode:c.which;if(a==13){if(mz){c.preventDefault()}if(ie){c.cancelBubble=true;c.returnValue=false}var f=b.trim();if(WebMessanger.smsg!=f){WMSUI.setStatus(WebMessanger.scode,f,false)}else{WMSUI.updateUserStatus()}}else{if(a==27){if(mz){c.preventDefault()}if(ie){c.cancelBubble=true;c.returnValue=false}WMSUI.updateUserStatus()}}};WMSUI.isDIVEnabled=function(h){if(WMSUI.isUserStatusDiv){var g="";var f=getEventTarget(h);try{g=f.parentNode.id}catch(c){}var b="";try{b=f.offsetParent.id}catch(a){}if(g=="ustatustxt"||b=="ustatustxt"){return}else{}}else{if(WMSUI.userdtlsdiv.style.display=="block"){var g="";var f=getEventTarget(h);try{g=f.parentNode.id}catch(c){}var b="";try{b=f.offsetParent.id}catch(a){}if(g=="wmsstatusdiv"||b=="wmsstatusdiv"||g=="wmschstalink"||b=="wmschstalink"){return}else{WMSUI.hideEditStatus()}}}};WMSUI.hideUserStatusDD=function(){try{var b=WindowHandler.getObjectInObject(WMSUI.usersdiv,"uslsdiv","DIV");b.style.display="none";WMSUI.isUserStatusDiv=false}catch(a){}};WMSUI.toggleustatus=function(b){try{var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"uslsdiv","DIV");if(a.innerHTML==""||a.innerHTML=="&nbsp;"){WebMessanger.getAllStatusMessage()}if(a.style.display=="block"){a.style.display="none";WMSUI.isUserStatusDiv=false}else{a.style.display="block";WMSUI.isUserStatusDiv=true;WMSUI.addIndocClickcallbackQue("uslsdiv",a,function(e){if(e!="ustatusimg"){a.style.display="none";WMSUI.isUserStatusDiv=false}},b)}if(WMSUI.isUserStatusDiv&&ie){if(a.offsetHeight>200){a.style.height="201px";a.style.overflow="auto"}else{a.style.height="auto";a.style.overflow="hidden"}}}catch(c){}};WMSUI.setFocusUserStaus=function(){try{var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsustxtarea","TEXTAREA");a.focus();a.select()}catch(b){}};WMSUI.updateUserInfo=function(){if(WebMessanger.scode==2){if(WMSUI.profileenabled){(WMSUI.userdtlsbar.className=="wms-ud-selected"||WMSUI.userdtlsbar.className=="wms-udi-selected")?WMSUI.userdtlsbar.className="wms-udi-selected":WMSUI.userdtlsbar.className="wms-udi"}(WMSUI.notifybar.className=="wms-nd-selected"||WMSUI.notifybar.className=="wms-ndi-selected")?WMSUI.notifybar.className="wms-ndi-selected":WMSUI.notifybar.className="wms-ndi";if(WMSUI.contactsenabled){(WMSUI.usersbar.className=="wms-od-selected"||WMSUI.usersbar.className=="wms-odi-selected")?WMSUI.usersbar.className="wms-odi-selected":WMSUI.usersbar.className="wms-odi"}if(WMSUI.groupsenabled){(WMSUI.groupbar.className=="wms-ud-selected"||WMSUI.groupbar.className=="wms-udi-selected")?WMSUI.groupbar.className="wms-udi-selected":WMSUI.groupbar.className="wms-udi"}if(WMSUI.activechatenabled){(WMSUI.actchatbar.className=="wms-nd-selected"||WMSUI.actchatbar.className=="wms-ndi-selected")?WMSUI.actchatbar.className="wms-ndi-selected":WMSUI.actchatbar.className="wms-ndi"}}else{if(WMSUI.profileenabled){(WMSUI.userdtlsbar.className=="wms-ud-selected"||WMSUI.userdtlsbar.className=="wms-udi-selected")?WMSUI.userdtlsbar.className="wms-ud-selected":WMSUI.userdtlsbar.className="wms-ud"}(WMSUI.notifybar.className=="wms-nd-selected"||WMSUI.notifybar.className=="wms-ndi-selected")?WMSUI.notifybar.className="wms-nd-selected":WMSUI.notifybar.className="wms-nd";if(WMSUI.contactsenabled){(WMSUI.usersbar.className=="wms-od-selected"||WMSUI.usersbar.className=="wms-odi-selected")?WMSUI.usersbar.className="wms-od-selected":WMSUI.usersbar.className="wms-od"}if(WMSUI.groupsenabled){(WMSUI.groupbar.className=="wms-ud-selected"||WMSUI.groupbar.className=="wms-udi-selected")?WMSUI.groupbar.className="wms-ud-selected":WMSUI.groupbar.className="wms-ud"}if(WMSUI.activechatenabled){(WMSUI.actchatbar.className=="wms-nd-selected"||WMSUI.actchatbar.className=="wms-ndi-selected")?WMSUI.actchatbar.className="wms-nd-selected":WMSUI.actchatbar.className="wms-nd"}}var a=(WebMessanger.scode==undefined)?"0":WebMessanger.scode;var f=(WebMessanger.getNickName()==undefined)?((WMSUI.contactsText!="")?WMSUI.contactsText:WMSUI.i18N("Contacts","Contacts")):WebMessanger.getNickName();try{var b=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmsdname","SPAN");b.innerHTML='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsus-'+a+'"/><span class="wms-thuname">'+f+"</span>"}catch(c){}WMSUI.updateUserStatus();WMSUI.populateudtls()};WMSUI.populategrps=function(){try{var grouplistobj=WmsGroups.getZohoGroups();var cnt=0;var search="";if(WMSUI.grpsearchval!=""&&WMSUI.grpsearchval!=WmsResource.getRealValue("Search_Groups")){search=WMSUI.grpsearchval}var searchval="";var grphtml="";var grpownhtml="";var grpmodhtml="";var grpmemhtml="";var isgrppresent=false;if((search!=undefined||search!=null)&&search.trim()!=""){try{searchval=eval("/"+search.trim()+"/gi")}catch(e){return}}for(var gid in grouplistobj){isgrppresent=true;var groupobj=grouplistobj[gid];var gname=groupobj.NAME;var desc=(groupobj.DESC!="")?groupobj.DESC:"";var grpowner=groupobj.OWNER;var grpmoderator=groupobj.MODERATOR;var groupicon=(grpowner==1)?"own":(grpmoderator==1)?"mod":"mem";var grptitle=(grpowner==1)?"Owner":(grpmoderator==1)?"Moderator":"Member";if(searchval!=""){if(gname.search(searchval)==-1&&desc.search(searchval)==-1){continue}}var thtml='<dl id="wmsg'+gid+'" class="wms-oudl" onclick="WMSUI.gchat('+gid+',event);" onmouseover="this.className=\'wms-oudl-selected\';" onmouseout="this.className=\'wms-oudl\';"><dt><div style="width:30px;height:30px;display:none;"></div></dt><dd><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-'+groupicon+'" title="'+WmsResource.getRealValue(grptitle)+'"/><div id="wmsdngrp'+gid+'" class="wms-gname" title="'+gname+'">'+trimLength(gname,18)+"</div>";if(desc.length!=0){if(desc.length<=15){thtml+='<div class="wms-gd"  title="'+desc+'" > '+HtmlTag.identifyStatus(desc,15)+"</div>"}else{thtml+='<div class="wms-gd"  title="'+desc+'" > '+trimLength(desc,30)+".</div>"}}thtml+="</dd></dl>";if(grpowner==1){grpownhtml+=thtml}else{if(grpmoderator==1){grpmodhtml+=thtml}else{grpmemhtml+=thtml}}cnt++}grphtml=grpownhtml+grpmodhtml+grpmemhtml;if(grphtml.length==0&&!isgrppresent){grphtml='<span class="wms-sd">'+WmsResource.getRealValue("You_are_not_part_of_any_Group_Create_your_Group_now")+' <a  onclick="WMSUI.hidegrps();" target="_blank" href="'+WMSIAMURL+'/u/h#groups/allgroups" >'+WmsResource.getRealValue("Click_here")+"</a></span>"}}catch(exp){}WMSUI.groupscont.innerHTML=grphtml;WMSUI.grpcount=cnt};WMSUI.fetchAndDisplayGroups=function(){if(WmsGroups.fetchingStatus()){WMSUI.groupscont.innerHTML='<span class="wms-sd">'+WmsResource.getRealValue("Loading")+"...</span>";WmsGroups.fetchzohogroups()}};WMSUI.populateusrs=function(init){WMSUI.initContactsUI();if(!WMSUI.contactsenabled){return}WMSUI.contactsupdated=false;var uhtml="";var contactobj=new Object();contactobj=WmsContacts.getcontacts();var onhtml="";var bhtml="";var offhtml="";var ihtml="";var invhtml="";var cnt=0;var search="";var tempcnt=0;if(WMSUI.searchval.length!=0&&WMSUI.searchval!=WmsResource.getRealValue("Search_Contacts")){search=WMSUI.searchval}var searchval="";if((search!=undefined||search!=null)&&search.trim()!=""){try{searchval=eval("/"+search.trim()+"/gi")}catch(e){return}}var options=WmsResource.getRealValue("Options");for(var zuid in contactobj){try{var curobj=contactobj[zuid];var scode=curobj.STATUS;var smsg=curobj.STATUSMSG;var nname=curobj.DNAME;var userid=curobj.USERID;var emailid=(curobj.EMAILID!=null)?curobj.EMAILID:"";var thtml="";if(scode==2){scode=0;smsg="Offline"}if(smsg.length==0){curobj.STATUSMSG=WmsContacts.defaultstatusmsg[scode];smsg=curobj.STATUSMSG}if(smsg=="Available"||smsg=="Offline"||smsg=="Idle"||smsg=="Busy"||smsg=="Invisible"){smsg=WmsResource.getRealValue(smsg)}if(searchval!=""){if(nname.search(searchval)==-1&&emailid.search(searchval)==-1&&smsg.search(searchval)){continue}}else{if(scode!=1&&scode!=3&&scode!=4){continue}}if(WebMessanger.offline){scode=0;smsg=WmsResource.getRealValue("Offline")}if(scode>=-1&&scode<=4){if(WmsSettings.soc==1){thtml=WMSUI.getContactHtml(2)}else{thtml=WMSUI.getContactHtml(1)}tempcnt++}thtml=thtml.replace(/cntimgWMSUSERID/g,"cntimg"+userid);thtml=thtml.replace(/wmscntoptWMSUSERID/g,"wmscntopt"+userid);thtml=thtml.replace(/wmsdnWMSUSERID/g,"wmsdn"+userid);thtml=thtml.replace(/wmscWMSUSERID/g,"wmsc"+userid);thtml=thtml.replace(/WMSUSERID/g,"'"+userid+"'");thtml=thtml.replace(/WMSOPTIONS/g,options);if(scode==-1&&WmsSettings.soc==1){thtml=thtml.replace(/WMSSCODE/g,scode+" wms--1width")}else{thtml=thtml.replace(/WMSSCODE/g,scode)}if(nname==undefined){nname=emailid}thtml=thtml.replace(/WMSNNAME/g,trimLength(nname,18));if(scode==-1){thtml=thtml.replace(/WMSSMSG/g,WmsResource.getRealValue("Invited"))}else{thtml=thtml.replace(/WMSSMSG/g,HtmlTag.identifyStatus(smsg,18))}thtml=thtml.replace(/WMSPHOTOSERVER/g,_WMSPHOTOSERVER+"/file?ID="+userid+"&t=user&height=30&width=30");if(scode==1){onhtml+=thtml;cnt++}else{if(scode==0){offhtml+=thtml}else{if(scode==3){bhtml+=thtml;cnt++}else{if(scode==4){ihtml+=thtml;cnt++}else{if(scode==-3){}else{if(scode==-1){invhtml+=thtml}}}}}}}catch(e){}}WMSUI.contactscont.innerHTML=onhtml+bhtml+ihtml+offhtml+invhtml;WMSUI.contcount=tempcnt;if(searchval==""){WMSUI.onlineusrs=cnt;WindowHandler.getObjectInObject(WMSUI.usersbar,"usercount","LABEL").innerHTML=cnt}else{if(tempcnt>0){WMSUI.selectContact(0)}}if(WMSUI.hidden){WMSUI.populateInfo();WMSUI.showInfo()}WindowHandler.getObjectInObject(WMSUI.usersbar,"wmsubarscode","IMG").className="wmschatIcon1";try{if(init==true&&Cookie.get("con")=="1"){WMSUI.showusrs()}}catch(e){}};WMSUI.getContactHtml=function(a){var b={"1":'<dl id="wmscWMSUSERID" class="wms-oudl" onclick="WMSUI.chat(WMSUSERID,event);" onmouseover="WMSUI.selectClass(this);WMSUI.checkContactsDetails(WMSUSERID,this.id)" onmouseout="WMSUI.changeClass(this);WMSUI.hideinfodiv(event);"><dt><div style="width:4px;height:30px;"></div></dt><dd><div class="wms-option" style="display:none" id="wmscntoptWMSUSERID" onclick="WMSUI.showOptions(this,WMSUSERID,event)" title="WMSOPTIONS"><div class="wms-rig" id="wmscntoptdivWMSUSERID" style="display:none;" ></div></div><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-WMSSCODE" /><div id="wmsdnWMSUSERID" class="wms-otu" >WMSNNAME</div></dd><dd class="wms-ddat"><div class="wms-smsg" >WMSSMSG</div></dd></dl>',"2":'<dl id="wmscWMSUSERID" class="wms-oudl" onclick="WMSUI.chat(WMSUSERID,event);" onmouseover="WMSUI.selectClass(this);WMSUI.checkContactsDetails(WMSUSERID,this.id)" onmouseout="WMSUI.changeClass(this);WMSUI.hideinfodiv(event);" style="border-bottom:none;padding:2px 0"><dd><div class="wms-optioncont" style="display:none" id="wmscntoptWMSUSERID" onclick="WMSUI.showOptions(this,WMSUSERID,event)" title="WMSOPTIONS"><div class="wms-rig" id="wmscntoptdivWMSUSERID" style="display:none;" ></div></div><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-WMSSCODE"  style="margin-right:5px;"/><div id="wmsdnWMSUSERID" class=wms-otu >WMSNNAME</div></dd></dl>'};if(b[a]!=undefined){return b[a]}};WMSUI.populteCustomStatus=function(g){if(g==null){return}var b=g.length;if(b<=0){return}var o="";var n="";var e="";for(var f=0;f<b;f++){var a=g[f]["STATUSMSG"];if(WMSUI.i18Nuserstatus==null||WMSUI.i18Nuserstatus==undefined){WMSUI.initI18NUserStatus()}if(g[f]["SYSTEM"]!=1||a=="Available"){a=(a=="Available")?WMSUI.i18Nuserstatus[a]:a;o+='<p class="wms-stp" onmouseover="this.className=\'wms-stp-hover\';" onmouseout="this.className=\'wms-stp\';" onclick="WMSUI.setStatus(1,\''+escape(a)+'\',true);"><img class="wms-1" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-stat">'+a+"</span></p>"}if(g[f]["SYSTEM"]!=1||a=="Busy"){a=(a=="Busy")?WMSUI.i18Nuserstatus[a]:a;n+='<p class="wms-stp" onmouseover="this.className=\'wms-stp-hover\';" onmouseout="this.className=\'wms-stp\';" onclick="WMSUI.setStatus(3,\''+escape(a)+'\',true);"><img class="wms-3" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-stat">'+a+"</span></p>"}if(g[f]["SYSTEM"]==1&&a=="Invisible"){a=(a=="Invisible")?WMSUI.i18Nuserstatus[a]:a;e='<b class="wms-border"></b><p class="wms-stp" onmouseover="this.className=\'wms-stp-hover\';" onmouseout="this.className=\'wms-stp\';"  onclick="WMSUI.setStatus(2,\''+a+'\');"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-0"/><span class="wms-stat">'+a+"</span></p>"}}var l='<p class="wms-stp" onclick="WMSUI.clearCustomStatus();" onmouseover="this.className=\'wms-stp-hover\';" onmouseout="this.className=\'wms-stp\';" ><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-stat" style="padding-left:22px;">'+WmsResource.getRealValue("Clear_status_message")+"</span></p>";var h=o+'<b class="wms-border"></b>'+n+e+'<b class="wms-border"></b>'+l;try{WindowHandler.getObjectInObject(WMSUI.usersdiv,"uslsdiv","DIV").innerHTML=h}catch(c){}};WMSUI.populteSettings=function(){var a='<p class="wms-np"><input class="wms-umi" type="checkbox" '+((WebMessanger.settings.sound)?"checked":"")+'/><span class="wms-set">Play sound for new messages</span></p>';a+='<p class="wms-np"><input class="wms-umi" type="checkbox" '+((WebMessanger.settings.onlineopen)?"checked":"")+'/><span class="wms-set">Keep online friends open</span></p>';a+='<p class="wms-np"><input class="wms-umi" type="checkbox" '+((WebMessanger.settings.onlynames)?"checked":"")+'/><span class="wms-set">Show only name in online friends</span></p>';a+='<p class="wms-np"><input class="wms-umi" type="checkbox" '+((WebMessanger.settings.showusrnotification)?"checked":"")+'/><span class="wms-set">Show user notification</span></p>';return a};WMSUI.togglesettings=function(){var a=WindowHandler.getObjectInObject(WMSUI.userdtlsdiv,"wmssettings","DD");if(a.style.display=="block"){a.style.display="none"}else{a.innerHTML=WMSUI.populteSettings();a.style.display="block"}};WMSUI.toggleusrs=function(){try{if(WMSUI.usersdiv.style.display=="block"){try{WMSUI.hideContactinfo()}catch(a){}WMSUI.hideusrs();return}else{if(WMSUI.contactsupdated){WMSUI.populateusrs()}WMSUI.showusrs();WMSUI.showsearch(true)}}catch(a){WebMessanger.getStatusMessage();WebMessanger.getAllStatusMessage();WMSUI.populateusrs();WMSUI.showusrs();WMSUI.showsearch(true)}try{try{WMSUI.hideudtls()}catch(b){}try{WMSUI.hidendtls()}catch(b){}try{WMSUI.hidegrps()}catch(b){}try{WMSUI.hideacttls()}catch(b){}}catch(b){}Cookie.set("con","1",60000);WMSUI.selectedId=-1};WMSUI.updateCount=function(){if(!WMSUI.contactsenabled){return}var a=WmsContacts.getcontacts();var e=0;for(var b in a){var f=a[b];var c=f.STATUS;if(c!=1&&c!=3&&c!=4){continue}e++;WMSUI.onlineusrs=e}WindowHandler.getObjectInObject(WMSUI.usersbar,"usercount","LABEL").innerHTML=e;WMSUI.contactsupdated=true};WMSUI.updateInvitations=function(c){for(var e=0;e<c.length;e++){var a=c[e];var f=WmsContacts.get(a);if(f==null){continue}var b=new Object();b.zuid=f.USERID;b.dname=f.DNAME;b.uname=f.USERID;b.email=f.EMAILID;WMSUI.showInvite(b)}};WMSUI.updateContacts=function(b){if(b){if(!silent){WMSUI.initContactsUI();WMSUI.fetchData()}}try{if(WMSUI.usersdiv.style.display!="block"){WMSUI.updateCount();if(!b){return}}}catch(a){}if(!silent){WMSUI.populatecounter++;clearTimeout(WMSUI.throttletimer);if(WMSUI.populatecounter>10){WMSUI.populateusrs(b);WMSUI.populatecounter=0;WMSUI.usersdiv.className="wms-ucd";return}WMSUI.throttletimer=setTimeout(function(){var c=c;WMSUI.populateusrs(c);WMSUI.populatecounter=0;WMSUI.usersdiv.className="wms-ucd"},1000)}};WMSUI.showgrps=function(){WMSUI.searchpresent="group";WMSUI.groupdiv.style.display="block";WMSUI.makeSelect(WMSUI.groupbar)};WMSUI.handlegroup=function(){WMSUI.populategrps();WMSUI.showsearch(true)};WMSUI.togglegdtls=function(){try{if(WMSUI.groupdiv.style.display=="block"){WMSUI.hidegrps();return}else{WMSUI.showgrps();WMSUI.showsearch(true);WMSUI.fetchAndDisplayGroups();if(WMSUI.grpsearchval!=WmsResource.getRealValue("Search_Groups")){WMSUI.populategrps()}}}catch(a){WMSUI.initGroupsUI();WMSUI.fetchAndDisplayGroups();WMSUI.showgrps()}try{try{WMSUI.hideudtls()}catch(b){}try{WMSUI.hidendtls()}catch(b){}try{WMSUI.hideusrs()}catch(b){}try{WMSUI.hideacttls()}catch(b){}WMSUI.selectedId=-1}catch(a){}};WMSUI.togglendtls=function(){if(WMSUI.notifydiv.style.display=="block"){WMSUI.hidendtls()}else{if(WMSUI.notifydiv.innerHTML==""){WebMessanger.getNotification()}WMSUI.notifydiv.style.display="block";WMSUI.makeSelect(WMSUI.notifybar)}try{try{WMSUI.hideudtls()}catch(b){}try{WMSUI.hideusrs()}catch(b){}try{WMSUI.hidegrps()}catch(b){}try{WMSUI.hideacttls()}catch(b){}}catch(a){}};WMSUI.toggleudtls=function(){if(WMSUI.userdtlsdiv.innerHTML==""){WMSUI.populateudtls()}if(WMSUI.userdtlsdiv.style.display=="block"){WMSUI.hideudtls()}else{WMSUI.userdtlsdiv.style.display="block";WMSUI.makeSelect(WMSUI.userdtlsbar)}try{WMSUI.hidendtls()}catch(a){}try{WMSUI.hideusrs()}catch(a){}try{WMSUI.hidegrps()}catch(a){}try{WMSUI.hideacttls()}catch(a){}};var naKeyCodes=new Array("33","34","36","37","39","45","144","145","16","17","18","91");WMSUI.handleStatus=function(c,a,b){if(c.keyCode>=112&&c.keyCode<=123){return true}for(i=0;i<naKeyCodes.length;i++){if(c.keyCode==naKeyCodes[i]){return true}}if(!(typeof b!="undefined")){Self.status.active(a)}};WMSUI.handleEvent=function(n,f,t,r){try{try{if(n.keyCode==13&&n.shiftKey){return true}}catch(h){}if(n.keyCode>=112&&n.keyCode<=123){return true}if(n.keyCode==27){try{ChatBlink.stopRepeat();WindowHandler.closeWinById(t);WMSKeyHandler.cancelEvent(n);return false}catch(s){}}if(n.keyCode==9&&!n.ctrlKey){WindowHandler.moveFocus(t);return false}if(n.keyCode==13){if(mz){n.preventDefault()}if(WebMessanger.offline==true){var a=WmsResource.getRealValue("Unable_to_send_message");a='<dd class="wmstxt1"><div class="inftxt" style="color:red">'+a+"</div></dd>";Message.display(t,a,true);return}var a=f.value;if(Message.trim(f.value)==""){f.value="";return false}if(a.length>2000){var a=WmsResource.getRealValue("You_cannot_send_message_over_2000_characters_long");a='<dd class="wmstxt1"><div class="inftxt" style="color:red">'+a+"</div></dd>";Message.display(t,a,true);return}var g="";try{var q=f.style.fontWeight;var b=f.style.fontStyle;var l=f.style.textDecoration;var p=f.style.fontFamily;var o=f.style.color;if(q.trim().length>0){g="font-weight:"+q+";"}if(b.trim().length>0){g+="font-style:"+b+";"}if(l.trim().length>0){g+="text-decoration:"+l+";"}if(o.trim().length>0&&o!=undefined){g+="color:"+o+";"}if(p.trim().length>0){g+="font-family:"+p+";"}}catch(n){}Message.send(t,a,g);var u=Chat.parseDiv(t,"ctrlcomp","div");u.scrollTop=u.scrollHeight-u.clientHeight;f.value="";return false}}catch(c){}};WMSUI.disablesend=function(a){var b=WindowHandler.getWinObjById(a);b.disableSend()};WMSUI.enablesend=function(a){var b=WindowHandler.getWinObjById(a);b.enableSend()};WMSUI.removeNewLine=function(b,a){if(b.keyCode==13){if(Message.trim(a.value)==""){a.value=""}}return};WMSUI.send=function(c,f){var a=Message.trim(c.value);var e=c.value;if(a==""||a=="&nbsp;"||a=="<br>"){return}Message.autofill(e);var b=c.className.replace(/wms[p]{0,1}editor/i,"");e="<span class='"+b+"'>"+Message.addBreak(e)+"</span>";Message.send(f,e);return false};WMSUI.enableShowHide=function(){WMSUI.enablehide=true};WMSUI.populateStrings=function(){WMSUI.populateSettings();if(typeof WMSUI.contactsenabled=="undefined"){WMSUI.contactsenabled=true}if(WMSUI.enablehide){WMSUI.collapsebar.innerHTML='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-mi" title="'+WmsResource.getRealValue("Minimize_Chat_here")+'"/>';WMSUI.collapsebar.onclick=function(){WMSUI.toggle()}}else{if(WMSUI.collapsebar==undefined){WMSUI.populate()}else{WMSUI.collapsebar.style.cursor="default"}}if(WMSUI.notificount==undefined){WMSUI.notificount=0}if(WMSUI.onlineusrs==undefined){WMSUI.onlineusrs=0}WMSUI.collapsetbar.innerHTML='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-maxi" title="'+WmsResource.getRealValue("Restore")+'"/>';WMSUI.userdtlsbar.innerHTML=WMSUI.getBarIcon(WMSUI.userdtlsbar.id);WMSUI.notifybar.innerHTML=WMSUI.getBarIcon(WMSUI.notifybar.id);WMSUI.notifybar.appendChild(WMSUI.notiicon);WMSUI.setNotificationCount(WMSUI.notificount);WMSUI.updateContactsText(((WMSUI.contactsText!="")?WMSUI.contactsText:WMSUI.i18N("Contacts","Contacts")),true);if(WMSUI.activechatenabled){WMSUI.actchatbar.innerHTML=WMSUI.getBarIcon(WMSUI.actchatbar.id);WMSUI.actchatbar.appendChild(WMSUI.acticon);WMSUI.setActiveChatCount()}if(WMSUI.groupsenabled){WMSUI.groupbar.innerHTML=WMSUI.getBarIcon(WMSUI.groupbar.id)}};WMSUI.populateSettings=function(){WMSUI.showusers=false;if(WMSUI.enablehide==undefined){WMSUI.enablehide=false}};WMSUI.i18N=function(a,c){try{return WmsResource.getRealValue(a)}catch(b){}return c};WMSUI.init=function(){if(typeof WMSUI.hidden=="undefined"){WMSUI.hidden=false}if(typeof WMSUI.contactsenabled=="undefined"){WMSUI.contactsenabled=true}if(typeof WMSUI.groupsenabled=="undefined"){WMSUI.groupsenabled=true}if(typeof WMSUI.contactsText=="undefined"){WMSUI.contactsText=""}if(typeof WMSUI.activechatenabled=="undefined"){WMSUI.activechatenabled=true}if(typeof WMSUI.profileenabled=="undefined"){WMSUI.profileenabled=true}WMSUI.contcount=0;WMSUI.grpcount=0;WMSUI.onlineusrs=0;WMSUI.currentId=0;WMSUI.selectedId=-1;WMSUI.selectaddmemberid=-1;WMSUI.selectinvitememberid;WMSUI.feedcount=0;WMSUI.feedinitcnt=0;WMSUI.chatcnt=0;WMSUI.feedinfo=new Object();WMSUI.addcntheight=45;WMSUI.searchcntheight=26;WMSUI.maxnfycount=0;WMSUI.nfycount=0;WMSUI.nfyholdermap=new Array();WMSUI.actchatupdated=false;WMSUI.docClickcallbackQue=new Object();WMSUI.i18Nuserstatus=null;WMSUI._CURRCONTDETAILSID=-1;WMSUI.scode=1;WMSUI.smsg=WmsResource.getRealValue("Available");WMSUI.clickedid=-1;if(ie){WMSUI.addcntheight=WMSUI.addcntheight+4;try{WMSUI.doctype=document.all[0].text}catch(a){}}WMSUI.cntheight=231;if(ie){WMSUI.cntheight=242}try{WmsSound.init()}catch(a){}WMSUI.populateSettings();WMSUI.populate();WMSUI.populateStrings();WMSUI.nonotify=true;WMSUI.inviteObj=new Array();WMSUI.objshown="";WMSUI.searchval="";WMSUI.grpsearchval="";WMSUI.searchtimer=-1;WMSUI.contactsupdated=false;WMSUI.notificount=0;WMSUI.searchpresent=null;WMSUI.cntoptionheight=null;WMSUI.contdivtop=null;WMSUI.grpheight=259;WMSUI.contactdetailtimer=-1;WMSUI.optiontimer=-1;if(ie){WMSUI.grpheight=266}};WMSUI.fetchData=function(){setTimeout(function(){WebMessanger.getNotification()},100);setTimeout(function(){WMSUI.updateCount()},2000)};WMSUI.getContactsText=function(a,b){var c='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmschatIcon1" title="'+a+'" id="wmsubarscode">';if(WMSUI.profileenabled==true){if(WMSUI.activechatenabled==true&&WMSUI.groupsenabled==true){c+='<span class="wms-ot3" title="'+a+'"/>&nbsp;'}else{if(WMSUI.activechatenabled==false&&WMSUI.groupsenabled==false){c+='<span class="wms-otc1" title="'+a+'"/>&nbsp;'}else{if(WMSUI.activechatenabled==false&&WMSUI.groupsenabled==true){c+='<span class="wms-ot2" title="'+a+'"/>&nbsp;'}else{if(WMSUI.activechatenabled==true&&WMSUI.groupsenabled==false){c+='<span class="wms-ot" title="'+a+'"/>&nbsp;'}}}}}else{if(WMSUI.activechatenabled==true&&WMSUI.groupsenabled==true){c+='<span class="wms-ot4" title="'+a+'"/>&nbsp;'}else{if(WMSUI.activechatenabled==false&&WMSUI.groupsenabled==false){c+='<span class="wms-otc2" title="'+a+'"/>&nbsp;'}else{if(WMSUI.activechatenabled==false&&WMSUI.groupsenabled==true){c+='<span class="wms-ot5" title="'+a+'"/>&nbsp;'}else{if(WMSUI.activechatenabled==true&&WMSUI.groupsenabled==false){c+='<span class="wms-ot6" title="'+a+'"/>&nbsp;'}}}}}c+=(b)?'	(<label id="usercount" class="wms-bt">'+WMSUI.onlineusrs+"</label>)</span>":'<label id="usercount" class="wms-bt"></label></span>';return c};WMSUI.updateContactsText=function(a,b){if(WMSUI.contactsenabled){WMSUI.usersbar.innerHTML=WMSUI.getContactsText(a,b)}};WMSUI.reminderClose=function(b,a){WMSUI.removeNotificationHolder("reminder"+b,a);WebMessanger.clearReminder(b)};WMSUI.removeNotificationHolder=function(c,b){WmsSound.stop();ChatBlink.stopRepeat();var a=WindowHandler.getObjectInObject(WMSUI.notificationholder,c,"DIV");a.style.display="none";WMSUI.notificationholder.removeChild(a)};WMSUI.reminderSubmit=function(c,a,b){b.submit();WMSUI.reminderClose(c,true)};WMSUI.showRemainder=function(g){if(_WMSCALENDARSERVER==""){return}var l=g.ALRM;var h=g.LOC;var c=(g.SD!=undefined&&g.SD!="")?g.SD:MyDate.formatDTTime(g.ST);var f='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-cb" onMouseOver="this.className=\'wms-cbh\'" onMouseOut="this.className=\'wms-cb\'" title="'+WmsResource.getRealValue("Close")+'" onclick="WMSUI.reminderClose(\''+l+'\',false);" ><span class="wms-ri"></span><b class="wms-mo">'+g.SUM+'</b><span class="wms-ms">';if(h.length>0){var a='<span class="wms-hd">'+WmsResource.getRealValue("Location")+"</span><span>:</span><b>"+h+"</b>"}else{var a='<span class="wms-hd"></span>'}WMSUI.initWmsIframe();var b='<span class="wms-ms"><span class="wms-hd"> '+WmsResource.getRealValue("Time")+"</span><b><span>:</span>"+c+' </span><form name="form'+l+'" target="wmsiframe" action="'+_WMSCALENDARSERVER+'/ApiAct.do" method="post"><div class="wms-bo"><select name="remt" id="remindtime"><option value="300000" > 5 '+WmsResource.getRealValue("min")+' </option><option value="600000" >10 '+WmsResource.getRealValue("min")+' </option><option value="900000" > 15 '+WmsResource.getRealValue("min")+' </option><option value="1200000" > 20 '+WmsResource.getRealValue("min")+' </option></select><input type="hidden" name="view" value="snzrem"><input type="hidden" name="aid" value="'+g.ALRM+'"><input type="button" class="wms-bn" value="'+WmsResource.getRealValue("Snooze")+'" onclick="WMSUI.reminderSubmit(\''+l+"','"+g.ALRM+'\', this.form)" /><input type="button" class="wms-bc" onclick="WMSUI.reminderClose(\''+l+'\',true);" value="'+WmsResource.getRealValue("Cancel")+'" /></div></form></span>';var e=document.createElement("DIV");e.className="wms-rd";e.id="reminder"+l;e.innerHTML=f+a+b;WMSUI.notificationholder.appendChild(e)};WMSUI.initWmsIframe=function(){var c=document.getElementById("wmsiframe");if(c==undefined){var a='<IFRAME name="wmsiframe" style="display:none" id="wmsiframe" src="/'+_WMSCONT+'/blank.html"></IFRAME>';var b=document.createElement("DIV");b.innerHTML=a;b.style.display="none";document.body.appendChild(b)}};WMSUI.createLiveSupport=function(e){var a=document.createElement("DIV");a.className="wms-rdls";var f=e.chid;var b="";if(e.cinfo!=""){b="- "+e.cinfo}var c='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-cb" onMouseOver="this.className=\'wms-cbh\'" onMouseOut="this.className=\'wms-cb\'" title="'+WmsResource.getRealValue("Close")+'"  onclick="WMSUI.removeNotificationHolder(\''+f+'\',false);" ><span class="wms-lsi"></span><b class="wms-mo" >'+e.title+'</b><span class="wms-ms">'+e.guname+" "+b+" "+MyDate.formatTime((new Date()).getTime())+'</span><form name="form'+f+'" onsubmit="return WMSUI.acceptLiveSupport(\''+f+"','"+e.guid+"','"+e.a+"','"+e.g+'\');"><div id="txtholder" class="wms-bo wms-ntinfo"><input type="submit" class="wms-bn" value="'+WmsResource.getRealValue("Accept")+'" /><input type="button" class="wms-bc" onclick="WMSUI.removeNotificationHolder(\''+f+'\',true);" value="'+WmsResource.getRealValue("Skip")+'" /></form></div>';a.id=f;a.innerHTML=c;WMSUI.notificationholder.appendChild(a);WmsSound.playTune("support",60000)};WMSUI.acceptLiveSupport=function(c,e,b,f){WMSZohoApi.acceptLiveSupport(c,e,b,f);WMSUI.removeNotificationHolder(c,true);return false};WMSUI.removeLiveSupport=function(a){WMSUI.removeNotificationHolder(a,true)};WMSUI.missedLiveSupport=function(a){var b=WindowHandler.getObjectInObject(WMSUI.notificationholder,a,"DIV");b.className="wms-rdm";WindowHandler.getObjectInObject(b,"txtholder","DIV").innerHTML=WmsResource.getRealValue("Visitor_left_the_session");WmsSound.stop()};WMSUI.endLiveSupport=function(a){a.sender="CT_INF_MSG";a.msg="<div class='upfilediv'><p><em> "+WmsResource.getRealValue("Support_session_sucessfully_ended")+" </em></p></div>";Message.formatAndDisplay(a)};WMSUI.showacttls=function(){if(WMSUI.activechatenabled){WMSUI.makeSelect(WMSUI.actchatbar);WMSUI.actchatdiv.style.display="block";WMSUI.populateActiveChat()}};WMSUI.toggleacttls=function(){try{if(WMSUI.actchatdiv.style.display=="block"){WMSUI.hideacttls()}else{WMSUI.showacttls()}}catch(c){WMSUI.initactChatUI();WMSUI.showacttls()}try{try{WMSUI.hidendtls()}catch(b){}try{WMSUI.hideudtls()}catch(b){}try{WMSUI.hideusrs()}catch(b){}try{WMSUI.hidegrps()}catch(b){}}catch(a){}};WMSUI.hideacttls=function(){if(WMSUI.activechatenabled){WMSUI.actchatdiv.style.display="none";WMSUI.makeNormal(WMSUI.actchatbar);WMSUI.setActiveChatCount()}};WMSUI.setActiveChatCount=function(){var a=WmsActiveChat.getCount();if(a>0){WindowHandler.getObjectInObject(WMSUI.actchatbar,"wmsactchatbaricon","IMG").className="wms-activeorange"}else{WindowHandler.getObjectInObject(WMSUI.actchatbar,"wmsactchatbaricon","IMG").className="wms-active"}};WMSUI.populateActiveChat=function(){if(WMSUI.activechatenabled){var h=false;try{h=(WMSUI.actchatdiv.style.display=="block")?true:false}catch(g){}var c="";try{if(h||WMSUI.actchatupdated==undefined||WMSUI.actchatupdated){WMSUI.actchatupdated=false;var b=WmsActiveChat.getChatList();for(var a in b){var n=b[a]["TITLE"];var f='<p id="wmsact'+a+'" class="wms-np"><img class="wms-actchat" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"/><span class="wms-nt">'+n+' &nbsp;&nbsp;&nbsp; <a class="wms-lt" onclick="WMSUI.attachSession(\''+a+'\');" href="javascript:;">'+WmsResource.getRealValue("Join")+"</a></span></p>";c+=f}}if(c.length==0&&WmsActiveChat.getCount()<1){c='<p class="wms-np"><img style="width: 10px;" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"><span>'+WmsResource.getRealValue("No_Active_Chats")+".</span></p>"}WMSUI.actchatcont.innerHTML=c}catch(l){WMSUI.initactChatUI();WMSUI.actchatcont.innerHTML=c}WMSUI.setActiveChatCount()}};WMSUI.initactChatUI=function(){if(WMSUI.actchatdiv==undefined){WMSUI.actchatdiv=document.createElement("DIV");WMSUI.actchatdiv.className="wms-ucd";WMSUI.actchatdiv.style.display="none";WMSUI.toolbar.appendChild(WMSUI.actchatdiv);WMSUI.actchatdiv.innerHTML='<p class="wms-th" onclick="WMSUI.hideacttls();" style="cursor:pointer" title="'+WmsResource.getRealValue("Click_to_minimize")+"\"onmouseover=\"document.getElementById('act-min').style.visibility='visible'\" onmouseout=\"document.getElementById('act-min').style.visibility='hidden'\"><img id=\"act-min\" src=\"/"+_WMSCONT+'/images/spacer.gif" class="wms-min1" onclick="WMSUI.hideusrs();" title="'+WmsResource.getRealValue("Minimize")+'" style="visibility:hidden;"/><span class="wms-oh">'+WMSUI.i18N("Active_Chats","Active Chats")+'</span></p><div style="height:236px;"><div id="wmsactcont" class="wmsactcont"></div></div><div style="margin:5px 0 5px 5px"><a href="javascript:;" onclick="ZMSGUI.showChatHistory();">'+WmsResource.getRealValue("Chat_History")+"</a></div>";WMSUI.actchatcont=WindowHandler.getObjectInObject(WMSUI.actchatdiv,"wmsactcont","DIV")}};WMSUI.attachSession=function(a){WebMessanger.userclick=true;WebMessanger.attachSession(a)};WMSUI.continueChat=function(a){WebMessanger.continueChat(a)};WMSUI.handleDocumentEscape=function(){var c=document.getElementById("zfdshis");var b=document.getElementById("zfdsunread");var a=document.getElementById("zchhis");if(c!=null&&c.style.display=="block"){c.style.display="none"}else{if(b!=null&&b.style.display=="block"){try{ZMSGUI.hideunread()}catch(e){}return false}else{if(a!=null&&a.style.display=="block"){ZMSGUI.hidechathis()}}}};WMSUI.showAddmemberCntlist=function(winobj,search,ev){var grouplistObj;var searchval=null;WMSUI.addmemacont=winobj.getInnerObject("wms-addmemouter","DIV");WMSUI.selectaddmemberid=-1;dobj=WmsContacts.getcontacts();if((search!=undefined||search!=null)&&search!=""){searchval=eval("/"+search+"/i")}var clist="";var count=0;var listname;for(var d in dobj){try{if(count>=7){break}var obj=dobj[d];if(obj==null||obj==undefined){continue}var cstatus=obj.STATUS;if(cstatus<0){continue}var userid=obj.USERID;var dname=(WmsContacts.getDisplayName(userid)!=null)?WmsContacts.getDisplayName(userid):WmsContacts.getMPDispName(userid);var cmailid=obj.EMAILID;if(WmsContacts.isMPUser(userid)){if(winobj.partinfo["*"+WebMessanger.getZuid()+"|"+userid]!=undefined||winobj.partinfo["*"+WebMessanger.getZuid()+"|"+userid]!=null){continue}}if(winobj.partinfo[userid]!=undefined||winobj.partinfo[userid]!=null){continue}listname=dname.trim();listname=listname.substring(0,((listname.indexOf(" ")==-1)?listname.length:listname.indexOf(" "))+1).trim();var dispname=dname;if(searchval!=null){if(dname.search(searchval)==-1&&cmailid.search(searchval)==-1){continue}if(cmailid!=undefined){dispname=" "+cmailid.replace(searchval,"<b>"+cmailid.match(searchval)+"</b>")}else{dispname='"'+dname.replace(searchval,"<b>"+dname.match(searchval)+"</b>")}clist=clist+WMSUI.getlisthtml(userid,dispname,cmailid,winobj.objId,cstatus,dname);count++;WMSUI.addmemacont.innerHTML=clist;WMSUI.addmemacont.style.display="block"}}catch(e){}}if(count==0){WMSUI.addmemacont.style.display="none"}if(WMSUI.addmemacont.style.display=="block"){WMSUI.addIndocClickcallbackQue("wms-addmemouter",WMSUI.addmemacont,function(id){if(id!=="addmemberinput"){WMSUI.addmemacont.style.display="none"}},ev)}};WMSUI.getlisthtml=function(b,c,a,h,f,g){var e="";e='<p id="'+b+'" onclick="WMSUI.addMember(\''+a+"','"+h+"','"+b+'\')" onmouseout="this.className=\'wms-stp\'" onmouseover="this.className=\'wms-stp-hover\'"  class="wms-stp" style="width:100%"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-'+f+'" title="'+WmsResource.getRealValue(WebMessanger.statusarr[f])+'"/><span class="wms-stat" title=\''+g+"'>"+c+'</span></p><b class="wms-border"></b>';return e};WMSUI.addMember=function(b,g,a){var c=WindowHandler.getWinObjById(g);var f=c.getInnerObject("addmemberinput","INPUT");var e=c.getInnerObject("addmemberhiddeninput","INPUT");e.value=e.value.substring(0,e.value.lastIndexOf(",")+1)+a+",";f.value=f.value.substring(0,f.value.lastIndexOf(",")+1)+b+",";c.getInnerObject("wms-addmemouter","DIV").style.display="none";c.getInnerObject("addmemberimg","IMG").className="wms-addmember-enable";f.focus()};WMSUI.submitFile=function(c){var b=c.chid;var a=c.sid;var e=c.sender;a.value=WebMessanger.getSid();e.value=WebMessanger.getUserName();c.submit();document.getElementById("actiondiv").style.display="none";document.getElementById("formsend").className="wms-rigp"};WMSUI.sendFile=function(a,b,c){if(b=="user"){a.type.value="im";a.userList.value=c}else{return false}a.submit();return false};WMSUI.checkContactsDetails=function(b,a){clearTimeout(WMSUI.contactdetailtimer);if(WMSUI._CURRCONTDETAILSID!=b){WMSUI.hideContactinfo()}if(WMSUI.clickedid!=b){WMSUI.showOptionImg(b);WMSUI.contactdetailtimer=setTimeout(function(){WMSUI.showContactsDetails(b,a)},1000);WMSUI.setClickedId(-1)}};WMSUI.showContactsDetails=function(b,p){try{if(b==WMSUI._CURRCONTDETAILSID){return}var r=WmsContacts.get(b);var s=r.DNAME;var a=r.EMAILID;if(s==undefined){s=a}var c=r.STATUS;var f=r.STATUSMSG;var h="none";var g="none";if(c==2){c=0;f="Offline"}if(f=="Available"||f=="Offline"||f=="Idle"||f=="Busy"||f=="Invisible"){f=WmsResource.getRealValue(f)}if(WebMessanger.offline){c=0;f=WmsResource.getRealValue("Offline")}var t=document.getElementById(p);if(WMSTP.isVideoEnabled()){h="block"}if(WMSTP.isAudioEnabled()){g="block"}if(c==-1){f=WmsResource.getRealValue("Invited");var o='<div class="contactinfo" onmouseover="WMSUI.checkConDettimer();"onmouseout="WMSUI.hideinfodiv(event);"><div class="contactinfo_lft"><img class="wms-cp" src="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif" type="image" onload="WMSUI.loadImage(this, \''+_WMSPHOTOSERVER+"/file?ID="+r.USERID+'&t=user&height=50&width=50\');"/></div><div class="contactinfo_rht"><b>'+s+'</b><p><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-'+c+'"/><span>'+f+'</span></p><b class="fnt"><a href="mailto:'+a+'">'+a+'</a></b></div><div class="contactbot_title"><span><a href="javascript:;" onclick="WMSUI.reinviteContByEmail('+b+')" onmouseover="this.className=\'contactbot_a_hover\'" onmouseout="this.className=\'contactbot_a\'" title="'+WmsResource.getRealValue("ReInvite")+'">'+WmsResource.getRealValue("ReInvite")+"</a></span></div></div>"}else{var o="";if(WmsContacts.isMPUser(b)){o='<div class="contactinfo" onmouseover="WMSUI.checkConDettimer();"onmouseout="WMSUI.hideinfodiv(event);"><div class="contactinfo_lft"><img class="wms-cp" src="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif" type="image" onload="WMSUI.loadImage(this, \''+WmsContacts.getMPUserPhoto(b)+'\');"/><img class="wms-'+r.PROTOCOL+'_logo" src="/wms/images/spacer.gif" title="'+WmsContacts.getMPLoginName(b)+'"></div><div class="contactinfo_rht"><b>'+s+'</b><p><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-'+c+'"/><span>'+f+'</span></p><b class="fnt"><a id="mailid" href="mailto:'+a+'">'+a+'</a></b></div><div class="contactbot_title"><span><a href="javascript:;"  onclick="WMSUI.newChat(\''+b+'\')" onmouseover="this.className=\'contactbot_a_hover\'" onmouseout="this.className=\'contactbot_a\'" title="'+WmsResource.getRealValue("Chat")+'">'+WmsResource.getRealValue("Chat")+"</a></span>"}else{o='<div class="contactinfo" onmouseover="WMSUI.checkConDettimer();" onmouseout="WMSUI.hideinfodiv(event);"><div class="contactinfo_lft"><img class="wms-cp" src="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif" type="image" onload="WMSUI.loadImage(this, \''+_WMSPHOTOSERVER+"/file?ID="+r.USERID+'&t=user&height=50&width=50\');"/><img id="logo" class="wms-zoho_logo" src="/wms/images/spacer.gif"></div><div class="contactinfo_rht"><b>'+s+'</b><p><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wms-'+c+'"/><span>'+f+'</span></p><b class="fnt"><a href="mailto:'+a+'">'+a+'</a></b></div><div class="contactbot_title"><span><a href="javascript:;"  onclick="WMSUI.newChat('+b+')" onmouseover="this.className=\'contactbot_a_hover\'" onmouseout="this.className=\'contactbot_a\'" title="'+WmsResource.getRealValue("Chat")+'">'+WmsResource.getRealValue("Chat")+'</a></span><form action="'+_WMSCHATURL+'sendfileim.ext" name="USERIDsendfile" target="USERIDsendfile" id="USERIDwmssendfile" enctype="multipart/form-data" method="post" value="user" style="float:left;overflow:hidden;width:20px;position:relative;margin-right:5px"><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"  class="wms-contactinfo-file" onmouseover="this.className=\'wms-contactinfo-file-hover\'" onmouseout="this.className=\'wms-contactinfo-file\'"/><input type="file" name="file1" onChange="WMSUI.sendFile(this.form,\'user\',USERID)"  style="position:absolute;opacity:0;filter:alpha(opacity:1);left:0px;top:-1px;width:20px;overflow:hidden;height:20px" title="'+WmsResource.getRealValue("Send_File")+'"></input><input type="hidden" name="type" value=""/><input type="hidden" name="userList" value=""/><input type="hidden" name="mod" value="att"><input type="hidden" name="" value=""><input type="hidden" name="sender" value="'+WebMessanger.getUserName()+'"><input type="hidden" name="sid" value="'+encodeURIComponent(WebMessanger.getSid())+'"><iframe id="USERIDsendfile" name="USERIDsendfile" style="display:none;"></iframe></form>'}if(_WMSMAILURL.trim()!=""){o+='<img  src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"  onclick=" WMSUI.sendMail(\''+b+'\')" class="wms-contactinfo-mail" onmouseover="this.className=\'wms-contactinfo-mail-hover\'" onmouseout="this.className=\'wms-contactinfo-mail\'" title="'+WmsResource.getRealValue("Send_Mail")+'"/>'}if(!WmsContacts.isMPUser(b)){o+='<img  src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"  onclick=" WMSUI.startVideoChat('+r.USERID+')" class="wms-contactinfo-video" style="display:'+h+'" onmouseover="this.className=\'wms-contactinfo-video-hover\'" onmouseout="this.className=\'wms-contactinfo-video\'" title="'+WmsResource.getRealValue("Start_video_chat")+'"/><img  src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif"  onclick="WMSUI.startAudioChat('+r.USERID+')" class="wms-contactinfo-voice" style="display:'+g+'"onmouseover="this.className=\'wms-contactinfo-voice-hover\'" onmouseout="this.className=\'wms-contactinfo-voice\'"   title="'+WmsResource.getRealValue("Start_voice_chat")+'"/></div></div>'}o=o.replace(/USERID/g,"'"+r.USERID+"'")}WMSUI.contactinfodiv.innerHTML=o;if(!WmsContacts.isMP){document.getElementById("logo").removeAttribute("class")}WMSUI.contactinfodiv.style.display="block";WMSUI._CURRCONTDETAILSID=b;if(r.PROTOCOL=="facebook"){document.getElementById("mailid").style.display="none"}if(WMSUI.contactscont.scrollHeight<197){WMSUI.contactinfodiv.style.left=193+"px"}else{WMSUI.contactinfodiv.style.left=182+"px"}WMSUI.contactinfodiv.style.bottom="";if(t.offsetTop<190){WMSUI.contactinfodiv.style.top=t.offsetTop+"px"}else{WMSUI.contactinfodiv.style.top=(t.offsetTop-WMSUI.contactscont.scrollTop)+"px"}var q=(t.offsetTop-WMSUI.contactscont.scrollTop);var l=q+WMSUI.contactinfodiv.offsetHeight;if(l>WMSUI.contactscont.offsetHeight){WMSUI.contactinfodiv.style.top="";WMSUI.contactinfodiv.style.bottom=0+"px"}}catch(n){}};WMSUI.showOptionImg=function(c){try{clearTimeout(WMSUI.optiontimer);WMSUI.hideOptionImg();var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmscntopt"+c,"DIV");a.style.display="block";WMSUI.previousoptionobj=a}catch(b){}};WMSUI.clearOptionTimer=function(){clearTimeout(WMSUI.optiontimer)};WMSUI.hideOption=function(){WMSUI.optiontimer=setTimeout("WMSUI.hideOptionImg()",100)};WMSUI.hideOptionImg=function(){try{if(WMSUI.previousoptionobj!=null){if(WMSUI.previousoptionobj.className=="wms-option-sel"||WMSUI.previousoptionobj.className=="wms-optioncont-sel"){return}WMSUI.previousoptionobj.style.display="none";if(WMSUI.optionsdiv.style.display=="block"){WMSUI.previousoptionobj.className=(WmsSettings.soc==1)?"wms-optioncont":"wms-option"}}}catch(a){}};WMSUI.hideContactinfo=function(){try{WMSUI.contactinfodiv.style.display="none"}catch(a){}WMSUI._CURRCONTDETAILSID=-1};WMSUI.hideinfodiv=function(a){clearTimeout(WMSUI.contactdetailtimer);if(getSource(a).type=="file"){return}WMSUI.contactdetailtimer=setTimeout("WMSUI.hideContactinfo()",500);WMSUI.optiontimer=setTimeout("WMSUI.hideOptionImg()",100)};WMSUI.checkConDettimer=function(){clearTimeout(WMSUI.contactdetailtimer)};WMSUI.sendMail=function(o){try{var c=WmsContacts.contactslist[o]["EMAILID"]}catch(n){}var h=Collaboration.handleComposeMail(c);if(h==true){return}if(c==undefined||c==null){return}var a=parseInt((80*screen.width)/100);var g=parseInt((77*screen.height)/100);var b=(screen.width-a)/2;var f=(screen.height-g)/2;window.open(""+_WMSMAILURL+"mail/compose.do?mode=compose&tp=zb&ct="+c,new Date().getTime(),"height="+g+", width="+a+",status=yes,toolbar=no,top="+f+", left="+b+", menubar=no,location=no,scrollbars=yes,resizable=yes")};WMSUI.reinviteContByEmail=function(e){var c=WmsContacts.get(e);var a=c.DNAME;var b=c.EMAILID;WmsContacts.reinvite("zoho",b,a,WebMessanger.uname)};WMSUI.showNetDownBanner=function(){WMSUI.hideWmsDownBanner();if(WebMessanger.disablenetworkdownbanner){return}var a='<div class="wms-contentb"><img  width="1" height="1" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="internetbkg_img"/>'+WmsResource.getRealValue("Connection_to_the_server_failed._Please_check_your_network_connections.")+'<span id="recntime"></span><a id="trynwid" onclick="WebMessanger.forceReconnect()" href="javascript:;">Try Now </a></div><b class="wms-b4"></b><b class="wms-b3"></b><b class="wms-b2"></b><b class="wms-b1"></b>';WMSUI.bannercontent=document.createElement("DIV");WMSUI.bannercontent.className="wms-statesmsg";WMSUI.bannercontent.innerHTML=a;WMSUI.bannercontent.style.display="block";WebMessanger.offline=true;document.body.appendChild(WMSUI.bannercontent)};WMSUI.showWmsDownBanner=function(){WMSUI.hideNetDownBanner();if(silent){return}var a=""+WmsResource.getRealValue("Unable_to_connect_chat_server._")+'<span id="recntime"> </span><a href="javascript:;" onclick="WebMessanger.forceReconnect()">'+WmsResource.getRealValue("Reconnect")+"</a>";if(WMSUI.wmschatbanner!=undefined){return}WMSUI.wmschatbanner=document.createElement("DIV");WMSUI.wmschatbanner.className="wms_footerstsmsg";WMSUI.wmschatbanner.innerHTML=a;WMSUI.toolbar.appendChild(WMSUI.wmschatbanner);WMSUI.scode=WebMessanger.scode;WMSUI.smsg=WebMessanger.smsg;WebMessanger.offline=true;WebMessanger.scode=0;WebMessanger.smsg="Offline";WMSUI.updateUserInfo();WMSUI.populateusrs()};WMSUI.reconnectWms=function(){if(silent){return}var a=""+WmsResource.getRealValue("Unable_to_connect_chat_server_Reconnecting")+'<a href="javascript:;" onclick="WMSUI.reconnectWms()">'+WmsResource.getRealValue("Reconnect")+'</a><img class="cancel" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" />';WMSUI.wmschatbanner.innerHTML=a;WebMessanger.reconnect(1,"trynow",true)};WMSUI.hideNetDownBanner=function(){clearTimeout(wmsReconnectionTimer);try{document.body.removeChild(WMSUI.bannercontent);WMSUI.bannercontent=undefined}catch(a){}};WMSUI.hideWmsDownBanner=function(){clearTimeout(wmsReconnectionTimer);if(WMSUI.wmschatbanner!=undefined){try{WMSUI.toolbar.removeChild(WMSUI.wmschatbanner);WMSUI.wmschatbanner=undefined;WebMessanger.scode=WMSUI.scode;WebMessanger.smsg=WMSUI.smsg;WMSUI.updateUserInfo();WMSUI.populateusrs()}catch(a){}}};WMSUI.hideAllOfflineBanner=function(){try{clearTimeout(WebMessanger.showbannertime)}catch(a){}try{clearTimeout(WebMessanger.showchatbannertime)}catch(a){}WMSUI.hideNetDownBanner();WMSUI.hideWmsDownBanner();WebMessanger.offline=false};WMSUI.setClickedId=function(a){WMSUI.clickedid=a};WMSUI.setUnreadChatNotifications=function(b){var a=WMSUI.getNotifycnt()-WMSUI.chatcnt;WMSUI.chatcnt=parseInt(b.chatcount);a+=WMSUI.chatcnt;WMSUI.setNotificationCount(a);WMSUI.setNotification(b);if(b.chatcount==0){WMSUI.clearUnreadNotification()}};WMSUI.runIdleTimer=function(){clearTimeout(WMSUI.idletimer);WMSUI.idletimer=setTimeout(function(){WMSUI.handleDocumentIdle()},900000)};WMSUI.handleDocumentIdle=function(){if(WebMessanger.scode==2||WebMessanger.scode==4){return}if(!WindowHandler.checkRegisterPopoutIdle()){clearTimeout(WMSUI.idletimer);WMSUI.idletimer=setTimeout(function(){WMSUI.handleDocumentIdle()},900000);return}if(WebMessanger.scode==undefined&&WebMessanger.smsg==undefined){var b=WebMessanger.syncStatusMessage();if(b!=null){WebMessanger.scode=b.scode;WebMessanger.smsg=b.smsg}else{WebMessanger.scode=1;WebMessanger.smsg=WebMessanger.statusarr[WebMessanger.scode]}}else{if(WebMessanger.smsg==undefined&&WebMessanger.scode!=undefined){WebMessanger.smsg=WebMessanger.statusarr[WebMessanger.scode]}}WMSUI.changedscode=WebMessanger.scode;WMSUI.changedsmsg=WebMessanger.smsg;WebMessanger.scode=4;if(WebMessanger.smsg=="Available"||WebMessanger.smsg=="Busy"){var a="Idle";WebMessanger.smsg=a}if(WebMessanger.offline!=undefined&&!WebMessanger.offline){WebMessanger.setIdle(WebMessanger.scode,WebMessanger.smsg);if(!silent){WMSUI.updateUserInfo()}}};WMSUI.checkDocumentActive=function(){if(ie){document.attachEvent("onkeydown",WMSUI.handleDocumentActive);document.attachEvent("onclick",WMSUI.handleDocumentActive);document.attachEvent("onkeypress",WMSUI.handleDocumentActive);window.attachEvent("onscroll",WMSUI.handleDocumentActive);document.attachEvent("onmouseout",WMSUI.handleDocumentActive);document.attachEvent("onmouseenter",WMSUI.handleDocumentActive)}else{document.addEventListener("keydown",WMSUI.handleDocumentActive,true);document.addEventListener("keypress",WMSUI.handleDocumentActive,true);document.addEventListener("mouseout",WMSUI.handleDocumentActive,true);document.addEventListener("mouseenter",WMSUI.handleDocumentActive,true);window.addEventListener("scroll",WMSUI.handleDocumentActive,true);document.addEventListener("click",WMSUI.handleDocumentActive,true)}};WMSUI.handleDocumentActive=function(){if(WebMessanger.scode==2||WebMessanger.scode!=4){clearTimeout(WMSUI.idletimer);WMSUI.idletimer=setTimeout(function(){WMSUI.handleDocumentIdle()},900000);return}clearTimeout(WMSUI.idletimer);WMSUI.idletimer=setTimeout(function(){WMSUI.handleDocumentIdle()},900000);if(WMSUI.changedscode!=undefined&&WMSUI.changedsmsg!=undefined){WebMessanger.scode=WMSUI.changedscode;WebMessanger.smsg=WMSUI.changedsmsg}else{WMSUI.changedscode=1;WebMessanger.scode=1}if(WebMessanger.smsg==undefined){WebMessanger.smsg=WebMessanger.statusarr[WebMessanger.scode]}if(WebMessanger.offline!=undefined&&!WebMessanger.offline){if(!silent){WMSUI.updateUserInfo()}WebMessanger.setActive(WebMessanger.scode,WebMessanger.smsg)}};WMSUI.toggleSound=function(){if(WmsSettings.sound==1){WmsSettings.updateWmsSettings("bchatsettings","sound",0)}else{WmsSettings.updateWmsSettings("bchatsettings","sound",1)}};WMSUI.handleSoundSettings=function(){var a=WindowHandler.getObjectInObject(WMSUI.usersdiv,"wmssound","IMG");if(WmsSettings.sound==0){a.className="wms-sound-off";WmsSound.stop()}else{if(WmsSettings.sound==1){a.className="wms-sound-on"}}};WMSUI.RestartTimers=function(){WMSUI.runIdleTimer()};WMSUI.cntphotoupdate=function(a,e,c,b){document.getElementById("cntimg"+a).setAttribute("src",_WMSCHATURL+"mpimg.do?url="+b)};function WmsProxyAjax(){}WmsProxyAjax.request=function(a){try{if(window.XMLHttpRequest){wmsProxyAjax=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsProxyAjax=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsProxyAjax){wmsProxyAjax.onreadystatechange=WmsProxyAjax.proxyDataDispatcher}else{wmsProxyAjax=false}wmsProxyAjax.open("GET",a,true);wmsProxyAjax.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(ie){wmsProxyAjax.send()}else{wmsProxyAjax.send(null)}}catch(b){print("http connect error "+b)}};WmsProxyAjax.postrequest=function(a,c){try{if(WebMessanger.registerAnnonUser){if(a.indexOf("/"+_WMSCONT+"/chatadapter.do")==0){return false}}if(window.XMLHttpRequest){wmsProxyAjax=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsProxyAjax=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsProxyAjax){wmsProxyAjax.onreadystatechange=WmsProxyAjax.proxyDataDispatcher}else{wmsProxyAjax=false}wmsProxyAjax.open("POST",a,true);wmsProxyAjax.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");wmsProxyAjax.setRequestHeader("Content-length",c.length);wmsProxyAjax.setRequestHeader("Connection","close");wmsProxyAjax.send(c)}catch(b){}};WmsProxyAjax.proxyDataDispatcher=function(){try{if(wmsProxyAjax.readyState==4){if(wmsProxyAjax.status==200){response=wmsProxyAjax.responseText;if(response!=""){var list=eval(response);if(list==null){return}var len=list.length;var i=0;for(i=0;i<len;i++){var msgobj=list[i];WmsProxyAjax.wmsProxyAjaxDispatcher(msgobj.module,msgobj.objType,WmsAjax.getObject(msgobj.objType,msgobj.objString))}}}else{if(wmsProxyAjax.status==503){WebMessanger.reconnect(75000,"rsdown",false)}else{print("http read error : "+wmsProxyAjax.status)}}}}catch(e){}};WmsProxyAjax.wmsProxyAjaxDispatcher=function(a,n,b){var c=b.server;var f=b.request;var e=b.response;if(c==""){var l=e;var h=l.length;var g=0;for(g=0;g<h;g++){var o=l[g];WebMessanger.wmsAjaxDispatcher(o.module,o.objType,WmsAjax.getObject(o.objType,o.objString))}}};function WmsProxyOnLoad(){}WmsProxyOnLoad.request=function(a){try{if(window.XMLHttpRequest){wmsProxyOnLoad=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsProxyOnLoad=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsProxyOnLoad){wmsProxyOnLoad.onreadystatechange=WmsProxyOnLoad.proxyDataDispatcher}else{wmsProxyOnLoad=false}wmsProxyOnLoad.open("GET",a,true);wmsProxyOnLoad.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(ie){wmsProxyOnLoad.send()}else{wmsProxyOnLoad.send(null)}}catch(b){print("http connect error "+b)}};WmsProxyOnLoad.postrequest=function(a,c){try{if(WebMessanger.registerAnnonUser){if(a.indexOf("/"+_WMSCONT+"/chatadapter.do")==0){return false}}if(window.XMLHttpRequest){wmsProxyOnLoad=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsProxyOnLoad=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsProxyOnLoad){wmsProxyOnLoad.onreadystatechange=WmsProxyOnLoad.proxyDataDispatcher}else{wmsProxyOnLoad=false}wmsProxyOnLoad.open("POST",a,true);wmsProxyOnLoad.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");wmsProxyOnLoad.setRequestHeader("Content-length",c.length);wmsProxyOnLoad.setRequestHeader("Connection","close");wmsProxyOnLoad.send(c)}catch(b){}};WmsProxyOnLoad.proxyDataDispatcher=function(){if(wmsProxyOnLoad.readyState==4){if(wmsProxyOnLoad.status==200){response=wmsProxyOnLoad.responseText;if(response!=""){var list=eval(response);if(list==null){return}var len=list.length;var i=0;for(i=0;i<len;i++){var msgobj=list[i];WmsProxyAjax.wmsProxyAjaxDispatcher(msgobj.module,msgobj.objType,WmsAjax.getObject(msgobj.objType,msgobj.objString))}}}else{if(wmsProxyOnLoad.status==503){WebMessanger.reconnect(75000,"rsdown",false)}else{print("http read error : "+wmsProxyOnLoad.status)}}}};function WmsProxyOnDemand(){}WmsProxyOnDemand.request=function(a){try{if(window.XMLHttpRequest){wmsProxyOnDemand=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsProxyOnDemand=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsProxyOnDemand){wmsProxyOnDemand.onreadystatechange=WmsProxyOnDemand.proxyDataDispatcher}else{wmsProxyOnDemand=false}wmsProxyOnDemand.open("GET",a,true);wmsProxyOnDemand.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");if(ie){wmsProxyOnDemand.send()}else{wmsProxyOnDemand.send(null)}}catch(b){}};WmsProxyOnDemand.postrequest=function(a,c){try{if(WebMessanger.registerAnnonUser){if(a.indexOf("/"+_WMSCONT+"/chatadapter.do")==0){return false}}if(window.XMLHttpRequest){wmsProxyOnDemand=new XMLHttpRequest()}else{if(window.ActiveXObject){wmsProxyOnDemand=new ActiveXObject("Microsoft.XMLHTTP")}}if(wmsProxyOnDemand){wmsProxyOnDemand.onreadystatechange=WmsProxyOnDemand.proxyDataDispatcher}else{wmsProxyOnDemand=false}wmsProxyOnDemand.open("POST",a,true);wmsProxyOnDemand.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");wmsProxyOnDemand.setRequestHeader("Content-length",c.length);wmsProxyOnDemand.setRequestHeader("Connection","close");wmsProxyOnDemand.send(c)}catch(b){}};WmsProxyOnDemand.proxyDataDispatcher=function(){if(wmsProxyOnDemand.readyState==4){if(wmsProxyOnDemand.status==200){response=wmsProxyOnDemand.responseText;if(response!=""){var list=eval(response);if(list==null){return}var len=list.length;var i=0;for(i=0;i<len;i++){var msgobj=list[i];WmsProxyAjax.wmsProxyAjaxDispatcher(msgobj.module,msgobj.objType,WmsAjax.getObject(msgobj.objType,msgobj.objString))}}}else{if(wmsProxyOnDemand.status==503){WebMessanger.reconnect(75000,"rsdown",false)}else{print("http read error : "+wmsProxyOnDemand.status)}}}};var ZMSG_CURRPAGE=1;var ZMSG_MSGPERPAGE=10;var ZMSG_NEW=false;var ZMSG_HIS=false;var ZMSG_NOTIFY=false;var ZMSG_SEARCH=false;var ZMSG_SEARCHURL="";var ZMSG_MSGCNT=0;var ZMSG_NEWMSGCNT=0;var ZMSG_MSGNO=2048;var ZMSG_DATAOBJ=new Object();var ZMSG_UNREAD=false;var ZMSG_CLKUNREAD=false;var ZMSG_CHATCOUNT=15;var ZMSG_SEARCHVALUE="";var ZMSG_CHATTOTAL=0;var ZMSG_CHATPGNO=1;var ZMSG_CHATS=0;var ZMSG_chatcountchecked=false;var ZMSG_CHATTOTALOBJ=0;var ZMSG_PREVOBJECTSELECT=null;var ZMSG_chhis=null;var ZMSG_selecttransContent=null;var ZMSG_chhisfirstpage=false;var ZMSG_chhislastpage=false;function ZMSGUI(){}ZMSGUI.getZindex=function(){if(WebMessanger.setzindex>999){return WebMessanger.setzindex-1}else{return 499}};ZMSGUI.generateNewUI=function(){var a='<b class="wmsouterrtop"><b class="wmsr1"></b><b class="wmsr2"></b><b class="wmsr3"></b><b class="wmsr4"></b></b><div class="wmsouterdiv wmscomstl"><table cellpadding="0" cellspacing="0" width="100%" class="wmsoutertbl"><thead><th><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmscloseicon" title="'+WmsResource.getRealValue("Close")+'" onClick="ZMSGUI.hidenew();" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsheadingicon" title="'+WmsResource.getRealValue("Zoho_Feeds")+'" /><span class="wmsheading wmscomstl">'+WmsResource.getRealValue("Zoho_Feeds")+' (<label id="zfdscnt">0</label> '+WmsResource.getRealValue("New")+')<font style="font-weight:normal"> (<a href="javascript:;" onClick="ZMSGUI.launchHistory();">'+WmsResource.getRealValue("Feed_History")+'</a>)</font></span></th></thead><tbody><tr><td><div class="wmsflowingdiv wmscomstl" id="zfdsnew_cont" onclick="ZMSGUI.shownew();"></div></td></tr></tbody><tfoot><tr><td align="center"><input type="button" value="'+WmsResource.getRealValue("Close")+'" class="wmsbtn" onClick="ZMSGUI.hidenew();" /></td></tr></tfoot></table></div>';return a};ZMSGUI.generateHistoryUI=function(){var a='<b class="wmsouterrtop"><b class="wmsr1"></b><b class="wmsr2"></b><b class="wmsr3"></b><b class="wmsr4"></b></b><div class="wmsouterdiv wmscomstl"><table cellpadding="0" cellspacing="0" width="100%" class="wmsoutertbl"><thead><th><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmscloseicon" onClick="ZMSGUI.hidehis();" title="'+WmsResource.getRealValue("Close")+'" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsheadingicon" title="'+WmsResource.getRealValue("Zoho_Feeds")+'" /><span class="wmsheading wmscomstl" onclick="ZMSGUI.showhis();">'+WmsResource.getRealValue("Zoho_Feeds")+" - "+WmsResource.getRealValue("History")+'</span></th></thead><tbody><tr><td class="headertd wmscomstl" style="padding-bottom:10px;"><span class="wmssrchhdr">'+WmsResource.getRealValue("Search")+' : </span><form onSubmit="javascript:return ZMSGUI.searchHis();"><input id="zmsgsearchtxt" type="text" class="wmsoptiontext" /><select class="wmsoptioncls" id="zmsgsearch"><option value="all">'+WmsResource.getRealValue("All")+'</option><option value="searchstr">'+WmsResource.getRealValue("Message")+'</option><option value="sender">'+WmsResource.getRealValue("Sender")+'</option></select><input type="button" value="'+WmsResource.getRealValue("Go")+'" class="wmsbtn" style="margin:0px 5px 0px 0px;" onClick="ZMSGUI.searchHis();"/></form></td></tr><tr><td><div class="wmsoffflowingdiv wmscomstl" onclick="ZMSGUI.showhis();" id="zfdshis_cont"></div></td></tr><tr><td class="footertd wmscomstl" id="zmsghisnav">&nbsp;</td></tr></tbody><tfoot><tr><td align="center"><input type="button" value="'+WmsResource.getRealValue("Close")+'" class="wmsbtn" onClick="ZMSGUI.hidehis();"/></td></tr></tfoot></table></div>';return a};ZMSGUI.fillNavigation=function(g){var f="";var h=1;var e=ZMSG_CURRPAGE-1;var b=ZMSG_CURRPAGE+1;var c=((g%ZMSG_MSGPERPAGE)!=0)?((g-g%ZMSG_MSGPERPAGE)/ZMSG_MSGPERPAGE)+1:((g-g%ZMSG_MSGPERPAGE)/ZMSG_MSGPERPAGE);var a=((ZMSG_CURRPAGE*ZMSG_MSGPERPAGE)>g)?g:(ZMSG_CURRPAGE*ZMSG_MSGPERPAGE);if(ZMSG_CURRPAGE<=1){f='<span class="wmsleftashtext">'+WmsResource.getRealValue("First")+'</span><span class="wmsleftashtext">'+WmsResource.getRealValue("Previous")+"</span>"}else{f='<span class="wmsleftashtext wmslnkselected" onclick="ZMSGUI.gotoPage('+h+');">'+WmsResource.getRealValue("First")+'</span><span class="wmsleftashtext wmslnkselected" onclick="ZMSGUI.gotoPage('+e+');">'+WmsResource.getRealValue("Previous")+"</span>"}if(ZMSG_CURRPAGE*ZMSG_MSGPERPAGE>=g){f+='<span class="wmsrightashtext">'+WmsResource.getRealValue("Last")+'</span><span class="wmsrightashtext">'+WmsResource.getRealValue("Next")+"</span>"}else{f+='<span class="wmsrightashtext wmslnkselected" onclick="ZMSGUI.gotoPage('+c+');">'+WmsResource.getRealValue("Last")+'</span><span class="wmsrightashtext wmslnkselected" onclick="ZMSGUI.gotoPage('+b+');">'+WmsResource.getRealValue("Next")+"</span>"}f+='<span style="margin-left:40px;">'+WmsResource.getRealValue("Showing_$1_$2_of_$3",""+((ZMSG_CURRPAGE-1)*ZMSG_MSGPERPAGE+1)+","+a+","+g+"")+"</span>";document.getElementById("zmsghisnav").innerHTML=f};ZMSGUI.getHisNav=function(){if(ZMSG_SEARCH){var a="zmsgcount"+cadapter+"?"+ZMSG_SEARCHURL}else{var a="zmsgcount"+cadapter}WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};ZMSGUI.NewMsgUIobj=function(dataobj,msgno){if(dataobj==null){return}var ocurdiv=document.createElement("div");ocurdiv.className="wmscurv";try{dataobj.ATTACHMENTS=eval("("+dataobj.ATTACHMENTS+")")}catch(ee){dataobj.ATTACHMENTS=null}ZMSG_DATAOBJ[msgno]=dataobj;dataobj=ZMSGUI.formatMSG(dataobj);var content='<b class="wmsrtop"><b class="wmsr1"></b><b class="wmsr2"></b><b class="wmsr3"></b><b class="wmsr4"></b></b><div class="wmsinnerdiv"><p class="wmspline">'+dataobj.STATUS+""+dataobj.MSG+'</p><span class="wmsashtxtright">('+dataobj.TIME+")</span>";if(ZMSGUI.trim(dataobj.URL)!=""&&ZMSGUI.trim(dataobj.URLSTRING)!=""){content+='<a href="'+dataobj.URL+'" target="_blank" onClick="javascript:return ZMSGUI.openfeed('+msgno+",'new');\">"+dataobj.URLSTRING+"</a>"}else{if(ZMSGUI.trim(dataobj.URL)!=""){content+='<a href="'+dataobj.URL+'" target="_blank" onClick="javascript:return ZMSGUI.openfeed('+msgno+",'new');\">"+dataobj.URL+"</a>"}else{if(ZMSGUI.trim(dataobj.URLSTRING)!=""){content+=dataobj.URLSTRING}}}content+='</div><b class="wmsrbottom"><b class="wmsr4"></b><b class="wmsr3"></b><b class="wmsr2"></b><b class="wmsr1"></b></b>';ocurdiv.innerHTML=content;return ocurdiv};ZMSGUI.HisMsgUIobj=function(dataobj,msgno){if(dataobj==null){return}var ocurdiv=document.createElement("div");ocurdiv.className="wmscurv";try{dataobj.ATTACHMENTS=eval("("+dataobj.ATTACHMENTS+")")}catch(ee){dataobj.ATTACHMENTS=null}ZMSG_DATAOBJ[msgno]=dataobj;dataobj=ZMSGUI.formatMSG(dataobj);var content='<b class="wmsrtop"><b class="wmsr1"></b><b class="wmsr2"></b><b class="wmsr3"></b><b class="wmsr4"></b></b><div class="wmsoffinnerdiv"><p class="wmspline">'+dataobj.STATUS+""+dataobj.MSG+'</p><span class="wmsashtxtright">('+dataobj.TIME+")</span>";if(ZMSGUI.trim(dataobj.URL)!=""&&ZMSGUI.trim(dataobj.URLSTRING)!=""){content+='<a href="'+dataobj.URL+'" target="_blank" onClick="javascript:return ZMSGUI.openfeed('+msgno+",'history');\">"+dataobj.URLSTRING+"</a>"}else{if(ZMSGUI.trim(dataobj.URL)!=""){content+='<a href="'+dataobj.URL+'" target="_blank" onClick="javascript:return ZMSGUI.openfeed('+msgno+",'history');\">"+dataobj.URL+"</a>"}else{if(ZMSGUI.trim(dataobj.URLSTRING)!=""){content+=dataobj.URLSTRING}}}content+='</div><b class="wmsrbottom"><b class="wmsr4"></b><b class="wmsr3"></b><b class="wmsr2"></b><b class="wmsr1"></b></b>';ocurdiv.innerHTML=content;return ocurdiv};ZMSGUI.openfeed=function(c,a){var b=ZMSG_DATAOBJ[c];try{if(a=="push"){if(ZMSG_MSGCNT==1){ZMSGUI.hidenew()}}}catch(f){}return Collaboration.openURL(b.URL,b.URLSTRING,b.ATTACHMENTS,b.PRODID)};ZMSGUI.formatMSG=function(dataobj){var sender="";var dname;try{sender=dataobj.SENDER;if(sender!=null&&sender!=""){try{dname=dataobj.DNAME}catch(e){}if(!isNaN(sender)){dname=WebMessanger.getContactName(sender,dname)}else{dname=(dname!=undefined&&dname!="")?dname:sender}}}catch(e){}if(dataobj.PARAMS!=""){dataobj.MSG=(dname!=undefined&&dname!="")?WmsResource.getRealData(dataobj.MSG,dataobj.PARAMS)+"<span id='wmsfeedsender' class='wmsfeedsender'><span> - </span><a href='javascript:;' onClick='WebMessanger.chat(\""+sender+"\");'>"+dname+"</a></span>":WmsResource.getRealData(dataobj.MSG,dataobj.PARAMS)}else{var Regsender=eval("/"+sender+" /i");dataobj.MSG=(dataobj.MSG.search(Regsender)==0)?dataobj.MSG.replace(Regsender,""):dataobj.MSG;dataobj.MSG=(dname!=undefined&&dname!="")?WmsResource.getRealData(dataobj.MSG)+"<span id='wmsfeedsender' class='wmsfeedsender'><span> - </span><a href='javascript:;' onClick='WebMessanger.chat(\""+sender+"\");'>"+dname+"</a></span>":WmsResource.getRealData(dataobj.MSG)}dataobj.TIME=MyDate.formatDTTime(dataobj.TIME);dataobj.STATUS=ZMSGUI.getStatus(dataobj.STATUS,dataobj.SENDER);return dataobj};ZMSGUI.pushMsgUIobj=function(b){if(b==null){return}ZMSG_DATAOBJ[ZMSG_MSGNO]=b;b=ZMSGUI.formatMSG(b);var a='<div class="wmscurv"><b class="wmsrtop"><b class="wmsr1"></b><b class="wmsr2"></b><b class="wmsr3"></b><b class="wmsr4"></b></b><div class="wmsinnerdiv"><p class="wmspline">'+b.STATUS+""+b.MSG+'</p><span class="wmsashtxtright">('+b.TIME+")</span>";if(ZMSGUI.trim(b.URL)!=""&&ZMSGUI.trim(b.URLSTRING)!=""){a+='<a href="'+b.URL+'" target="_blank" onClick="javascript:return ZMSGUI.openfeed('+ZMSG_MSGNO+",'push');\">"+b.URLSTRING+"</a>"}else{if(ZMSGUI.trim(b.URL)!=""){a+='<a href="'+b.URL+'" target="_blank" onClick="javascript:return ZMSGUI.openfeed('+ZMSG_MSGNO+",'push');\">"+b.URL+"</a>"}else{if(ZMSGUI.trim(b.URLSTRING)!=""){a+=b.URLSTRING}}}a+='</div><b class="wmsrbottom"><b class="wmsr4"></b><b class="wmsr3"></b><b class="wmsr2"></b><b class="wmsr1"></b></b></div>';return a};ZMSGUI.getStatus=function(a,b){var c='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsinfoicon" title="'+WmsResource.getRealValue("Zoho_Info")+'"/>';if(ZMSGUI.trim(b)==""){return c}try{switch(a){case"1":c='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmszeticon" onClick="WebMessanger.chat(\''+b+'\');" title="'+b+" - "+WmsResource.getRealValue("Online")+'"/>';break;case"0":c='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsofficon" onClick="WebMessanger.chat(\''+b+'\');" title="'+b+" - "+WmsResource.getRealValue("Offline")+'"/>';break;case"2":c='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsinfoicon" title="'+WmsResource.getRealValue("Zoho_Info")+'"/>';break;default:c='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsinfoicon" title="'+WmsResource.getRealValue("Zoho_Info")+'"/>'}}catch(f){}return c};ZMSGUI.launchNew=function(){if(!ZMSG_NEW){ozfdsnew=document.createElement("div");ozfdsnew.style.display="none";ozfdsnew.className="wmsoutercurv wmscomstl";ozfdsnew.id="zfdsnew";document.body.appendChild(ozfdsnew)}ozfdsnew.innerHTML=ZMSGUI.generateNewUI();ozfdsnewcont=document.getElementById("zfdsnew_cont");ZMSG_NEW=true;ZMSGUI.refreshNew()};ZMSGUI.launchNewswap=function(){ozfdsnewswap=document.createElement("div");ozfdsnewswap.style.display="none";ozfdsnewswap.id="zfdsnewswap";document.body.appendChild(ozfdsnewswap)};ZMSGUI.fillNew=function(e){if(e==null){return}var b=e.ZohoMessages;if(b==null){return}var a=b.length;if(a<=0){return}ozfdsnewcont.innerHTML="";for(var c=0;c<a;c++){ozfdsnewcont.appendChild(ZMSGUI.NewMsgUIobj(b[c],c))}ZMSG_MSGCNT=a;document.getElementById("zfdscnt").innerHTML=ZMSG_MSGCNT;ZMSGUI.shownew()};ZMSGUI.refreshNew=function(){var a="unreadzmsg"+cadapter+"?pageno=1&limit=0";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};ZMSGUI.launchHistory=function(){try{if(ZohoFeedImpl.handleFeedHistoryUI()){return}}catch(a){}if(document.getElementById("zchhis")!=null){ZMSGUI.hidechathis()}try{ZMSGUI.hidenew()}catch(a){}ZMSG_CURRPAGE=1;if(!ZMSG_HIS){ozfdshis=document.createElement("div");ozfdshis.style.display="none";ozfdshis.className="wmsofflinecurv wmscomstl";ozfdshis.id="zfdshis";document.body.appendChild(ozfdshis)}ozfdshis.innerHTML=ZMSGUI.generateHistoryUI();ZMSG_HIS=true;ZMSG_SEARCH=false;ZMSG_SEARCHURL="";document.getElementById("zmsgsearch").selectedIndex=0;document.getElementById("zmsgsearchtxt").value="";ZMSGUI.refreshHis();ZMSGUI.centerPosition(ozfdshis)};ZMSGUI.fillHistory=function(e){var g=document.getElementById("zfdshis_cont");g.innerHTML="&nbsp;";if(ZMSG_SEARCH){g.innerHTML="&nbsp;";document.getElementById("zmsghisnav").innerHTML="&nbsp;"}if(e==null){g.innerHTML='<div class="wmsfdsempty">'+WmsResource.getRealValue("No_feeds_found")+"</div>";if(ZMSG_SEARCH){var f=document.getElementById("zmsgsearchtxt").value;g.innerHTML='<div class="wmsfdsempty">'+WmsResource.getRealValue("No_results_match_for_your_search")+' "'+f+'"</div>'}ZMSGUI.showhis();return}var b=e.ZohoMessages;if(typeof b=="undefined"){g.innerHTML='<div class="wmsfdsempty">'+WmsResource.getRealValue("No_feeds_found")+"</div>";if(ZMSG_SEARCH){var f=document.getElementById("zmsgsearchtxt").value;g.innerHTML='<div class="wmsfdsempty">'+WmsResource.getRealValue("No_results_match_for_your_search")+' "'+f+'"</div>'}ZMSGUI.showhis();return}var a=b.length;if(a<=0){g.innerHTML='<div class="wmsfdsempty">'+WmsResource.getRealValue("No_feeds_found")+"</div>";if(ZMSG_SEARCH){var f=document.getElementById("zmsgsearchtxt").value;g.innerHTML='<div class="wmsfdsempty">'+WmsResource.getRealValue("No_results_match_for_your_search")+' "'+f+'"</div>'}ZMSGUI.showhis();return}ZMSGUI.getHisNav();for(var c=0;c<a;c++){g.appendChild(ZMSGUI.HisMsgUIobj(b[c],c))}ZMSGUI.showhis()};ZMSGUI.refreshHis=function(){var b="zmsg"+cadapter+"?pageno="+ZMSG_CURRPAGE+"&limit="+ZMSG_MSGPERPAGE;if(ZMSG_SEARCH){b=b+"&"+ZMSG_SEARCHURL}var a=b;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};ZMSGUI.clearSearch=function(){ZMSG_SEARCH=false;ZMSG_SEARCHURL="";ZMSG_CURRPAGE=1;document.getElementById("zmsgsearch").selectedIndex=0;document.getElementById("zmsgsearchtxt").value="";ZMSGUI.refreshHis()};ZMSGUI.searchHis=function(){ZMSG_CURRPAGE=1;var e="zmsg"+cadapter+"?pageno="+ZMSG_CURRPAGE+"&limit="+ZMSG_MSGPERPAGE;var c=document.getElementById("zmsgsearch").value;var g=document.getElementById("zmsgsearchtxt").value;if(ZMSGUI.trim(g)==""){ZMSG_SEARCH=false;ZMSG_SEARCHURL="";var b=e;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix());return false}var f=encodeURIComponent(g);var a="";switch(c){case"searchstr":a=a+"searchstr="+f;break;case"category":a=a+"category="+f;break;case"sender":a=a+"sender="+f;break;case"all":a=a+"searchstr="+f;a=a+"&category="+f;a=a+"&sender="+f;break}ZMSG_SEARCH=true;ZMSG_SEARCHURL=a;var b=e+"&"+ZMSG_SEARCHURL;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix());return false};ZMSGUI.viewTranscript=function(chid,makeread,partial){ZMSG_CLKUNREAD=true;var url="viewwmstranscript"+cadapter+"?chid="+chid+"&tzoffset="+_TZOFFSET+"&makeread="+makeread+"&partial="+partial+"&lang="+WebMessanger.language+"&ccode="+WebMessanger.countrycode+"&view=unread&displayid="+chid;if(WebMessanger.getDateFormat()!=undefined){url=url+"&dateformat="+encodeURIComponent(WebMessanger.getDateFormat())}var transres=eval(wmssyncajx.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(url)+nocachefix()));var transcript=transres[0]["objString"]["response"];ZMSGUI.updateTranscript(chid,transcript)};ZMSGUI.updateTranscript=function(a,c){try{c=HtmlTag.cure(c)}catch(b){}c=Smiley.replace(c);c=Message.replaceAttURL(c);ozfdsunreaddata.innerHTML=c;ozfdsunreadreply.onclick=function(){WebMessanger.join(a)};document.getElementById("offcont"+a).className="sel"};ZMSGUI.gotoPage=function(a){ZMSG_CURRPAGE=a;ZMSGUI.refreshHis()};ZMSGUI.add=function(b){try{if(ozfdsnot.style.display=="none"&&ozfdsnew.style.display=="none"&&ozfdshis.style.display=="none"){ZMSG_DATAOBJ=Object()}}catch(a){}ozfdsnewswap.innerHTML=ZMSGUI.pushMsgUIobj(b)+ozfdsnewswap.innerHTML;ZMSG_NEWMSGCNT++;ZMSGUI.notify()};ZMSGUI.deleteEmbedFeedUI=function(){try{if(ozfdsnot.style.display=="block"){ozfdsnot.style.display="none"}}catch(a){}};ZMSGUI.zoomnotify=function(b){b.style.display="none";try{ZMSGUI.hidehis()}catch(a){}ozfdsnewcont.innerHTML=ozfdsnewswap.innerHTML+ozfdsnewcont.innerHTML;ZMSG_MSGCNT=ZMSG_MSGCNT+ZMSG_NEWMSGCNT;document.getElementById("zfdscnt").innerHTML=ZMSG_MSGCNT;ozfdsnewswap.innerHTML="";ZMSG_NEWMSGCNT=0;ZMSGUI.shownew()};ZMSGUI.notify=function(){try{if(ZohoFeedImpl.handleUnreadFeedUI()){return}}catch(b){}if(!ZMSG_NOTIFY){ozfdsnot=document.createElement("div");ozfdsnot.style.position="absolute";ozfdsnot.style.zIndex=30;ozfdsnot.style.right="3px";ozfdsnot.style.bottom="-35px";if(ie){ozfdsnot.onclick=function(){ZMSGUI.zoomnotify(this)}}else{ozfdsnot.setAttribute("onclick","ZMSGUI.zoomnotify(this)")}document.body.appendChild(ozfdsnot)}ZMSG_MSGNO++;ZMSG_NOTIFY=true;var a="https://img.zohostatic.com/ichat/v42_https/images/"+((WebMessanger.getRebrand()!="")?"rebrand/"+WebMessanger.getRebrand()+"/":"")+"feed_blink.gif?nocache="+ZMSG_MSGNO;ozfdsnot.innerHTML='<div class="wmsfeedNotiDiv"><div style="float:left;width:26px;margin:4px;"><img src="'+a+'" width="26" height="25" align=""></div><div style="margin-top:3px;"><b>'+WmsResource.getRealValue("Feeds")+'</b><br><span class="wmsfCnt">'+ZMSG_NEWMSGCNT+" "+WmsResource.getRealValue("New")+"</span></div></div>";if(ozfdsnot.style.display!="block"){ozfdsnot.style.bottom="-35px";ozfdsnot.style.display="block";try{ozfdsnot.style.zIndex=ZMSGUI.getZindex()}catch(b){}ZMSGUI.scrollnotify(0)}};ZMSGUI.scrollnotify=function(pos){var currbot=eval(ozfdsnot.style.bottom.replace("px",""));ozfdsnot.style.bottom=currbot+pos+"px";if(currbot<0){setTimeout("ZMSGUI.scrollnotify(3)",50)}};ZMSGUI.shownew=function(){WmsUIImpl.handleUnreadFeeds();var a=document.getElementById("zfdsnew");try{a.style.zIndex=ZMSGUI.getZindex()}catch(b){}a.style.display="block";if(ZMSGUI.changeposozfdsnew){ZMSGUI.changeposition(a,ZMSGUI.ozfdsnewleft,ZMSGUI.ozfdsnewtop)}else{ZMSGUI.center(a)}};ZMSGUI.hidenew=function(){ozfdsnewcont.innerHTML="";document.getElementById("zfdscnt").innerHTML=0;ZMSG_MSGCNT=0;ozfdsnew.style.display="none"};ZMSGUI.showhis=function(){WmsUIImpl.handleFeedHistory();var a=document.getElementById("zfdshis");try{a.style.zIndex=ZMSGUI.getZindex()}catch(b){}a.style.display="block";if(ZMSGUI.changeposozfdshis){ZMSGUI.changeposition(a,ZMSGUI.ozfdshisleft,ZMSGUI.ozfdshistop)}else{ZMSGUI.center(a)}};ZMSGUI.hidehis=function(){document.getElementById("zfdshis").style.display="none"};ZMSGUI.init=function(){setTimeout("ZMSGUI.launchNew();",1000);setTimeout("ZMSGUI.launchNewswap();",1010);ZMSGUI.changeposozfdshis=false;ZMSGUI.changeposozfdsnew=false};ZMSGUI.centerPosition=function(b){var a="";if(b.id=="zchhis"){a=ZMSG_chhis}else{if(b.id=="zfdshis"){a=document.getElementById("zfdshis")}else{if(b.id=="zfdsunread"){a=document.getElementById("zfdsunread")}}}if(ie){addEvent(window,"scroll",function(){ZMSGUI.center(a)})}else{document.addEventListener("scroll",function(){ZMSGUI.center(a)},false)}};ZMSGUI.center=function(h){var c="800px";var b="600px";c=window.innerWidth!=null?window.innerWidth:document.documentElement!=null?document.documentElement.clientWidth||document.body.clientWidth:null;b=window.innerHeight!=null?window.innerHeight:document.documentElement!=null?document.documentElement.clientHeight||document.body.clientHeight:null;var a=h.offsetWidth;var g=h.offsetHeight;var f=parseInt(c/2)-parseInt(a/2);var l=parseInt(b/2)-parseInt(g/2);var e=document.body.scrollTop||document.documentElement.scrollTop;l+=e;h.style.left=f+"px";h.style.top=l+"px"};ZMSGUI.trim=function(a){while(a.substring(0,1)==" "||a.substring(0,1)=="\n"){a=a.substring(1,a.length)}while(a.substring(a.length-1,a.length)==" "||a.substring(a.length-1,a.length)=="\n"){a=a.substring(0,a.length-1)}return a};ZMSGUI.positionFeedHistory=function(b,a){ZMSGUI.changeposozfdshis=true;ZMSGUI.ozfdshisleft=b;ZMSGUI.ozfdshistop=a};ZMSGUI.positionUnreadFeeds=function(b,a){ZMSGUI.changeposozfdsnew=true;ZMSGUI.ozfdsnewleft=b;ZMSGUI.ozfdsnewtop=a};ZMSGUI.changeposition=function(c,f,a){try{c.style.left=f;c.style.top=a}catch(b){}};ZMSGUI.generateUnreadUI=function(){var a='<b class="wmsouterrtop"><b class="wmsr1"></b><b class="wmsr2"></b><b class="wmsr3"></b><b class="wmsr4"></b></b><div class="wmsouterdiv wmscomstl"><table cellpadding="0" cellspacing="0" width="100%" class="wmsoutertbl"><thead><th><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmscloseicon" onClick="ZMSGUI.hideunread();" title="'+WmsResource.getRealValue("Close")+'" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsunreadicon" title="'+WmsResource.getRealValue("Unread_Chat")+'" /><span class="wmsheading wmscomstl" onclick="ZMSGUI.showunread();">'+WmsResource.getRealValue("Unread_Chat")+' </span></th></thead><tbody><tr><td class="wms-font"><div class="offline-chat"><b>'+WmsResource.getRealValue("Name")+"</b><strong>"+WmsResource.getRealValue("Date")+'</strong></div><ul class="unread-chat" onclick="ZMSGUI.showunread();" id="zfdsunread_cont" > </ul><div class="offline-chatdivder" ></div><div class="offline-chatvisible" id="zfdsunread_data" ></div><div class="offline-chatFooter"><input class="wmsbtnunread" type="button" value="'+WmsResource.getRealValue("Reply")+'"  id="zfdsunreadreply" /><input class="wmsbtnunread" style="margin-right:5px;" type="button" value="'+WmsResource.getRealValue("Mark_all_read")+'" onClick="WebMessanger.markAllRead()" /><input class="wmsbtnunread"  onClick="ZMSGUI.hideunread();" type="button" value="'+WmsResource.getRealValue("Close")+'" /></div></td></tr></tbody></table></div>';return a};ZMSGUI.showunread=function(){try{zfdsunread.style.zIndex=ZMSGUI.getZindex();zfdsunread.style.display="block";ZMSGUI.center(zfdsunread)}catch(a){}};ZMSGUI.hideunread=function(){try{zfdsunread.style.display="none";if(ZMSG_CLKUNREAD){ZMSGUI.updateUnreadChat();ZMSG_CLKUNREAD=false}}catch(a){}};ZMSGUI.getOfflineMessage=function(){var a="getunreadchats"+cadapter+"?pno=1&lim=20&force=true";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix());return true};ZMSGUI.fillunreadChat=function(e){try{ZMSGUI.unreadChat();var l=e.ChatTranscript;var f="";for(var h in l){if(typeof l[h]!="object"){continue}var b=l[h];var a=b.CHATID;var c='<li><a id="offcont'+b.CHATID+'" onclick="ZMSGUI.displayChat(this,\''+b.CHATID+'\');"  href="javascript:;" ><label>'+b.TITLE+"</label><span>"+MyDate.formatDTTime(b.LMTIME)+"</span></a></li>";f+=c}ozfdsunreadcont.innerHTML=f;ZMSGUI.showunread()}catch(g){}};ZMSGUI.displayChat=function(c,a){try{c.className="sel";ZMSGUI.viewTranscript(a,true,true)}catch(b){}};ZMSGUI.unreadChat=function(){try{ZMSGUI.hideunread()}catch(a){}if(!ZMSG_UNREAD){zfdsunread=document.createElement("div");zfdsunread.style.display="none";zfdsunread.className="wmsofflinecurv wmscomstl wmsborderbox";zfdsunread.id="zfdsunread";document.body.appendChild(zfdsunread)}zfdsunread.innerHTML=ZMSGUI.generateUnreadUI();ozfdsunreadcont=document.getElementById("zfdsunread_cont");ozfdsunreaddata=document.getElementById("zfdsunread_data");ozfdsunreadreply=document.getElementById("zfdsunreadreply");ZMSG_UNREAD=true;ZMSGUI.centerPosition(zfdsunread)};ZMSGUI.updateUnreadChat=function(){var a="updateunreadcount"+cadapter;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};ZMSGUI.markAllRead=function(c){try{var b=ozfdsunreadcont.getElementsByTagName("LI");for(var a=0;a<b.length;a++){b[a].getElementsByTagName("A")[0].className="sel"}}catch(e){}};ZMSGUI.showChatHistory=function(){if(document.getElementById("zchhis")!=null){return}if(document.getElementById("zfdshis")!=null){ZMSGUI.hidehis()}ZMSG_chhis=document.createElement("div");ZMSG_chhis.style.display="block";ZMSG_chhis.style.width="580px";ZMSG_chhis.style.position="absolute";ZMSG_chhis.id="zchhis";ZMSG_chhis.style.zIndex=ZMSGUI.getZindex();ZMSG_CHATPGNO=1;document.body.appendChild(ZMSG_chhis);var a='<b class="wmsouterrtop"><b class="wmsr1"></b><b class="wmsr2"></b><b class="wmsr3"></b><b class="wmsr4"></b></b><div class="wmsouterdiv wmscomstl"><table cellpadding="0" cellspacing="0" width="100%" class="wmsoutertbl"><thead><th><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmscloseicon" onClick="ZMSGUI.hidechathis();" title="'+WmsResource.getRealValue("Close")+'" /><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="chathstryimg" title="'+WmsResource.getRealValue("Chat_History")+'" /><span class="wmsheading wmscomstl">'+WmsResource.getRealValue("Chat_History")+'</span></th></thead><tbody><tr><td class="headertd wmscomstl wms-hdpadbot"><div style="width:100%; position:relative; display:inline-block;"><div class="wms-histrymn"><form onsubmit="javascript:return ZMSGUI.searchChatHistory()"><input id="zchathistorytxt" type="text" class="wmsoptiontext wms-bdrrhtn" value='+WmsResource.getRealValue("Search")+" onclick=\"util.checkEmpty(this,'"+WmsResource.getRealValue("Search")+"')\" onblur=\"util.fillDefault(this,'"+WmsResource.getRealValue("Search")+'\')" onkeydown="ZMSGUI.handleEvent(event)"/><input type="button" value="'+WmsResource.getRealValue("Go")+'" class="wmsbtn wms-go_btn" onClick="ZMSGUI.searchChatHistory();"/></form><label><a href="javascript:;"></a></label><div id="wmschhissearchnotifier" class="wmssearchnotifier"></div></div><div class="wms-toprhtprt"  id="wmschatcontinue" ><a href="javascript:;"></a></div></td></tr><tr><td><div class="wmsoffflowingdiv wmscomstl"  style="height:321px; overflow: hidden; padding-top:0" id="zchhis_cont"><div id="chathistorywin" class="wmsoffflowingdiv wmscomstl wmschatwin" onkeyup="ZMSGUI.handleKeyEvent(event)"><div class="wms-titlenamemn"><div onClick="ZMSGUI.getDropDown(event)" class="wmsselecthstry"><a href="javascript:;"><input type="checkbox" class="wmsselecthstryinput"  id="wmschhisselectcheckbox"  onclick="ZMSGUI.checkCheckBox(this);"/><img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmshistory_arrow" align="absmiddle"/></a></div><div onClick="ZMSGUI.selectedChatIds()" class="wmsdelete_btn"><a href="javascript:;">'+WmsResource.getRealValue("Delete")+'</a></div><div class="wmshistory_drpdwnmain" id="wmschhisdeletedropdown" style="display:none;*z-index:9999;"><a id="read" onclick="ZMSGUI.selectChatDelete(this.id)" href="javascript:;">'+WmsResource.getRealValue("Read")+'</a><a id="unread" onclick="ZMSGUI.selectChatDelete(this.id)" href="javascript:;">'+WmsResource.getRealValue("Unread")+'</a></div></div><div id="translist"></div></div><div id="wmschshtransmsg" class="wmsoffflowingdiv wmscomstl" style="width:287px;float:left;height:322px;*width:284px"></div></div></div></td></tr><tr><td class="footertd wmscomstl wmsftrpadng" id="zchhisnav">&nbsp;</td></tr></tbody><tfoot><tr><td align="center"><input type="button" value="'+WmsResource.getRealValue("Close")+'" class="wmsbtn" onClick="ZMSGUI.hidechathis();"/></td></tr></tfoot></table></div>';ZMSG_chhis.innerHTML=a;WebMessanger.getChatTranscript();ZMSGUI.center(ZMSG_chhis);ZMSGUI.centerPosition(ZMSG_chhis);ZMSGUI.setChhisFocus()};ZMSGUI.handleEvent=function(b){if(!b){b=window.event}var a=(window.event)?b.keyCode:b.which;if(a==40||a==38){if(ZMSGUI.checkChatHistory()){if(mz){b.preventDefault()}if(ie){b.cancelBubble=true;b.returnValue=false}ZMSGUI.handleKeyEvent(a)}}else{if(a==27){ZMSGUI.hidechathis();WMSKeyHandler.cancelEvent(b)}}};ZMSGUI.setChhisFocus=function(){var a=document.getElementById("zchathistorytxt");a.select();a.focus()};ZMSGUI.checkCheckBox=function(a){a.className="wmsselecthstryinput";if(a.checked){ZMSGUI.selectChatDelete("all")}else{ZMSGUI.selectChatDelete("none")}};ZMSGUI.hidechathis=function(){document.body.removeChild(ZMSG_chhis);ZMSG_chhis=null;ZMSG_SEARCHVALUE="";ZMSG_chatcountchecked=false};ZMSGUI.populate=function(C){var l=C.getRowsForTable("ChatTranscript");var r=C.getRowsForTable("UnreadChat");ZMSG_transContent=document.getElementById("translist");var b=document.getElementById("wmschhissearchnotifier");var g=ZMSG_CHATCOUNT;var B=ZMSG_SEARCHVALUE;b.innerHTML="";var a="<div valign='middle'  class='wmsnohstrynotify' >"+WmsResource.getRealValue("Chat_History_archives_all_your_chat_transcripts.You_can_search_history_for_past_chats")+"</div>";if(B!=""){a='<div valign="middle" class="wmsnohstrynotify">'+WmsResource.getRealValue("No_results_match_for_your_search")+"</div>";var A='<span class="wmsemptysearchnotifier">'+WmsResource.getRealValue("Search_results_for")+":</span><b>"+B+'</b><a href="javascript:;" onclick="ZMSGUI.searchChatHistory(\'clearsearch\');">'+WmsResource.getRealValue("Clear_Search")+"</a>";b.innerHTML=A}else{b.innerHTML='<div class="wmsemptysearchnotifier">'+WmsResource.getRealValue("Search_through_your_chat_history")+"</div>"}ZMSG_transContent.innerHTML="";var q=document.getElementById("wmschatcontinue");var v=ZMSG_chhis.getElementsByTagName("INPUT");for(w in v){if(v[w]==undefined){continue}if(v[w].id=="wmschhisselectcheckbox"){selectchbox=v[w];break}}if(selectchbox.checked){selectchbox.checked=false}if(q.innerHTML!=" "){q.innerHTML="";var n=ZMSG_chhis.getElementsByTagName("DIV");for(w in n){if(n[w]==undefined||n[w]==null){continue}if(n[w].id=="wmschshtransmsg"){n[w].innerHTML="";break}}}if(l==null||l==undefined){ZMSG_transContent.innerHTML=a;var p=ZMSG_CHATPGNO;ZMSGUI.checkNavigation(l,ZMSG_chhis);if(p!=1){ZMSG_CHATPGNO-=1;WebMessanger.getChatTranscript()}}for(var w=0;w<l.length;w++){if(w==g){continue}var o=l[w];ZMSG_CHATTOTALOBJ=w+1;var z="";var h="javascript:ZMSGUI.deleteChat('"+o.CHATID+"');";var s="trans_"+o.CHATID;var c=o.CT_ID;if(ZMSGUI.isUnreadChat(r,c)){z="wms-unreaddiv";var f="javascript:ZMSGUI.handleEvents(event,'"+o.CHATID+"',this,true);"}else{z="wms-readdiv";var f="javascript:ZMSGUI.handleEvents(event,'"+o.CHATID+"',this);"}var t='<div  id="'+s+'" tid="'+c+'" cid="'+o.CHATID+'" class="'+z+'" purpose="chattrans"  onclick="'+f+'" onmouseover=ZMSGUI.showchhisDelete(this); onmouseout=ZMSGUI.hidechhisDelete(this) ><input type="checkbox" id="input_'+o.CHATID+'" onclick="ZMSGUI.selectMainChkbox()"/><div id="namedivCID" class="wms-namediv">'+o.TITLE+'</div><span>TRANSTIME</span><img id="transdel" style="position:absolute;right:0px;bottom:4px;display:none;z-index:999;" class="wmshistory_delete" src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" onclick="'+h+'" title="'+WmsResource.getRealValue("Delete_History")+'" /></div>';try{t=t.replace(/TRANSTIME/g,ZMSGUI.chathistoryTime(o.LMTIME))}catch(u){}if(w>0){a=a+t}else{a=t}}ZMSG_transContent.innerHTML=a;ZMSGUI.checkNavigation(l,ZMSG_chhis);ZMSG_selecttransContent=-1};ZMSGUI.selectMainChkbox=function(){var b;var e=0;var c=ZMSG_transContent.getElementsByTagName("INPUT");for(d in c){if(c[d]==undefined){continue}if(c[d].type=="checkbox"){if(c[d].checked){e++}}}var a=ZMSG_chhis.getElementsByTagName("INPUT");for(d in a){if(a[d]==undefined){continue}if(a[d].id=="wmschhisselectcheckbox"){b=a[d];break}}if(e>=1){b.checked=true;if(e==ZMSG_CHATTOTALOBJ){b.className="wmschhischeckboxopacityhigh"}else{b.className="wmschhischeckboxopacitylow"}}else{b.checked=false}};ZMSGUI.showchhisDelete=function(a){a.getElementsByTagName("img")[0].style.display="block";a.style.cursor="default"};ZMSGUI.hidechhisDelete=function(a){a.getElementsByTagName("img")[0].style.display="none"};ZMSGUI.chathistoryTime=function(a){var f=new Date(Number(a));var b=f.getDate();var e=MyDate.getTMonth(f.getMonth());var c=f.getFullYear();var g="";g+=b+"&nbsp;";g+=WmsResource.getRealValue(e)+"&nbsp;";g+=c+"&nbsp;";return g};ZMSGUI.handleEvents=function(g,a,f,c){var b=getSource(g);if(b.id!="transdel"){if(b.type!="checkbox"){ZMSGUI.selectChat(a,f,c)}}};ZMSGUI.selectChat=function(a,g,b){try{var h=document.getElementById("wmschatcontinue");h.innerHTML="";if(ZMSG_PREVOBJECTSELECT!=null){ZMSG_PREVOBJECTSELECT.className="wms-readdiv"}g.className="wms-readdiv";g.className="wms-readdiv-select";ZMSG_PREVOBJECTSELECT=g;var c="javascript:WMSUI.continueChat('"+a+"');";h.innerHTML='<div id="wmschatcontinue"><a  href="javascript:;" onclick="'+c+'">'+WmsResource.getRealValue("Continue_Chat")+"</a></div>";ZMSGUI.viewChatTranscript(b,true,a)}catch(f){}};ZMSGUI.viewChatTranscript=function(makeread,partial,chid){var url="viewwmstranscript"+cadapter+"?chid="+chid+"&tzoffset="+_TZOFFSET+"&partial="+partial+"&lang="+WebMessanger.language+"&ccode="+WebMessanger.countrycode+"&view=history&displayid="+chid;if(makeread!=undefined){url=url+"&makeread="+makeread}if(WebMessanger.getDateFormat()!=undefined){url=url+"&dateformat="+encodeURIComponent(WebMessanger.getDateFormat())}var transres=eval(wmssyncajx.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(url)+nocachefix()));var transcript=transres[0]["objString"]["response"];try{transcript=HtmlTag.cure(transcript)}catch(e){}transcript=Smiley.replace(transcript);transcript=Message.replaceAttURL(transcript);var conele=ZMSG_chhis.getElementsByTagName("DIV");for(d in conele){if(conele[d].id=="wmschshtransmsg"){conele[d].innerHTML=transcript;break}}};ZMSGUI.loadContinueChatTranscript=function(f,h,g,a){if(a=="unread"){g.style.display="none";var e=ozfdsunreaddata.innerHTML;ozfdsunreaddata.innerHTML=h+e;return}var c=ZMSG_PREVOBJECTSELECT.id;c=c.replace(/trans_/g,"");if(c!=f){return}var b=ZMSG_chhis.getElementsByTagName("DIV");for(d in b){if(b[d].id=="wmschshtransmsg"){g.style.display="none";var e=b[d].innerHTML;b[d].innerHTML=h+e;break}}};ZMSGUI.deleteChat=function(a){if(confirm(WmsResource.getRealValue("Are_you_sure_you_wish_to_delete_this_chat"))){WebMessanger.deleteChat(a);ZMSG_chatcountchecked=false}};ZMSGUI.handleDeleteChat=function(){WebMessanger.getChatTranscript()};ZMSGUI.searchChatHistory=function(b){var a=document.getElementById("zchathistorytxt");ZMSG_SEARCHVALUE=a.value;if(ZMSG_SEARCHVALUE==WmsResource.getRealValue("Search")||b=="clearsearch"){ZMSG_SEARCHVALUE="";a.value=WmsResource.getRealValue("Search")}ZMSG_CHATPGNO=1;WebMessanger.getChatTranscript();ZMSG_chatcountchecked=false;ZMSGUI.setChhisFocus();return false};ZMSGUI.checkNavigation=function(l,h){if(l==undefined||l==null){var g=0}else{var g=l.length}ZMSG_CHATTOTAL=g;var b=ZMSG_CHATPGNO;var f=ZMSG_CHATCOUNT;var e=((b-1)*f)+1;var c=e+ZMSG_CHATTOTALOBJ-1;if(g==0){e=0;c=0}var a=' <div class="wmsfooterprt" id="transnav"><div id="trans_next"><a  class="wmsrhttxtprt" purpose="histbtmdiv"   href="javascript:;" onclick="ZMSGUI.getNextPage()" >'+WmsResource.getRealValue("Next")+" >></a></div>";ZMSG_chhisfirstpage=false;ZMSG_chhislastpage=false;a=a+'<div id="trans_prev"><a  purpose="histbtmdiv"  href="javascript:;"  onclick="ZMSGUI.getPrevPage()"  ><< '+WmsResource.getRealValue("Prev")+" </a></div>";a=a+'<div><label class="wmslfttxtwd" purpose="histbtmdiv" style="position:relative;left:-1px">'+e+"--"+c+"</label></div>";if(ZMSG_chatcountchecked==true){a=a+'<div id="wmstrans_total"><label class="wmsmidtxtwd" purpose="histbtmdiv" style="margin:0px 0px 0px -2px">'+ZMSG_CHATS+"</label> </div>"}else{a=a+'<div purpose="histbtmdiv" id="wmstrans_total"><em class="wmsmidtxtwd"><a  purpose="histbtmdiv" href="javascript:;" onclick="ZMSGUI.requestChatCount()" >'+WmsResource.getRealValue("Chat_Count")+"</a></em></div>"}document.getElementById("zchhisnav").innerHTML=a;if(b==1){document.getElementById("trans_prev").innerHTML='<label  purpose="histbtmdiv"><< '+WmsResource.getRealValue("Prev")+" </label>";ZMSG_chhisfirstpage=true}if(g<(f+1)){document.getElementById("trans_next").innerHTML='<label class="wmsrhttxtprt" purpose="histbtmdiv">'+WmsResource.getRealValue("Next")+">> </label>";ZMSG_chhislastpage=true;if(ZMSG_chatcountchecked==true){if((c)!=ZMSG_CHATS){document.getElementById("wmstrans_total").innerHTML='<label class="nextpreempty" purpose="histbtmdiv">'+c+"</label>"}}}};ZMSGUI.getNextPage=function(){ZMSG_CHATPGNO+=1;WebMessanger.getChatTranscript()};ZMSGUI.getPrevPage=function(){if(ZMSG_CHATPGNO!=1){ZMSG_CHATPGNO-=1;WebMessanger.getChatTranscript()}};ZMSGUI.requestChatCount=function(){WebMessanger.getChatCount()};ZMSGUI.showChatCount=function(b){ZMSG_CHATS=b.count;var a=document.getElementById("wmstrans_total");document.getElementById("wmstrans_total").innerHTML='<label class="wmsmidtxtwd" purpose="histbtmdiv" style="margin:0px 0px 0px -2px">'+ZMSG_CHATS+"</label>";ZMSG_chatcountchecked=true};ZMSGUI.selectChatDelete=function(p){var l=ZMSG_transContent;var f=l.getElementsByTagName("input");for(d in f){f[d].checked=false}if(f.length==0){var q="<div valign='middle' class='cntemptymsg' style='margin-top:50%' >"+Resource.getRealValue("No_Chat_History_available")+"</div>";l.innerHTML(q);return}if(p=="all"){for(d in f){f[d].checked="true"}}else{if(p=="read"){var h=false;var b;var g=0;var n=ZMSG_chhis.getElementsByTagName("INPUT");for(d in f){var e=f[d].parentNode;if(e==null||e==undefined){continue}if(e.className=="wms-readdiv"||e.className=="wms-readdiv-select"){f[d].checked=true;h=true;g+=1}}for(d in n){if(n[d].id=="wmschhisselectcheckbox"){b=n[d];break}}if(h==true){b.checked=true;if(g==ZMSG_CHATTOTALOBJ){b.className="wmschhischeckboxopacityhigh"}else{b.className="wmschhischeckboxopacitylow"}}if(h==false&&b.checked){b.checked=false}}else{if(p=="unread"){var h=false;var b;var o=0;var n=ZMSG_chhis.getElementsByTagName("INPUT");for(d in f){var a=f[d].parentNode;if(a==null||a==undefined){continue}if(a.className=="wms-unreaddiv"){f[d].checked=true;h=true;o+=1}}for(d in n){if(n[d].id=="wmschhisselectcheckbox"){b=n[d];break}}if(h==true){b.checked=true;if(o==ZMSG_CHATTOTALOBJ){b.style.opacity=1}else{b.style.opacity=0.5}}if(h==false&&b.checked){b.checked=false}}}}var c=document.getElementById("wmschhisdeletedropdown");WMSUI.addIndocClickcallbackQue("wmschhisdeletedropdown",c,function(r){if(r!="selectchats"){c.style.display="none"}})};ZMSGUI.selectedChatIds=function(){var b=new Object();ZMSG_selectedids=new Array();var a=ZMSG_transContent;var c=a.getElementsByTagName("input");for(d in c){if(c[d].checked){b[d]=c[d].id;if(b[d]==null||b[d]==undefined){continue}b[d]=b[d].replace(/input_/g,"");ZMSG_selectedids.push(b[d])}}if(ZMSG_selectedids.length==1){if(confirm(WmsResource.getRealValue("Are_you_sure_want_to_delete_a_chat"))){WebMessanger.deleteSelectedChats(ZMSG_selectedids);ZMSG_chatcountchecked=false}}else{if(ZMSG_selectedids.length>1){if(confirm(WmsResource.getRealValue("Are_you_sure_want_to_delete_the_chats"))){WebMessanger.deleteSelectedChats(ZMSG_selectedids);ZMSG_chatcountchecked=false}}else{alert(WmsResource.getRealValue("please_select_a_chat"));return}}};ZMSGUI.isUnreadChat=function(a,f){try{for(var g=0;g<a.length;g++){var c=a[g];if(c.CT_ID==f){return true}}}catch(b){}return false};ZMSGUI.getDropDown=function(c){var b="";if(getSource(c).type=="checkbox"){return}var a=ZMSG_chhis.getElementsByTagName("div");for(d in a){if(a[d]==undefined||a[d]==null){continue}if(a[d].id=="wmschhisdeletedropdown"){b=a[d];break}}util.toggle(b);WMSUI.addIndocClickcallbackQue("wmschhisdeletedropdown",b,function(e){if(e!="selectchats"){b.style.display="none"}})};ZMSGUI.markChatAsRead=function(a){var b=zfdsunread;if(b==null||b==undefined){return}if(b.style.display=="block"){try{var f=b.getElementsByTagName("a");for(i=0;i<f.length;i++){if(f[i].id==undefined||f[i].id==null){continue}if(f[i].id=="offcont"+a&&f[i].className!="sel"){f[i].className="sel";break}}}catch(c){}}else{if(ZMSG_chhis.style.display=="block"){ZMSGUI.UpdateUnreadChatInHistory(a)}}};ZMSGUI.clearAllUnreadChats=function(){if(zfdsunread.style.display=="block"){ZMSGUI.markAllRead()}else{if(ZMSG_chhis.style.display=="block"){ZMSGUI.UpdateAllUnreadChatsInHistory()}}};ZMSGUI.UpdateUnreadChatInHistory=function(a){var b=ZMSG_chhis.getElementsByTagName("div");for(i=0;i<b.length;i++){if(b[i].id==undefined||b[i].id==null){continue}if(b[i].id=="trans_"+a){b[i].className="wms-readdiv";break}}};ZMSGUI.UpdateAllUnreadChatsInHistory=function(){try{var b=ZMSG_chhis.getElementsByTagName("DIV");for(var a=0;a<b.length;a++){if(b[a].id.indexOf("trans_")!=-1){b[a].className="wms-readdiv"}}}catch(c){}};ZMSGUI.deleteFeed=function(){try{var a=document.getElementById("zfdshis");if(a.style.display=="block"){ZMSGUI.refreshHis()}}catch(b){}};ZMSGUI.handleKeyEvent=function(f){if(f==40){try{var a=new Object();var c=0;var g=ZMSG_transContent.getElementsByTagName("div");for(d in g){if(g[d].id!=undefined&&g[d].id.indexOf("trans")!=-1){a[c]=g[d];c++}}try{a[ZMSG_selecttransContent].className="wms-readdiv"}catch(h){ZMSG_selecttransContent=-1}if(ZMSG_selecttransContent<ZMSG_CHATTOTALOBJ-1){ZMSG_selecttransContent++;a[ZMSG_selecttransContent].className="wms-readdiv-select";var b=a[ZMSG_selecttransContent].id;b=b.replace(/trans_/g,"");ZMSGUI.selectChat(b,a[ZMSG_selecttransContent])}else{if(!ZMSG_chhislastpage){ZMSGUI.getNextPage()}else{ZMSG_selecttransContent=-1}}}catch(h){}}else{if(f==38){try{if(ZMSG_selecttransContent==-1){ZMSG_selecttransContent=ZMSG_CHATTOTALOBJ}var a=new Object();var c=0;var g=ZMSG_transContent.getElementsByTagName("div");for(d in g){if(g[d].id!=undefined&&g[d].id.indexOf("trans")!=-1){a[c]=g[d];c++}}try{a[ZMSG_selecttransContent].className="wms-readdiv"}catch(h){}if(ZMSG_selecttransContent>0){ZMSG_selecttransContent--;a[ZMSG_selecttransContent].className="wms-readdiv-select";var b=a[ZMSG_selecttransContent].id;b=b.replace(/trans_/g,"");ZMSGUI.selectChat(b,a[ZMSG_selecttransContent])}else{if(!ZMSG_chhisfirstpage){ZMSGUI.getPrevPage()}else{ZMSG_selecttransContent=ZMSG_CHATTOTALOBJ}}}catch(h){}}}};ZMSGUI.checkChatHistory=function(){if(ZMSG_chhis!=undefined){return true}return false};function DataObject(){this.tableToRowList=new Object();this.tableArray=new Array(0);this.getRowsForTable=getRowsForTable;this.containsTable=containsTable;this.addNewTable=addNewTable;this.addRowsForTable=addRowsForTable}function containsTable(a){var c=this.tableArray.length;for(var b=0;b<c;b++){if(this.tableArray[b]==a){return true}}return false}function getRowsForTable(a){return this.tableToRowList[a]}function addNewTable(a){this.tableArray.push(a);this.tableToRowList[a]=new Array(0);return}function addRowsForTable(b,a){if(!this.containsTable(b)){this.addNewTable(b)}var c=this.tableToRowList[b];c[c.length]=createRow(a);return true}function createRow(a){var c=new Object();for(var b=0;b<a.length;b++){c[a[b][0]]=a[b][1]}return c}function WmsResource(){this.MessageObject}WmsResource.init=function(){this.MessageObject=new Object()};WmsResource.getRealValue=function(b,g){try{var c="";if(this.MessageObject[""+b]==undefined||this.MessageObject[""+b]==null){try{if(WmsResource.ispopout()){if(opener.WmsResource.MessageObject[""+b]==undefined||opener.WmsResource.MessageObject[""+b]==null){c=b}else{c=opener.WmsResource.MessageObject[b]}}else{c=b}}catch(a){c=b}}else{c=this.MessageObject[b]}c=c.replace(/_/g," ");if(g==null){return c}c=WmsResource.replaceParams(c,g);return c}catch(f){}try{return b.replace(/_/g," ")}catch(f){return""}};WmsResource.ispopout=function(){var a=false;if(document.location.pathname.indexOf("/"+_WMSCONT+"/popout")==0){a=true}return a};WmsResource.getRealData=function(b,f){try{var a=b.trim();a=a.replace(/ /g,"_");a=a.replace(/\.$/,"");return WmsResource.getRealValue(a,f)}catch(c){return b}};WmsResource.getTrimmedValue=function(a,c){var b=WmsResource.getRealValue(a,c);b=b.replace(/\s/g,"&nbsp;");return b};WmsResource.replaceParams=function(e,g){var f=g.split(",");for(var b=0;b<f.length;b++){var a=f[b];var c=new RegExp("\\$"+(b+1),"g");e=e.replace(c,a)}return e};WmsResource.init();function WmsContacts(){var b;var c;var a}WmsContacts.userstatus=function(){};WmsContacts.userstatus.ONLINE=1;WmsContacts.userstatus.OFFLINE=0;WmsContacts.userstatus.FEEDINFO=2;WmsContacts.userstatus.BUSY=3;WmsContacts.userstatus.IDLE=4;WmsContacts.defaultstatusmsg=["Offline","Available","","Busy","Idle"];WmsContacts.updatempscontactlist=function(f){var a=new Array();for(var h in f){var n=new Object();var b=f[h]["scode"];var c=f[h]["smsg"];var o=f[h]["uname"];try{var g=WmsContacts.contactslist[o]["STATUS"]}catch(l){WmsContacts.contactslist[o]=new Object()}n.STATUS=b;WmsContacts.contactslist[o]["STATUS"]=b;n.STATUSMSG=(c!=undefined)?c:"";WmsContacts.contactslist[o]["STATUSMSG"]=(c!=undefined)?c:"";n.OWNERID=WmsContacts.getMPLoginName(f[h]["uname"]);WmsContacts.contactslist[o]["OWNERID"]=n.OWNERID;n.USERID=f[h]["uname"];WmsContacts.contactslist[o]["USERID"]=n.USERID;if(f[h]["dname"]!=undefined&&f[h]["dname"]!=""){n.DNAME=f[h]["dname"];WmsContacts.contactslist[o]["DNAME"]=n.DNAME}n.EMAILID=WmsContacts.getMPDispName(o);WmsContacts.contactslist[o]["EMAILID"]=n.EMAILID;n.PROTOCOL=f[h]["protocol"];WmsContacts.contactslist[o]["PROTOCOL"]=n.PROTOCOL;a.push(n)}WmsContactImpl.handleBulkPresence(n.PROTOCOL,a);WmsContacts.lastupdatetime=new Date().getTime();WmsContactImpl.handleAddressBook()};WmsContacts.removefromobj=function(b,a,c){if(b!="zoho"){a=c+"|"+a}WmsContacts.contactslist[a]=null;WmsContacts.lastupdatetime=new Date().getTime()};WmsContacts.updateStatus=function(b){try{var a=b.zuid;if(WmsContacts.contactslist[a]==undefined||WmsContacts.zohocontacts[a]==undefined){WmsContacts.contactslist[a]=new Object();WmsContacts.contactslist[a]["OWNERID"]=WebMessanger.uname;WmsContacts.contactslist[a]["USERID"]=a;WmsContacts.contactslist[a]["DNAME"]=b.dname;WmsContacts.contactslist[a]["EMAILID"]=b.email;WmsContacts.zohocontacts[a]=new Object();WmsContacts.zohocontacts[a]["OWNERID"]=WebMessanger.uname;WmsContacts.zohocontacts[a]["USERID"]=a;WmsContacts.zohocontacts[a]["DNAME"]=b.dname;WmsContacts.zohocontacts[a]["EMAILID"]=b.email}WmsContacts.contactslist[a]["STATUS"]=b.scode;WmsContacts.contactslist[a]["STATUSMSG"]=b.smsg;WmsContacts.zohocontacts[a]["STATUS"]=b.scode;WmsContacts.zohocontacts[a]["STATUSMSG"]=b.smsg}catch(c){}};WmsContacts.updateFromMDParent=function(a){var h=new Array();try{for(var c in a){var b=a[c]["STATUS"];if(b==-3){h.push(c)}}}catch(f){}if(h.length>0){try{WmsContactImpl.handleInvitations(h)}catch(g){}WMSUI.updateInvitations(h)}};WmsContacts.updateContacts=function(b){var h=new Array();try{for(var c in b){var a=b[c];if(a.scode==-3){h.push(c)}if(!WmsContacts.isMPUser(a.zuid)){WmsContacts.updatezohocontacts(b[c])}else{if(WmsContacts.isMP){WmsContacts.contactslist[c]=new Object();WmsContacts.contactslist[c]["STATUS"]=a.scode;WmsContacts.contactslist[c]["STATUSMSG"]=a.smsg;WmsContacts.contactslist[c]["OWNERID"]=WebMessanger.uname;WmsContacts.contactslist[c]["USERID"]=c;WmsContacts.contactslist[c]["PROTOCOL"]=a.protocol;WmsContacts.contactslist[c]["PHOTO"]=a.photo;if(a.dname!=undefined){WmsContacts.contactslist[c]["DNAME"]=a.dname}else{WmsContacts.contactslist[c]["DNAME"]=c.substring(c.indexOf("|")+1,c.lastIndexOf("|"))}if(a.email!=undefined&&a.email!=null&&a.email!=""){WmsContacts.contactslist[c]["EMAILID"]=a.email}else{WmsContacts.contactslist[c]["EMAILID"]=c.substring(c.indexOf("|")+1,c.lastIndexOf("|"))}}}}WmsContacts.lastupdatetime=new Date().getTime()}catch(f){}if(h.length>0){try{WmsContactImpl.handleInvitations(h)}catch(g){}WMSUI.updateInvitations(h)}};WmsContacts.updatezohocontacts=function(b){try{var a=b.zuid;WmsContacts.zohocontacts[a]=new Object();WmsContacts.zohocontacts[a]["STATUS"]=b.scode;WmsContacts.zohocontacts[a]["STATUSMSG"]=b.smsg;WmsContacts.zohocontacts[a]["OWNERID"]=WebMessanger.uname;WmsContacts.zohocontacts[a]["USERID"]=b.zuid;WmsContacts.zohocontacts[a]["DNAME"]=b.dname;WmsContacts.zohocontacts[a]["EMAILID"]=b.email;WmsContacts.zohocontacts[a]["PHOTO"]="";WmsContacts.contactslist[a]=new Object();WmsContacts.contactslist[a]["STATUS"]=b.scode;WmsContacts.contactslist[a]["STATUSMSG"]=b.smsg;WmsContacts.contactslist[a]["OWNERID"]=WebMessanger.uname;WmsContacts.contactslist[a]["USERID"]=b.zuid;WmsContacts.contactslist[a]["DNAME"]=b.dname;WmsContacts.contactslist[a]["EMAILID"]=b.email;WmsContacts.contactslist[a]["PHOTO"]="";WmsContacts.lastupdatetime=new Date().getTime()}catch(c){}};WmsContacts.removeList=function(e){var c=e+"|";var a=WmsContacts.getcontacts();for(var b in a){if(b.indexOf(c)!=0){continue}WmsContacts.contactslist[b]=null;delete WmsContacts.contactslist[b]}};WmsContacts.addinobj=function(b,a,c){if(b!="zoho"){a=c+"|"+a}WmsContacts.contactslist[a]=new Object();WmsContacts.contactslist[a]["STATUS"]="0";WmsContacts.contactslist[a]["STATUSMSG"]=null;WmsContacts.contactslist[a]["OWNERID"]=null;WmsContacts.contactslist[a]["USERID"]=a;WmsContacts.lastupdatetime=new Date().getTime()};WmsContacts.updatecontactlist=function(f){if(f==null){return}var a=f.Contact;if(a==null){return}var g=a.length;if(g<=0){return}for(var c=0;c<g;c++){var b=a[c]["USERID"];WmsContacts.contactslist[b]=new Object();WmsContacts.contactslist[b]["STATUS"]=a[c]["STATUS"];WmsContacts.contactslist[b]["STATUSMSG"]=a[c]["STATUSMSG"];WmsContacts.contactslist[b]["OWNERID"]=a[c]["OWNERID"];WmsContacts.contactslist[b]["USERID"]=a[c]["USERID"];WmsContacts.contactslist[b]["CON_ID"]=a[c]["CON_ID"];WmsContacts.zohocontacts[b]=new Object();WmsContacts.zohocontacts[b]["STATUS"]=a[c]["STATUS"];WmsContacts.zohocontacts[b]["STATUSMSG"]=a[c]["STATUSMSG"];WmsContacts.zohocontacts[b]["OWNERID"]=a[c]["OWNERID"];WmsContacts.zohocontacts[b]["USERID"]=a[c]["USERID"];WmsContacts.zohocontacts[b]["CON_ID"]=a[c]["CON_ID"];try{WmsContacts.contactslist[b]["DNAME"]=a[c]["DNAME"];WmsContacts.zohocontacts[b]["DNAME"]=a[c]["DNAME"];WmsContacts.contactslist[b]["EMAILID"]=a[c]["EMAILID"];WmsContacts.zohocontacts[b]["EMAILID"]=a[c]["EMAILID"];WmsContacts.contactslist[b]["PHOTO"]=a[c]["PHOTO"];WmsContacts.zohocontacts[b]["PHOTO"]=a[c]["PHOTO"]}catch(h){}}WmsContacts.lastupdatetime=new Date().getTime();try{WmsContactImpl.handleAddressBook()}catch(h){}};WmsContacts.deletecontact=function(a){delete WmsContacts.zohocontacts[a];delete WmsContacts.contactslist[a]};WmsContacts.enableMP=function(){WmsContacts.isMP=true};WmsContacts.isInitialised=function(){return WmsContacts.initialized};WmsContacts.init=function(a){WmsContacts.contactslist=new Object();WmsContacts.zohocontacts=new Object();WmsContacts.lastupdatetime=0;WmsContacts.initialized=false;if((_WMSCONFIG&WMSSessionConfig.MP)==WMSSessionConfig.MP){WmsContacts.enableMP()}if(typeof WmsContacts.isMP=="undefined"){WmsContacts.isMP=false}if(a!=undefined){WmsContacts.updateContacts(a);WmsContacts.initialized=true}if(WmsContacts.isMP){WmsMPAccounts.init();WmsMPAccounts.loginstartup();setTimeout("WmsMPAccounts.getandlogin();",2000)}};WmsContacts.getcontacts=function(){return WmsContacts.contactslist};WmsContacts.isonline=function(username){if(WmsContacts.contactslist[username]){return(eval(WmsContacts.contactslist[username])==1)}else{return false}};WmsContacts.getZohoContacts=function(){return WmsContacts.zohocontacts};WmsContacts.status=function(a){if(WmsContacts.contactslist[a]){return WmsContacts.contactslist[a]["STATUS"]}else{return false}};WmsContacts.add=function(c,a,e){if(a.trim()==0){return}var b=(c=="zoho")?"addcontact"+cadapter+"?ulist="+a:"mpcontact"+cadapter+"?zohoid="+WebMessanger.getUserName()+"&mploginid="+e+"&contactid="+a+"&opr=addcon";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix());WmsContacts.addinobj(c,a,e);if(c!="zoho"){WmsContactImpl.handleMPAdd(c,a,e)}};WmsContacts.reinvite=function(e,c,a,f){if(c.trim()==0){return}var b="emailid="+c;WmsAjax.postrequest("/"+_WMSCONT+"/reinvitebyemailid"+dext,b+nocachefix());WmsContacts.addinobj(e,a,f);if(e!="zoho"){WmsContactImpl.handleMPAdd(e,a,f)}};WmsContacts.updatepresence=function(b,a,e,c){WmsContacts.contactslist[b]=new Object();WmsContacts.contactslist[b]["STATUS"]=a;WmsContacts.contactslist[b]["STATUSMSG"]=e;WmsContacts.contactslist[b]["OWNERID"]=c;WmsContacts.contactslist[b]["USERID"]=b;WmsContacts.lastupdatetime=new Date().getTime()};WmsContacts.rename=function(a,f){var f=WebMessanger.encode(f);WmsContacts.contactslist[a]["DNAME"]=f;WmsContacts.zohocontacts[a]["DNAME"]=f;var c="";try{if(WmsContacts.getEmailId(a)!=undefined){c=WmsContacts.getEmailId(a)}}catch(g){}var b="rencont"+cadapter+"?userid="+a+"&email="+encodeURIComponent(c)+"&dname="+encodeURIComponent(f);WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix())};WmsContacts.renamecontId=function(e,a,c){var c=WebMessanger.encode(c);WmsContacts.contactslist[a]["DNAME"]=c;WmsContacts.zohocontacts[a]["DNAME"]=c;var b="rencontid"+cadapter+"?contid="+e+"&dname="+encodeURIComponent(c);WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix())};WmsContacts.remove=function(c,a,e){var b=(c=="zoho")?"deletecontact"+cadapter+"?emailid="+WmsContacts.getEmailId(a)+"&userid="+a:"mpcontact"+cadapter+"?zohoid="+WebMessanger.getUserName()+"&mploginid="+e+"&contactid="+a+"&opr=removecon";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix());WmsContacts.removefromobj(c,a,e);if(c!="zoho"){WmsContactImpl.handleMPDelete(c,a,e)}};WmsContacts.get=function(a){try{return WmsContacts.contactslist[a]}catch(b){}return null};WmsContacts.getDisplayName=function(a){try{return WmsContacts.contactslist[a]["DNAME"]}catch(b){return null}};WmsContacts.accept=function(c,a,e){if(a.trim()==0){return}var b=(c=="zoho")?"approvecontact"+cadapter+"?status=accept&userid="+a:"mpcontact"+cadapter+"?zohoid="+WebMessanger.getUserName()+"&mploginid="+e+"&contactid="+a+"&opr=acceptcon";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix());if(c!="zoho"){WmsContactImpl.handleMPAccept(c,a,e)}};WmsContacts.reject=function(c,a,e){if(a.trim()==0){return}var b=(c=="zoho")?"approvecontact"+cadapter+"?status=reject&userid="+a:"mpcontact"+cadapter+"?zohoid="+WebMessanger.getUserName()+"&mploginid="+e+"&contactid="+a+"&opr=rejectcon";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix());if(c!="zoho"){WmsContactImpl.handleMPReject(c,a,e)}};WmsContacts.isMPUser=function(a){return(a.indexOf("|")!=-1)};WmsContacts.getMPName=function(a){if(!WmsContacts.isMPUser(a)){return"zoho"}var b=a.indexOf("@")+1;return a.substring(b,a.indexOf(".",b))};WmsContacts.getEmailId=function(a){return WmsContacts.contactslist[a]["EMAILID"]};WmsContacts.getMPDispName=function(a){try{if(!WmsContacts.isMPUser(a)){return a}if(a.indexOf("|")!=a.lastIndexOf("|")){return a.substring(a.indexOf("|")+1,a.lastIndexOf("|"))}else{return a.substring(a.indexOf("|")+1,a.length)}}catch(b){return null}};WmsContacts.getMPLoginName=function(a){if(!WmsContacts.isMPUser(a)){return a}return a.substring(0,a.indexOf("|"))};WmsContacts.verifyUserStatus=function(g){var h=false;for(var b=0;b<g.length;b++){var c=g[b];var o=c.uname;var a=c.scode;var l=c.zuid;if(l.trim().length==0){continue}try{var n=WmsContacts.status(o);if(n!==false){if(a!=n&&n>=0){WebMessanger.verifyUserStatus(c.zuid,WmsContacts.contactslist[o]["STATUS"])}}}catch(f){}}if(h){WMSUI.updateContacts(false)}};WmsContacts.updateAddressBook=function(f){try{var a=new Array();for(var g in f){var n=new Object();var b=(f[g]["scode"]!=undefined)?f[g]["scode"]:0;var c=(f[g]["smsg"]==undefined)?"":f[g]["smsg"];var o=f[g]["uname"];try{var h=WmsContacts.contactslist[o]["STATUS"]}catch(l){WmsContacts.contactslist[o]=new Object();n.STATUS=b;WmsContacts.contactslist[o]["STATUS"]=b;n.STATUSMSG=c;WmsContacts.contactslist[o]["STATUSMSG"]=c}n.OWNERID=WmsContacts.getMPLoginName(f[g]["uname"]);WmsContacts.contactslist[o]["OWNERID"]=n.OWNERID;n.USERID=f[g]["uname"];WmsContacts.contactslist[o]["USERID"]=n.USERID;if(f[g]["dname"]!=undefined&&f[g]["dname"]!=""){n.DNAME=f[g]["dname"];WmsContacts.contactslist[o]["DNAME"]=n.DNAME}n.EMAILID=WmsContacts.getMPDispName(o);WmsContacts.contactslist[o]["EMAILID"]=n.EMAILID;n.PROTOCOL=f[g]["protocol"];WmsContacts.contactslist[o]["PROTOCOL"]=n.PROTOCOL;a.push(n)}WmsContactImpl.handleBulkPresence(n.PROTOCOL,a);WmsContacts.lastupdatetime=new Date().getTime();WmsContactImpl.handleAddressBook()}catch(l){}};WmsContacts.updatempscontactinfo=function(a){try{for(var c in a){var f=a[c];var b=f.uname;if(f.dname!=undefined){WmsContacts.contactslist[b]["DNAME"]=f.dname}if(f.photo!=undefined){WmsContacts.contactslist[b]["PHOTO"]=f.photo}if(f.dname!=undefined&&f.photo!=undefined){WMSUI.cntphotoupdate(b,f.protocol,f.dname,f.photo)}}}catch(g){}};function WmsMPAccounts(){var a}WmsMPAccounts.accountstatus=function(){};WmsMPAccounts.accountstatus.LOGGEDIN=1;WmsMPAccounts.accountstatus.LOGGEDOUT=0;WmsMPAccounts.accountstatus.LOGINERROR=-1;WmsMPAccounts.add=function(g,c,a,f,e){var b="addmps"+cadapter+"?username="+g+"&password="+c+"&startup="+f+"&protocol="+e+"&status="+a;WmsProxyOnDemand.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix())};WmsMPAccounts.del=function(b){var a="delmps"+cadapter+"?username="+b;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix());setTimeout("WmsMPAccounts.get();",2000)};WmsMPAccounts.get=function(){WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent("getmps"+cadapter)+nocachefix())};WmsMPAccounts.getandlogin=function(){WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent("getmps"+cadapter+"?autologin=true")+nocachefix())};WmsMPAccounts.login=function(f,b,c,e){var a="mpslogin"+cadapter+"?username="+f+"&password="+b+"&protocol="+c+"&mailnotification=false";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix());if(e){WmsMPAccounts.add(f,b,1,1,c);setTimeout("WmsMPAccounts.get();",2000)}};WmsMPAccounts.loginstartup=function(){WmsProxyOnLoad.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent("mpsautologin"+cadapter)+nocachefix())};WmsMPAccounts.logout=function(b){var a="mpslogout"+cadapter+"?username="+b;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};WmsMPAccounts.logoutall=function(){WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent("mpslogoutall"+cadapter)+nocachefix())};WmsMPAccounts.init=function(){WmsMPAccounts.accounts=new Object()};WmsMPAccounts.updateobj=function(c,g,n,l,b,h){var a=c+l;try{WmsMPAccounts.accounts[a]["LOGINID"].trim()}catch(f){WmsMPAccounts.accounts[a]=new Object()}WmsMPAccounts.accounts[a]["LOGINID"]=c;WmsMPAccounts.accounts[a]["STATUS"]=g;WmsMPAccounts.accounts[a]["STATUSMSG"]=n;WmsMPAccounts.accounts[a]["PROTOCOL"]=l;if(WmsMPAccounts.accounts[a]["MOREINFO"]==undefined){WmsMPAccounts.accounts[a]["MOREINFO"]=new Object()}WmsMPAccounts.accounts[a]["MOREINFO"].MAILNOTIFICATION=h;WmsMPAccounts.accounts[a]["UENTERID"]=(b!="")?b:c;WmsMPAccounts.accounts[a]["LASTLOGINTIME"]=new Date().getTime()};WmsMPAccounts.getaccounts=function(){return WmsMPAccounts.accounts};WmsMPAccounts.updateaccountslist=function(f){var c=new Array();try{var h=f.MPSAccounts;var a=h.length;for(var b=0;b<a;b++){c[b]=h[b]["USERNAME"]}}catch(g){}try{WmsContactImpl.handleGetAccounts(c)}catch(g){}};WmsMPAccounts.removefromobj=function(a){WmsMPAccounts.accounts.splice(a,1)};WmsContacts.getMPUserPhoto=function(b){var a=WmsContacts.contactslist[b]["PHOTO"];if(a!=undefined&&a!=""){return _WMSCHATURL+"mpimg.do?url="+a}else{return"https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif"}};WmsContacts.lastfetchedtime=0;function ChatWindow(){this.win=null;this.bar=null;this.partinfo=new Object();this.partcount=0;this.popedout=false;if(WebMessanger.registerAnnonUser){this.left=(ie6)?16:15}else{this.left=(ie6)?203:199}this.top=20;this.width=200;this.height=200;this.msgdisp;this.ftools;this.composer;this.titleObj;this.scode;this.smsg;this.objId;this.maximized;this.child;this.blinking=false;this.winIndex=-1;this.prevIndex=-1;this.imgurl="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif";this.addinfo=new Object();this.prechattime=null;this.offlinemessage=false;this.popoutidle=false;this.addmemheightdiff=3;this.writetrans=true;this.ctype=-1;this.create=function(o,f,g){try{var b="chatwin";var a=new Array("divId","class","title","scode","smsg","zuid");var p="wms-cw";var q;var l;g=g.split(",");if(ie){this.width=this.width-1}for(var c=0;c<g.length;c++){for(m=0;m<a.length;m++){if(g[c].indexOf(a[m])==0){if(a[m]=="divId"){b=g[c].substr(g[c].indexOf("=")+1,g[c].length)}else{if(a[m]=="class"){p=g[c].substr(g[c].indexOf("=")+1,g[c].length)}else{if(a[m]=="title"){this.title=g[c].substr(g[c].indexOf("=")+1,g[c].length)}else{if(a[m]=="scode"){this.scode=g[c].substr(g[c].indexOf("=")+1,g[c].length)}else{if(a[m]=="smsg"){this.smsg=g[c].substr(g[c].indexOf("=")+1,g[c].length)}}}}}}}}if(document.getElementById(b)==null){q=document.createElement("DIV");q.id=b;this.setObjId(b);WindowHandler.chatbar.appendChild(q);this.win=q;l=document.createElement("DIV");WindowHandler.chatbar.appendChild(l);this.bar=l}else{document.getElementById(b).style.display="block";var h=WindowHandler.getWinObjById(b);if(WebMessanger.userclick){h.getMeFront()}WebMessanger.userclick=false;return}q.className=p;var r=this.left+(this.width*WindowHandler.count);if(ie&&WMSUI.doctype!=undefined){try{if(WMSUI.doctype.indexOf("Transitional")==-1){this.left+=4}}catch(n){this.left+=4}}if(!ie){q.style.left=r+"px"}o=this.mapEvent(o);o=this.replaceValues(o);f=this.mapEvent(f);f=this.replaceBarValues(f);q.innerHTML=o;this.msgdisp=this.getInnerObject("msgdisp","DL");this.composer=this.getInnerObject("editor","TEXTAREA");this.ctrlcomp=this.getInnerObject("ctrlcomp","div");this.titleObj=this.getInnerObject("ptitle","P");this.cuserstatus=this.getInnerObject("wmsustat","DIV");l.innerHTML=f;this.bar.style.display="block";WindowHandler.count++;if(WebMessanger.userclick){this.getMeFront();this.composer.focus()}WebMessanger.userclick=false;this.maximized=true;WindowHandler.openedChats[this.getObjId()]=="max";Cookie.update();WindowHandler.removeExcessChat(this.getObjId());this.registerEvent()}catch(n){}return b};this.registerEvent=function(){try{var a=this.objId;if(!ie&&_WMSDRAGDROP){this.win.addEventListener("dragover",function(c){c.preventDefault()},true);this.win.addEventListener("drop",function(c){c.preventDefault();WmsDragDrop.onDropEvent(a,c,true)},true)}}catch(b){}};this.replaceValues=function(c){var a=unescape(this.title);c=c.replace(/FULLCHATTITLE/g,a);c=c.replace(/CHATTITLE/g,(a.length<12)?a:a.substr(0,10)+"..");c=c.replace(/CHATID/g,this.objId);c=c.replace(/WININDEX/g,this.winIndex);c=c.replace(/SCODE/g,this.scode);var b=unescape(this.smsg);c=c.replace(/STATUSMSG/g,(b.length<20)?b:b.substr(0,19)+"..");return c};this.callBack=function(){this.win.style.display="none";this.child.focus();this.popedout=true};this.replaceBarValues=function(b){var a=unescape(this.title);b=b.replace(/CHATTITLE/g,(a.length<20)?a:a.substr(0,18)+"..");b=this.replaceValues(b);return b};this.mapEvent=function(a){a=a.replace(/SELECTCHAT/g,"WindowHandler.exist["+this.winIndex+"].selectChat()");a=a.replace(/BARMOUSEOVER/g,"WMSUI.barmouseover(this,false)");a=a.replace(/BARMOUSEOUT/g,"WMSUI.barmouseout(this,false)");a=a.replace(/CLOSEMOUSEOVER/g,"WMSUI.closemouseover(this)");a=a.replace(/CLOSEMOUSEOUT/g,"WMSUI.closemouseout(this)");a=a.replace(/HIDECLOSEIMG/g,"WindowHandler.exist["+this.winIndex+"].hideCloseImg(event)");a=a.replace(/SHOWCLOSEIMG/g,"WindowHandler.exist["+this.winIndex+"].showCloseImg(event)");a=a.replace(/TOGGLEBODY/g,"WindowHandler.exist["+this.winIndex+"].toggler()");a=a.replace(/CHATCLOSE/g,"WindowHandler.exist["+this.winIndex+"].close()");a=a.replace(/KEYUPHANDLE/g,"WindowHandler.exist["+this.winIndex+"].toggleSendBtn(this);WMSUI.removeNewLine(event,this);");a=a.replace(/KEYCLICKHANDLE/g,"WindowHandler.exist["+this.winIndex+"].focus();");a=a.replace(/POPOUT/g,"WindowHandler.exist["+this.winIndex+"].popout()");a=a.replace(/STARTVIDEOCHAT/g,"WindowHandler.exist["+this.winIndex+"].startVideoChat()");a=a.replace(/STARTAUDIOCHAT/g,"WindowHandler.exist["+this.winIndex+"].startAudioChat()");a=a.replace(/TOGGLEACTION/g,"WindowHandler.exist["+this.winIndex+"].toggleActions(event)");a=a.replace(/STARTMEETING/g,"WindowHandler.exist["+this.winIndex+"].startMeeting()");a=a.replace(/EDITCHATTITLE/g,"WindowHandler.exist["+this.winIndex+"].editChatTitle()");a=a.replace(/SHOWADDMEMBER/g,"WindowHandler.exist["+this.winIndex+"].showAddMember(event)");a=a.replace(/CHANGEADD/g,"WindowHandler.exist["+this.winIndex+"].changeAdd()");a=a.replace(/ADDMEMBER/g,"WindowHandler.exist["+this.winIndex+"].addMember()");a=a.replace(/MEMBERPOP/g,"WindowHandler.exist["+this.winIndex+"].populateAddMember(event)");a=a.replace(/ADDWMSCLICK/g,"WindowHandler.exist["+this.winIndex+"].handleFileClick(event)");a=a.replace(/TOGGLEGROUPMEMBERS/g,"WindowHandler.exist["+this.winIndex+"].toggleGroupMembers()");a=a.replace(/CHKGRPMEMBERS/g,"WindowHandler.exist["+this.winIndex+"].checkAndToggleGroupMembers()");return a};this.blurChat=function(){var a=this.getInnerObject("txtbxdiv","DIV");a.className="wmscmtd"};this.showCloseImg=function(a){try{if(ie){var c=a.srcElement.id}else{var c=a.currentTarget.id}if(c=="b"+this.objId||c.indexOf("b")!=-1){WindowHandler.getObjectInObject(this.bar,"bc"+this.objId,"IMG").style.display="block"}else{if(c=="ptitle"||c.indexOf("cc")!=-1||c.indexOf("cp")!=-1||c.indexOf("cm")!=-1){WindowHandler.getObjectInObject(this.titleObj,"cc"+this.objId,"IMG").style.display="block";WindowHandler.getObjectInObject(this.titleObj,"cp"+this.objId,"IMG").style.display="block";WindowHandler.getObjectInObject(this.titleObj,"cm"+this.objId,"IMG").style.display="block"}}}catch(b){}};this.hideCloseImg=function(a){try{WindowHandler.getObjectInObject(this.bar,"bc"+this.objId,"IMG").style.display="none";WindowHandler.getObjectInObject(this.titleObj,"cc"+this.objId,"IMG").style.display="none";WindowHandler.getObjectInObject(this.titleObj,"cp"+this.objId,"IMG").style.display="none";WindowHandler.getObjectInObject(this.titleObj,"cm"+this.objId,"IMG").style.display="none"}catch(b){}};this.toggleSendBtn=function(c){try{if(c.value.length>0){this.enableSend()}else{this.disableSend()}var a=this.getInnerObject("txtbxdiv","DIV");a.className="wmscmtd-sel"}catch(b){}};this.updateUserStatus=function(c,f){try{if(f==undefined){f=""}this.smsg=f;var a=this.getInnerObject("wmsctsmsg","SPAN");f=WmsResource.getRealValue(unescape(f));a.style.display="block";a.innerHTML=(f.length<20)?f:f.substr(0,19)+"..";this.scode=c;var e=this.getInnerObject("wmsctscode","IMG");e.className="wms-"+c;if(c==""){e.className="wms-10"}e.title=WmsResource.getRealValue(WebMessanger.statusarr[c]);this.child.setStatus(c,f)}catch(b){}};this.updatePartinfo=function(b,c,e){for(d in this.partinfo){var f=this.partinfo[d];var a=f.uname;if(a==b){this.partinfo[d]["scode"]=c;this.partinfo[d]["smsg"]=e;break}}};this.updateOfflineMessage=function(a){try{var f=WmsContacts.getDisplayName(a);if(this.partcount==1&&f!=null){var c=WmsResource.getRealValue("$1_is_offline_Messages_you_send_will_be_delivered_when_$1_comes_online",f);c='<dd class="wmstxt1"><div class="inftxt">'+c+"</div></dd>";Message.display(this.objId,c,false);this.offlinemessage=true}}catch(b){}};this.updateOnlineMessage=function(a){try{var f=WmsContacts.getDisplayName(a);if(this.partcount==1&&f!=null){var c=WmsResource.getRealValue("$1_is_now_online",f);c='<dd class="wmstxt1"><div class="inftxt">'+c+"</div></dd>";Message.display(this.objId,c,false);this.offlinemessage=false}}catch(b){}};this.selectChat=function(){try{if(WindowHandler.lastViewed!=this.winIndex){if(WindowHandler.lastViewed!=-1&&WindowHandler.exist[WindowHandler.lastViewed]!=null&&WindowHandler.exist[WindowHandler.lastViewed]!="empty"){this.prevIndex=WindowHandler.lastViewed}}WindowHandler.lastViewed=this.winIndex;this.scrollDisplay()}catch(a){}};this.getMeFront=function(){this.selectChat();try{if(document.activeElement.type=="text"&&document.activeElement.nodeName=="TEXTAREA"){return}}catch(a){}};this.enableSend=function(){var a=this.getInnerObject("sendbtn","IMG");a.className="wms-sendsel"};this.disableSend=function(){var a=this.getInnerObject("sendbtn","IMG");a.className="wms-send"};this.getScode=function(){return this.scode};this.getSmsg=function(){return this.smsg};this.getTitle=function(){return this.title};this.getObjId=function(){return this.objId};this.setObjId=function(a){this.objId=a};this.remove=function(){try{WindowHandler.count--;this.win.style.display="none";WindowHandler.chatbar.removeChild(this.win);WindowHandler.chatbar.removeChild(this.bar);WindowHandler.openedChats[this.getObjId()]="close";Cookie.update();setTimeout("Factory.destroyDialog("+this.winIndex+",false)",10)}catch(a){}};this.close=function(){try{ChatBlink.stopRepeat();Message.lastjoinId=-1;this.win.style.display="none";WindowHandler.chatbar.removeChild(this.win);WindowHandler.chatbar.removeChild(this.bar);WindowHandler.openedChats[this.getObjId()]="close";Cookie.update();try{WindowHandler.exist[this.getPreIndex()].focus()}catch(a){WindowHandler.moveFocus(this.getObjId())}setTimeout("Factory.destroyDialog("+this.winIndex+",true)",10);WindowHandler.count--}catch(b){}};this.isPopedOut=function(){return this.popedout};this.isMaximised=function(){return this.maximized};this.hide=function(){this.win.style.display="none"};this.hideWin=function(){this.win.style.display="none";this.bar.style.display="none";WindowHandler.rearrange()};this.showWin=function(){this.win.style.display="block";this.bar.style.display="block";var a=WindowHandler.getBarObject("b"+this.objId,"DIV");a.className="wms-tab-selected";a.style.display="block";this.maximized=true;if(this.partcount>1){this.getInnerObject("wmschattitle","SPAN").setAttribute("class","wms-bt wms-cngptxt")}WindowHandler.removeExcessChat(this.getObjId())};this.display=function(){this.win.style.display="block";this.bar.style.display="block";var a=WindowHandler.getBarObject("b"+this.objId,"DIV");a.className="wms-tab-selected";a.style.display="block";this.maximized=true;WindowHandler.removeExcessChat(this.getObjId())};this.show=function(){if(this.maximized&&!this.popedout){this.win.style.display="block";this.getMeFront()}};this.makenormal=function(){if(this.maximized){this.titleObj.className="wms-ch"}};this.highlight=function(){if(!this.maximized){var a=WindowHandler.getBarObject("b"+this.objId,"DIV");a.className="wms-tab-notify";this.bar.style.fontWeight="bold";return}else{this.titleObj.className="wms-ch-notify"}};this.setWinId=function(a){this.winId=a};this.getWinId=function(a){return this.winId};this.getObj=function(){return this.win};this.getInnerObject=function(a,b){return WindowHandler.getObjectInObject(this.win,a,b)};this.syncComposerFormat=function(){var f=new RegExp("\\s?(wmsbold|wmsitalic|wmsunderline)\\d?","g");var c=this.composer.className;if(f.test(c)){c=c.replace(f,"")}var a=this.ftools.getElementsByTagName("div");var h=new Array("wmsbold","wmsitalic","wmsunderline");for(var g=0;g<a.length;g++){for(var b=0;b<h.length;b++){if(a[g].id==h[b]){if(a[g].className=="wmsselected"){c=c+" "+h[b];break}}}}this.composer.className=c};this.toggleColorBar=function(c,e){if(e.className=="wmsselected"){Color.hide();return}e.className="wmsselected";var b=0;var a=0;if(ie){b=window.event.clientX+document.body.scrollLeft;a=window.event.clientY+document.body.scrollTop}else{b=c.pageX;a=c.pageY}Color.show(e);Color.icon=e};this.chooseColor=function(a,b){this.syncComposerFormat();this.composer.className=a+" "+this.composer.className;this.composer.style.color=b;this.toggleColorBar();this.composer.focus()};this.focus=function(){this.composer.focus();var a=this.getInnerObject("txtbxdiv","DIV");a.className="wmscmtd-sel";this.titleObj.className="wms-ch";ChatBlink.stopRepeat()};this.checkAndToggleGroupMembers=function(){if(this.getInnerObject("wmsgroupmbr","DIV").style.display=="block"){this.toggleGroupMembers()}};this.toggler=function(){Self.Idle=false;if(this.maximized){this.minimize();return}this.maximize()};this.maximize=function(){this.win.style.display="block";this.bar.style.display="block";var a=WindowHandler.getBarObject("b"+this.objId,"DIV");WMSUI.barclick(a);this.maximized=true;try{this.getMeFront()}catch(b){}WindowHandler.openedChats[this.getObjId()]="max";Cookie.update()};this.minimize=function(){Self.Idle=false;this.win.style.display="none";var a=WindowHandler.getBarObject("b"+this.objId,"DIV");WMSUI.barmouseout(a,true);this.maximized=false;this.bar.style.fontWeight="normal";WindowHandler.lastViewed=-1;WindowHandler.openedChats[this.getObjId()]="min";Cookie.update()};this.popout=function(){Self.Idle=false;var a="/"+_WMSCONT+"/popoutbar.html?q="+this.winIndex+"&t="+WebMessanger.theme+"&samedomain="+_WMS_SAMEDOMAIN+"&forcedomain="+_WMS_FORCEDOMAIN+"&domain="+encodeURIComponent(WebMessanger.getDomain())+"&c="+_WMSCONT;this.child=window.open(a,""+this.winIndex,"toolbar=no,status=no,statusbar=no,resizable=yes,menubar=no,scrollbars=no,width=800,height=425,screenX=20,screenY=20");setTimeout("WindowHandler.exist["+this.winIndex+"].hideWin()",100);this.childIndex=WindowHandler.checkFreeChildIndex();if(this.childIndex!=-1){WindowHandler.children[this.childIndex]=this.child}else{WindowHandler.children.push(this.child)}this.popedout=true;WindowHandler.count--;WindowHandler.rearrange();WindowHandler.reopenRemovedChat()};this.scrollDisplay=function(){try{this.ctrlcomp.scrollTop=this.ctrlcomp.scrollHeight-this.ctrlcomp.clientHeight}catch(a){}};this.setScrollValue=function(a){try{this.ctrlcomp.scrollTop=a}catch(b){}};this.popin=function(a){WindowHandler.count++;if(!WMSUI.hidden){this.bar.style.display="block";this.win.style.display="block";this.getMeFront()}this.popedout=false;if(!a){try{this.composer.value=this.child.composer.value}catch(b){}this.child.close()}else{this.hideWin()}WindowHandler.removeExcessChat(this.getObjId())};this.getChild=function(){return this.child};this.getParent=function(){};this.blink=function(){};this.startBlink=function(){this.blinking=true};this.stopBlink=function(){this.blinking=false};this.setTitle=function(f){var a=this.getInnerObject("wmschattitle","SPAN");if(this.partcount>1){a.setAttribute("class","wms-bt wms-cngptxt")}if(f=="Group Chat"){f=WmsResource.getRealValue("Group_Chat")}this.title=f;a.innerHTML=" ";a.innerHTML=unescape((f.length<12)?f:f.substr(0,10)+"..");var b=WindowHandler.getObjectInObject(this.bar,"bartitle","SPAN");b.innerHTML=unescape((f.length<12)?f:f.substr(0,18)+"..");try{this.child.setTitle(f)}catch(c){}};this.disable=function(){};this.enable=function(){try{if(!this.maximized){this.maximize();return}this.getMeFront()}catch(a){}};this.setIndex=function(a){this.winIndex=a};this.getIndex=function(){return this.winIndex};this.getPreIndex=function(){return this.prevIndex};this.setPreIndex=function(a){this.prevIndex=a};this.isMinimized=function(){return !this.maximized};this.updateParticipants=function(a){this.addParticipants(a)};this.getImageUrl=function(){return this.imgurl};this.setImage=function(a){this.imgurl=a;this.getInnerObject("wmsctimage","IMG").src=a;try{this.child.setImage(a)}catch(b){}};this.populateParticipants=function(){var p=this.imgurl;var a="10";var b=" ";var o=this.getInnerObject("wmsgrpmbmrs","P");if(this.isLiveSupportChat()){p="https://img.zohostatic.com/ichat/v42_https/images/bar/livesupicon.gif";a="g10";o.style.display="none"}else{if(this.isZohoGroupChat()){var c=this.getGroupID();if(c!=null){p=_WMSPHOTOSERVER+"/file?fs=thumb&ID="+c+"&t=group&height=29&width=29";a="g10";o.style.display="block"}}else{if(this.partcount>1){p="https://img.zohostatic.com/ichat/v42_https/images/bar/group.gif";try{delete WebMessanger.ucmap[WebMessanger.chatmap[this.objId]];delete WebMessanger.chatmap[chid]}catch(l){}o.style.display="block";this.getInnerObject("wmstmeet","P").style.display="none"}else{if(this.partcount==1&&this.isMultiProtocolChat()){for(var n in this.partinfo){var g=n.substring(n.indexOf("|")+1,n.length);var f=WmsContacts.contactslist[g]["PHOTO"];if(f!=undefined&&f!=""){p=_WMSCHATURL+"mpimg.do?url="+f}else{p="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif"}}a=this.scode;b=this.smsg;o.style.display="none";this.getInnerObject("formsend","form").style.display="none";if(WebMessanger.meeting){this.getInnerObject("wmstmeet","P").style.display="block"}}else{if(this.partcount==1){for(var n in this.partinfo){a=this.partinfo[n]["scode"];b=this.partinfo[n]["smsg"];var h=(this.partinfo[n]["zuid"]).trim();if(h.length>0){p=_WMSPHOTOSERVER+"/file?ID="+h+"&t=user&height=29&width=29"}}o.style.display="none";if(WebMessanger.meeting){this.getInnerObject("wmstmeet","P").style.display="block"}}}}}}this.setImage(p);this.updateUserStatus(a,b)};this.addParticipants=function(f){for(var c=0;c<f.length;c++){var a=f[c]["uname"];if(WmsContacts.isMPUser(a)){var b=a.substring(a.indexOf("|")+1,a.length);if(WmsContacts.getDisplayName(b)!=null){f[c]["dname"]=WmsContacts.getDisplayName(b)}else{f[c]["dname"]=WmsContacts.getMPDispName(b)}if(WmsContacts.status(b)!=false){f[c]["scode"]=WmsContacts.status(b)}try{f[c]["smsg"]=WmsContacts.get(b)["STATUSMSG"]}catch(g){f[c]["smsg"]=WmsContacts.defaultstatusmsg[f[c]["scode"]]}}try{this.partinfo[a]=f[c]}catch(g){}}this.updateParticipantsCount();this.populateParticipants();if(this.popedout){MyChild.updateParticipants(this.objId)}};this.updateParticipantsCount=function(){var b=0;for(var a in this.partinfo){b++}this.partcount=b};this.deleteParticipants=function(c){for(var b=0;b<c.length;b++){var a=c[b]["uname"];try{delete this.partinfo[a]}catch(e){}}this.updateParticipantsCount();this.populateParticipants();if(this.popedout){MyChild.updateParticipants(this.objId)}};this.updateAddInfo=function(e){var a=e.split(":");var f=new Object();for(var c=0;c<a.length;c+=2){var b=a[c];if(b!=undefined){f[b]=(a[c+1]!=undefined)?a[c+1]:""}}this.addinfo=f};this.isMultiProtocolChat=function(){return(this.getChatType()==CT_NFY_MULTIPROTOCOL)?true:false};this.isLiveSupportChat=function(){return(this.getChatType()==CT_NFY_LIVESUPPORT)?true:false};this.isZohoGroupChat=function(){return(this.getChatType()==CT_NFY_ZOHOGROUP)?true:false};this.getChatType=function(){try{return this.addinfo.CT_TYPE}catch(a){return null}};this.getGroupID=function(){if(this.isZohoGroupChat()){return this.addinfo.GROUPID}else{return null}};this.getProtocol=function(){if(this.isMultiProtocolChat()){return this.addinfo.PROTOCOL}else{return null}};this.getToolBarStatus=function(){if(this.partcount==1&&this.isLiveSupportChat()==false&&this.isZohoGroupChat()==false){for(var a in this.partinfo){var c=(this.partinfo[a]["zuid"]).trim();if(c==""){c=a.substring(a.indexOf("|")+1,a.length)}try{if(c.length>0&&(WMSTP.isVideoEnabled()||WMSTP.isAudioEnabled()||WebMessanger.meeting)){return true}}catch(b){return false}}}return false};this.updateSkipTranMenu=function(a){if(a=="false"){this.writetrans=false}else{this.writetrans=true}};this.updateToolBar=function(){if(this.getToolBarStatus()){var a="none";var e="none";var b="none";try{if(WMSTP.isVideoEnabled()&&!this.isMultiProtocolChat()){a="block"}}catch(c){}try{if(WMSTP.isAudioEnabled()&&!this.isMultiProtocolChat()){e="block"}}catch(c){}if(WebMessanger.meeting){b="block"}this.getInnerObject("wmstvideo","IMG").style.display=a;this.getInnerObject("wmstvoice","IMG").style.display=e;this.getInnerObject("wmstmeet","P").style.display=b}};this.startVideoChat=function(){if(this.getToolBarStatus()){for(var a in this.partinfo){var b=(this.partinfo[a]["zuid"]).trim();if(b.length>0){WMSUI.startVideoChat(b);break}}}return false};this.startAudioChat=function(){if(this.getToolBarStatus()){for(var a in this.partinfo){var b=(this.partinfo[a]["zuid"]).trim();if(b.length>0){WMSUI.startAudioChat(b);break}}}return false};this.startMeeting=function(){if(this.getToolBarStatus()){for(var a in this.partinfo){var b=(this.partinfo[a]["zuid"]).trim();if(b==""){b=a.substring(a.indexOf("|")+1,a.length)}if(b.length>0){WMSUI.startMeeting(b);break}}}return false};this.toggleActions=function(b){var a=this.getInnerObject("actiondiv","DIV");var c=this.winIndex;if(a.style.display=="none"){a.style.display="block";WMSUI.addIndocClickcallbackQue("chat"+this.getObjId(),a,function(e){if(e!="ta_"+c&&e!="wms-file"){a.style.display="none"}},b)}else{a.style.display="none"}this.titleObj.className="wms-ch"};this.populateChatTitleEdit=function(){var a=(this.partcount>1||this.isLiveSupportChat()||this.isZohoGroupChat())?"wms-gni":"wms-cni";return'<form onsubmit="WindowHandler.exist['+this.winIndex+'].saveChatTitle(this.wmseditchattitletxt.value);return false;"><input type="text"      class="'+a+'" id="wmseditchattitletxt" value="'+unescape(this.getTitle())+'" onblur="WindowHandler.exist['+this.winIndex+'].checkChatTitle(this.value)";/></form>'};this.focusChatTitle=function(){try{var b=this.getInnerObject("wmseditchattitletxt","INPUT");b.select();b.focus()}catch(a){}};this.editChatTitle=function(){var a=this.getInnerObject("wmschattitle","SPAN");a.innerHTML=" ";a.innerHTML=this.populateChatTitleEdit();this.focusChatTitle()};this.checkChatTitle=function(b){try{b=b.trim();if(b.length==0||b.length>200){this.focusChatTitle();return false}else{this.setTitle(unescape(this.getTitle()))}}catch(a){return false}};this.saveChatTitle=function(b){try{b=b.trim();if(this.getTitle()!=b){if(b.length==0){alert(WmsResource.getRealValue("Please_enter_the_chat_title"));this.focusChatTitle();return false}if(b.length>200){alert(WmsResource.getRealValue("Max_200_chatracters_allowed_for_chat_title"));this.focusChatTitle();return false}WebMessanger.setChatTitle(this.objId,b);this.setTitle(b)}}catch(a){}};this.showAddMember=function(e){var b=this.getInnerObject("ctoolbar","SPAN");var c=this.getInnerObject("addmember","DIV");var f=this.getInnerObject("addmemberinput","INPUT");if(b.style.display=="block"){b.style.display="none";c.style.display="block";this.getInnerObject("addmemberimg","IMG").className="wms-addmember-disable";this.ctrlcomp.style.height=this.ctrlcomp.offsetHeight-this.addmemheightdiff+"px";f.value="";f.focus();var a=this.getInnerObject("wmsgroupmbr","DIV");if(a.style.display=="block"){a.style.display="none";this.msgdisp.style.display="block";this.getInnerObject("wmsgrpmbmrs","P").innerHTML=WmsResource.getRealValue("Show_Members")}}else{b.style.display="block";c.style.display="none";this.ctrlcomp.style.height=this.ctrlcomp.offsetHeight+this.addmemheightdiff+"px";this.getInnerObject("wms-addmemouter","DIV").style.display="none"}};this.addMember=function(){if(this.getInnerObject("addmemberimg","IMG").className!="wms-addmember-enable"){return}var a=this.getInnerObject("addmemberinput","INPUT");var b=this.getInnerObject("addmemberhiddeninput","INPUT");textvalue=a.value.trim();wmsidvalue=b.value.trim();if(textvalue!=""||textvalue==null){WebMessanger.addMember(this.objId,textvalue,wmsidvalue)}a.value="";b.value="";this.getInnerObject("addmemberimg","IMG").className="wms-addmember-disable";this.showAddMember()};this.populateAddMember=function(n){var r=this.getInnerObject("addmemberinput","INPUT");var a=r.value.trim();var g=this.getInnerObject("addmemberimg","IMG");var c=this.getInnerObject("wms-addmemouter","DIV");if(a.indexOf("@")!=-1&&a.indexOf("@")>1){if(g.className=="wms-addmember-disable"){g.className="wms-addmember-enable"}}var o=a.substring(a.lastIndexOf(",")+1,a.length);if(!n){n=(n==undefined)?window.event:n}var t=n.keyCode?n.keyCode:n.which;if(t==27){var h=this.getInnerObject("addmember","DIV");if(h.style.display=="block"){h.style.display="none";this.getInnerObject("ctoolbar","SPAN").style.display="block";if(c.style.display=="block"){c.style.display="none"}this.getInnerObject("actiondiv","DIV").style.display="none";this.ctrlcomp.style.height=this.ctrlcomp.offsetHeight+this.addmemheightdiff+"px"}}else{if(t==40){try{var f=WMSUI.addmemacont.getElementsByTagName("p")}catch(q){}try{f[WMSUI.selectaddmemberid].className="wms-stp"}catch(s){WMSUI.selectaddmemberid=-1}try{if(WMSUI.selectaddmemberid<6){WMSUI.selectaddmemberid++}}catch(n){}try{f[WMSUI.selectaddmemberid].className="wms-stp-hover"}catch(s){}}else{if(t==38){try{var f=WMSUI.addmemacont.getElementsByTagName("p")}catch(s){}try{f[WMSUI.selectaddmemberid].className="wms-stp"}catch(q){}try{if(WMSUI.selectaddmemberid>0){WMSUI.selectaddmemberid--}}catch(p){}try{f[WMSUI.selectaddmemberid].className="wms-stp-hover"}catch(l){}}else{if(t==13){if(c.style.display=="block"){try{var f=WMSUI.addmemacont.getElementsByTagName("p");var b=WmsContacts.getEmailId(f[WMSUI.selectaddmemberid].id);WMSUI.addMember(b,this.objId,f[WMSUI.selectaddmemberid].id)}catch(n){}}else{this.addMember()}}else{if(!a.length||a==WmsResource.getRealValue("Enter_an_email_address")){g.className="wms-addmember-disable";c.style.display="none";return}else{WMSUI.showAddmemberCntlist(this,o)}}}}}};this.handleFileClick=function(b){var a=this.getInnerObject("actiondiv","DIV");var c=this.winIndex;if(a.style.display=="block"){WMSUI.addIndocClickcallbackQue("chat"+this.getObjId(),a,function(e){if(e!="ta_"+c&&e!="wms-file"){a.style.display="none"}},b)}};this.popoutSetIdle=function(a){this.popoutidle=a};this.changeActive=function(){WMSUI.handleDocumentActive()};this.skipTranscript=function(a){WebMessanger.skipTranscript(a)};this.enableTranscript=function(a){WebMessanger.enableTranscript(a)};this.showSkipTranscriptMsg=function(a,c){if(a==undefined){return}var b;if(a=="TRANS SKIPPED"){b=WmsResource.getRealValue("$1_choosed_to_skip_the_transcript_for_this_chat",c);this.writetrans=false}else{if(a=="TRANS ENABLED"){b=WmsResource.getRealValue("$1_enabled_the_transcript_for_this_chat",c);this.writetrans=true}else{b=""}}b='<dd class="wmstxt1"><div class="inftxt">'+b+"</div></dd>";Message.display(this.objId,b,false)};this.updateSkipTranscriptMessage=function(){if(this.writetrans==false){var a=WmsResource.getRealValue("The_chat_transcript_for_this_chat_is_not_enabled");a='<dd class="wmstxt1"><div class="inftxt">'+a+"</div></dd>";if(a!=null){Message.display(this.objId,a,false)}}};this.getTranscript=function(){if(this.objId!=undefined){setTimeout("WebMessanger.transcript("+this.objId+")",3000)}};this.joinChat=function(){if(this.objId!=undefined){setTimeout("WebMessanger.join('"+this.objId+"')",3000)}};this.checkAndPopulateGroupMembers=function(){if(this.getInnerObject("wmsgroupmbr","DIV").style.display=="block"){this.populateGroupMembers()}};this.populateGroupMembers=function(){var q=this.getInnerObject("wmsgroupmbr","DIV");var e="";var b="";var f="";var l="";var r=26;var c=27;if(this.partcount>36){r=21;c=23;classname="wms-groups-prt2"}for(var p in this.partinfo){var h=this.objId;var n=(this.partinfo[p]["uname"]).trim();var g=this.partinfo[p]["dname"];var a=WmsContacts.status(n.substring(n.indexOf("|")+1,n.length));var o="status-"+a;if(n.length>0){imgurl=_WMSPHOTOSERVER+"/file?ID="+n+"&t=user&height=30&width=30"}if(a==1){e+=this.getGroupMemberHTML(n,g,o,a)}else{if(a==3){b+=this.getGroupMemberHTML(n,g,o,a)}else{if(a==4){f+=this.getGroupMemberHTML(n,g,o,a)}else{l+=this.getGroupMemberHTML(n,g,o,a)}}}}if(this.ctrlcomp.className=="wmscmda"){this.ctrlcomp.style.height="";this.ctrlcomp.className="wmscmd"}q.innerHTML=e+b+f+l;this.msgdisp.style.display="none";q.style.display="block";this.getInnerObject("wmsgrpmbmrs","P").innerHTML=WmsResource.getRealValue("Hide_Members")};this.getGroupMemberHTML=function(o,g,n,b){var l="";var c="wms-groups-prt1";var s="https://img.zohostatic.com/ichat/v42_https/images/bar/contactphoto.gif";var e=o;if(o.trim()!=""){s=_WMSPHOTOSERVER+"/file?ID="+o+"&t=user&height=30&width=30"}if(WmsContacts.isMPUser(o)){e=o.substring(o.indexOf("|")+1,o.length);s=WmsContacts.getMPUserPhoto(e)}g=WmsContacts.contactslist[e]["DNAME"];if(g==undefined){g=WmsContacts.getMPDispName(e)}var q=26;var a=27;var f=this.objId;if(this.partcount>36){q=21;a=23;c="wms-groups-prt2"}if(b==1||b==3||b==4||b==0){var r=c;var h=c+" wmsdelicosho"}else{var r=c+" wmsgrpmemoff";var h=c+" wmsgrpmemhov wmsdelico"}l+='<div class="'+r+'" onmouseover="this.className=\''+h+"';\" onmouseout=\"this.className='"+r+"';\">";if(this.partcount>1){l+='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="wmsdelico dstbin" title="'+WmsResource.getRealValue("Delete")+"\" style=\"bottom:0px;position:absolute;left:0\" onclick=\"WMSUI.deleteParticipant('CHATID','ZUID','DNAME')\">"}l+='<img src="'+s+'" title="'+g+'" alt="" height="'+q+'" width="'+a+'"/>';var p=WmsContacts.status(e);if(p!==false){if(p>-1&&p<=4){l+='<img src="https://img.zohostatic.com/ichat/v42_https/images/spacer.gif" class="'+n+'"/>'}}l+="</div>";l=l.replace(/CHATID/g,f);l=l.replace(/ZUID/g,o);l=l.replace(/DNAME/g,g);return l};this.toggleGroupMembers=function(b){var a=this.getInnerObject("wmsgroupmbr","DIV");if(a.style.display=="block"){a.style.display="none";this.msgdisp.style.display="block";this.getInnerObject("wmsgrpmbmrs","P").innerHTML=WmsResource.getRealValue("Show_Members")}else{this.populateGroupMembers()}};this.showProgress=function(a,e,c){var b='<div class="wms-loadingmn"><div class="wms-loading-sub" id="wmsprogressbar"></div><div id="wmsloadingtxt"class="wms-loading-text">'+WmsResource.getRealValue("Sharing")+"</div>";if(c>1){b='<div class="wms-loadingmn"><div class="wms-loading-sub" id="wmsprogressbar"></div><div id="wmsloadingtxt"class="wms-loading-text">'+WmsResource.getRealValue("Sharing_$1_of_$2",e+","+c)+"</div>"}this.cuserstatus.innerHTML=b;WindowHandler.getObjectInObject(this.cuserstatus,"wmsprogressbar","div").style.width=a+"%";if(this.popedout==true){this.child.Message.showProgress(a,e,c)}};this.clearProgress=function(){this.cuserstatus.innerHTML="&nbsp;";if(this.popedout==true){this.child.Message.clearProgress()}};this.loadContinueChatTranscript=function(f,c){try{c.style.display="none";var a=this.msgdisp.innerHTML;this.msgdisp.innerHTML=f+a}catch(b){}}}function Factory(){}Factory.createDialog=function(c,f,b){var e=new ChatWindow();WindowHandler.exist.push(e);index=WindowHandler.exist.length-1;e.setIndex(index);var a=e.create(c,f,b);return a};Factory.removeDialog=function(f,a){try{var b=(WindowHandler.exist[f]);if(a&&!WebMessanger.registerAnnonUser){WebMessanger.quit(b.getObjId())}delete b;WindowHandler.exist[f]="empty";WindowHandler.rearrange()}catch(c){}};Factory.destroyDialog=function(b,a){Factory.removeDialog(b,a);WindowHandler.reopenRemovedChat()};function WindowHandler(){}WindowHandler.updateParticipantsByID=function(c,b){var a=WindowHandler.getWinObjById(c);a.updateParticipants(b)};WindowHandler.deleteParticipantsByID=function(a,c){var b=WindowHandler.getWinObjById(a);b.deleteParticipants(c);b.checkAndPopulateGroupMembers()};WindowHandler.addParticipantsByID=function(a,c){var b=WindowHandler.getWinObjById(a);b.addParticipants(c)};WindowHandler.init=function(){this.count=0;var a=(ie&&!ie7)?document.documentElement.clientWidth:document.body.clientWidth;this.maxWin=parseInt((a-450)/203);if(this.maxWin<3){this.maxWin=2}this.exist=new Array();this.removed=new Array();this.lastViewed=-1;this.children=new Array();this.openedChats=new Object();this.prevtime=null;this.servicepopout=new Array()};WindowHandler.reopenRemovedChat=function(){try{var a=WindowHandler.removed.pop();if(a!=null){WebMessanger.join(a)}}catch(b){}};WindowHandler.getChatCount=function(){return this.count};WindowHandler.getPreChatTime=function(a){var b=WindowHandler.getWinObjById(a);if(b!=null){return b.prechattime}};WindowHandler.setPreChatTime=function(a,c){var b=WindowHandler.getWinObjById(a);if(b!=null){b.prechattime=c}};WindowHandler.removeExcessChat=function(b){try{var f=0;var a=null;for(var g=0;g<WindowHandler.exist.length;g++){var c=WindowHandler.exist[g];if(c!="empty"&&c!=null&&!c.isPopedOut()&&document.getElementById(c.getObjId())!=null){if(c.getObjId()!=b&&a==null){a=c}f++}}if(f>this.maxWin){WindowHandler.removed.push(a.getObjId());a.win.style.display="none";WindowHandler.chatbar.removeChild(a.win);WindowHandler.chatbar.removeChild(a.bar);setTimeout("Factory.removeDialog("+a.winIndex+",false)",10);WindowHandler.count--}else{WindowHandler.rearrange()}}catch(g){}};WindowHandler.enable=function(a){if(a==-1){return}if(WindowHandler.exist[a]!="empty"&&WindowHandler.exist[a]!=null&&!WindowHandler.exist[a].isMinimized()){WindowHandler.exist[a].enable()}else{WindowHandler.lastViewed=-1;for(var b=0;b<WindowHandler.exist.length;b++){if(WindowHandler.exist[b]!="empty"&&WindowHandler.exist[b]!=null&&!WindowHandler.exist[b].isMinimized()){WindowHandler.exist[b].enable();return}}}};WindowHandler.setChatBar=function(a){this.chatbar=a};WindowHandler.getObjectInObject=function(c,a,f){var b=c.getElementsByTagName(f);for(var e=0;e<b.length;e++){if(b[e].id==a){return b[e]}}return null};WindowHandler.getBarObject=function(a,b){return WindowHandler.getObjectInObject(this.chatbar,a,b)};WindowHandler.moveFocus=function(b){try{var f=0;var c=0;var a=new Object();for(var l=0;l<WindowHandler.exist.length;l++){try{var h=WindowHandler.exist[l];if(h!="empty"&&h!=null){if(h.win!=null&&h.win!=undefined&&!h.popedout&&!h.isMinimized()){if(f==0){a=h}f++;if(h.getObjId()==b){c=b;continue}if(c!=0){try{h.selectChat();h.focus()}catch(l){}return false}}}}catch(l){}}try{a.selectChat();a.focus()}catch(g){}return false}catch(n){}};WindowHandler.rearrange=function(){var b=0;var h=false;WindowHandler.openedChats=new Object();for(var g=0;g<WindowHandler.exist.length;g++){try{var f=WindowHandler.exist[g];if(f!="empty"&&f!=null){if(f.win!=null&&f.win!=undefined&&!f.popedout&&f.bar.style.display=="block"){var c=f.left+(f.width*b++);f.win.style.left=c+"px";WindowHandler.openedChats[f.getObjId()]=(f.isMinimized())?"min":"max";h=true}else{if(f.popedout){h=true}}}}catch(g){}}try{if(!h){WMSUI.focusSearch()}}catch(a){}Cookie.update()};WindowHandler.isCurrentWin=function(c){try{c=""+c;if(WindowHandler.lastViewed!=-1){var a=WindowHandler.exist[WindowHandler.lastViewed].getObjId();if(a==c){return true}}return false}catch(b){}return true};WindowHandler.makeNormalWinById=function(a){try{var c=WindowHandler.getWinObjById(a);c.makenormal()}catch(b){}};WindowHandler.highlightByWinId=function(a){try{var c=WindowHandler.getWinObjById(a);c.highlight()}catch(b){}};WindowHandler.enableWinById=function(a){try{var c=WindowHandler.getWinObjById(a);c.enable()}catch(b){}};WindowHandler.getWinObjById=function(a){a=""+a;for(var c=0;c<WindowHandler.exist.length;c++){var b=WindowHandler.exist[c];if(b!="empty"&&b!=null){if(b.getObjId()==a){return b}}}return null};WindowHandler.checkFreeChildIndex=function(){try{for(var b=0;b<WindowHandler.children.length;b++){if(WindowHandler.children[b]=="empty"){return b}}}catch(a){}return -1};WindowHandler.gcChildIndex=function(){try{if(WindowHandler.children.length>0&&WindowHandler.children[WindowHandler.children.length-1]=="empty"){WindowHandler.children.pop();WindowHandler.gcChildIndex()}}catch(a){}};WindowHandler.removeWinById=function(c){try{var b=WindowHandler.getWinObjById(c);b.remove()}catch(a){}};WindowHandler.closeWinById=function(c){try{var b=WindowHandler.getWinObjById(c);b.close()}catch(a){}};WindowHandler.updateUserStatus=function(a,b,f){try{for(var g=0;g<WindowHandler.exist.length;g++){if(WindowHandler.exist[g]!="empty"&&WindowHandler.exist[g]!=null){var h=a;var c=WindowHandler.exist[g];if(WmsContacts.isMPUser(a)){h="*"+WebMessanger.getZuid()+"|"+a;if(f.length==0){f=WmsContacts.defaultstatusmsg[b]}}c.updatePartinfo(h,b,f);if(c.partcount==1&&c.partinfo[h]!=undefined){c.updateUserStatus(b,f);if(b==0){c.updateOfflineMessage(h)}else{if(b!=0&&c.offlinemessage){c.updateOnlineMessage(h)}}}if(c.popedout&&c.partinfo[h]!=undefined){MyChild.updateParticipants(c.objId)}}}}catch(g){}};WindowHandler.closeAllChild=function(){try{for(var b=0;b<WindowHandler.children.length;b++){WindowHandler.children[b].close()}}catch(a){}};WindowHandler.hideAllChats=function(){for(var b=0;b<WindowHandler.exist.length;b++){try{WindowHandler.exist[b].hide()}catch(a){}}};WindowHandler.getAllChatTranscript=function(){for(var b=0;b<WindowHandler.exist.length;b++){try{WindowHandler.exist[b].getTranscript()}catch(a){}try{WindowHandler.exist[b].joinChat()}catch(a){}}};WindowHandler.setTitle=function(a,b){WindowHandler.getWinObjById(a).setTitle(b)};WindowHandler.updateStatus=function(a,b,c){WindowHandler.getWinObjById(a).updateUserStatus(b,c)};WindowHandler.blurChatById=function(a){try{WindowHandler.getWinObjById(a).blurChat()}catch(b){}};WindowHandler.focusChatById=function(a){WindowHandler.getWinObjById(a).focus()};WindowHandler.minimizeAll=function(){for(var b=0;b<WindowHandler.exist.length;b++){try{WindowHandler.exist[b].minimize()}catch(a){}}};WindowHandler.isPopoutIdle=function(){for(d=0;d<WindowHandler.exist.length;d++){var a=WindowHandler.exist[d];if(a.popedout&&!isNaN(a.objId)){if(!a.popoutidle){return false}}}return true};WindowHandler.registerpopout=function(a){WindowHandler.servicepopout.push(a)};WindowHandler.checkRegisterPopoutIdle=function(){for(i=0;i<WindowHandler.servicepopout.length;i++){try{var b=WindowHandler.servicepopout[i];if(b.ActivityTracker.checkActivity()){return false}}catch(a){WindowHandler.servicepopout.pop[i]}}return true};WindowHandler.changeActive=function(){WMSUI.handleDocumentActive()};WindowHandler.skipTranscript=function(e){var b=e.msg;var a=b.chid;var c=b.mode;var f=b.dname;for(d=0;d<WindowHandler.exist.length;d++){var g=WindowHandler.exist[d];if(g.objId==a){g.showSkipTranscriptMsg(c,f)}}};WindowHandler.loadContinueChatTranscript=function(a,b,c){for(d=0;d<WindowHandler.exist.length;d++){var e=WindowHandler.exist[d];if(e.objId==a){e.loadContinueChatTranscript(b,c)}}};WindowHandler.showProgress=function(a,c,e){var b=WindowHandler.getWinObjById(a);if(b!=null){b.showProgress(c,e,WmsDragDrop.nooffiles)}};WindowHandler.clearProgress=function(a){var b=WindowHandler.getWinObjById(a);if(b!=null){b.clearProgress()}};WindowHandler.isMultiProtocolChat=function(a){var b=WindowHandler.getWinObjById(a);if(b!=null){return b.isMultiProtocolChat()}return false};function MyChild(){}MyChild.callback=function(b){try{WindowHandler.exist[b].callBack()}catch(a){}};MyChild.close=function(b){var a=WindowHandler.exist[b];if(a.popedout){a.popin(true)}};MyChild.popin=function(a){WindowHandler.exist[a].popin(false)};MyChild.getObj=function(a){return WindowHandler.exist[a]};MyChild.blink=function(f,c){var a=WindowHandler.getWinObjById(f);if(a.popedout){try{WindowHandler.getWinObjById(f).child.Blink.start(c)}catch(b){}}};MyChild.handleEvent=function(b,a,c){WMSUI.handleEvent(b,a,c,"opener")};MyChild.updateMsg=function(g,a,f){var b=WindowHandler.getWinObjById(g);if(b.popedout){try{WindowHandler.getWinObjById(g).child.Message.update(a,f)}catch(c){}}};MyChild.updateStatus=function(f,c){var a=WindowHandler.getWinObjById(f);if(a.popedout){try{WindowHandler.getWinObjById(f).child.Self.updateStatus(c)}catch(b){}}};MyChild.updateParticipants=function(c){var a=WindowHandler.getWinObjById(c);if(a.popedout){try{a.child.Popout.editChatParticipants()}catch(b){}}};MyChild.setObject=function(b,a){WindowHandler.exist[b].child=a};Message.currentmsg=0;Message.msglist=new Object();Message.lastjoinId=-1;function Message(){var a}var isMCShown=false;var currentTotal=0;var msgCount=0;Message.PREV_SENDER=new Object();Message.PREV_MESSAGE="";Message.SENDERCOLOR=new Object();Message.SENDERCOUNT=0;var myMsgObj=new Object();Message.send=function(a,c,b){WebMessanger.sendMessage(a,c,b);myMsgObj.chid=a;myMsgObj.msg=HtmlTag.makeItReadable(c);if(b!=undefined&&b.trim()!==""){myMsgObj.msg="<span style='"+b+"'>"+myMsgObj.msg+"</span>"}Message.formatAndDisplay(myMsgObj);Self.isIdle[a]=true};Message.isLocalUser=function(a){if(a==myMsgObj.sender){return true}return false};Message.isSameBrowser=function(a){if(a==WebMessanger.getSid()){return true}return false};Message.minimize=function(b){try{var a=b.chid;var c=WindowHandler.getWinObjById(a);c.minimize()}catch(f){}};Message.show=function(b){try{var a=b.chid;var c=WindowHandler.getWinObjById(a);if(c.isPopedOut()){return}if(!c.isPopedOut()&&c.isMaximised()){c.display()}else{if(c.isMinimized()){c.highlight()}}}catch(f){}};Message.close=function(b){try{var a=b.chid;var c=WindowHandler.getWinObjById(a);c.hideWin()}catch(f){}};Message.formatMessage=function(a){var b="";try{var t=a.chid;b=a.msg;var g=a.sender;var q=a.zuid;var n=Chat.isExists(t);if(n&&g=="CT_INF_MSG"){b='<dd class="wmstxt1"><div class="inftxt">'+b+"</div></dd>";Message.display(t,b,false);return}try{a.dname=WebMessanger.getContactName(q,WmsContacts.getMPDispName(a.dname))}catch(h){a.dname=g}var p=a.mod;if(p!=null&&p=="att"){var l=Message.constructAttUrl(a.msg);b="<div class='sendfl' border='1px solid #ff0000;'>"+l+"</div>"}else{b=Message.getDisplayContent(b)}var c=""+MyDate.formatTime(new Date().getTime());var r=a.sender;if(r!=null){var f=Message.SENDERCOLOR[r];if(f==null){(Message.SENDERCOUNT)++;f=0;f=Message.SENDERCOUNT;if(f>7){f=f%7;if(f==0){f=7}}Message.SENDERCOLOR[r]=f}var u='<dd class="wmstxt'+f+'">'+b+"</dd>";var s='<dt class="wmssender'+f+'"><span class="wms-ctime">'+c+"</span>"+trimLength(a.dname,13)+"</dt>";if(r==Message.PREV_SENDER["ch"+t]&&Message.PREV_SENDER["ch"+t]!=undefined&&Message.PREV_SENDER["ch"+t]!=null){s=""}b=s+u;Message.PREV_SENDER["ch"+t]=g}}catch(o){}return b};Message.formatAndDisplay=function(a){try{var v=a.chid;var c=a.msg;var l=a.sender;var s=a.zuid;var g=true;var p=Chat.isExists(v);if(p&&l=="CT_INF_MSG"){c='<dd class="wmstxt1"><div class="inftxt">'+c+"</div></dd>";Message.display(v,c,false);return}try{if(WmsContacts.isMPUser(a.uname)){a.dname=WmsContacts.getDisplayName(a.mprecipant)}else{a.dname=WebMessanger.getContactName(s,WmsContacts.getMPDispName(a.dname))}}catch(n){a.dname=l}if(!p&&l!="CT_INF_MSG"){Self.Idle=true;ChatBlink.start(a.dname+" "+WmsResource.getRealValue("Says")+"...");Message.lastjoinId=v;WebMessanger.join(v);return}else{if(!p&&l=="CT_INF_MSG"){return}}var r=a.mod;if(r!=null&&r=="att"){var o=Message.constructAttUrl(a.msg);c="<div class='sendfl' border='1px solid #ff0000;'>"+o+"</div>"}else{c=Message.getDisplayContent(c)}var f=""+MyDate.formatTime(new Date().getTime());var t=a.sender;if(Message.PREV_SENDER["ch"+v]==null||Message.PREV_SENDER["ch"+v]==undefined){f=""+MyDate.formatFirstMsgTime(new Date().getTime());g=false;msgcnt=0}if(t!=null){var h=Message.SENDERCOLOR[t];if(h==null){(Message.SENDERCOUNT)++;h=0;h=Message.SENDERCOUNT;if(h>7){h=h%7;if(h==0){h=7}}Message.SENDERCOLOR[t]=h}var w='<dd class="wmstxt'+h+'">'+c+"</dd>";dname=trimLength(a.dname,13);if(Message.isLocalUser(a.zuid)){dname=WmsResource.getRealValue("Me")}var u='<dt class="wmssender'+h+'"><span class="wms-ctime"></span>'+dname+"</dt>";prevtime=WindowHandler.getPreChatTime(v);if(prevtime==null||prevtime!=f){u='<dt class="wmssender'+h+'"><span class="wms-ctime">'+f+"</span>"+dname+"</dt>"}if(t==Message.PREV_SENDER["ch"+v]&&Message.PREV_SENDER["ch"+v]!=undefined&&Message.PREV_SENDER["ch"+v]!=null){u=""}if(prevtime!=f&&g==true&&msgcnt!=1&&u==""){w='<dd class="wmstxt'+h+'"><div class="wmstimediv"><span class="wms-ctime wmsctime-msg">'+f+"</span><span>"+c+"</span></div></dd>"}WindowHandler.setPreChatTime(v,f);msgcnt++;c=u+w}Message.display(v,c,false);Message.PREV_SENDER["ch"+v]=l;Chat.getScrollDown(v);if(l=="CT_INF_MSG"||l==WebMessanger.getUserName()||l==WebMessanger.getZuid()){return}var b=WindowHandler.getWinObjById(v);Self.Idle=true;b.highlight();if(b.popedout){b.child.ChatBlink.scrollTitle(a.dname+" "+WmsResource.getRealValue("Says")+"...")}else{ChatBlink.start(a.dname+" "+WmsResource.getRealValue("Says")+"...")}}catch(q){}};Message.replaceAttURL=function(a){a=a.replace(/images\/icon\/dwn-arrow.gif/g,"https://img.zohostatic.com/ichat/v42_https/images/dwn-arrow.gif");a=a.replace(/\/download.sas.mime/g,_WMSCHATURL+"download.sas?mime");return a};Message.getSenderBlock=function(f,c,l,e,a){var h=Message.SENDERCOLOR[f];if(h==null){(Message.SENDERCOUNT)++;var b=0;b=Message.SENDERCOUNT;if(b>7){b=b%7;if(b==0){b=7}}h=b;Message.SENDERCOLOR[f]=h}var g='<dt class="wmsln"><span class="wms-ctime">'+l+"</span>"+c+"</dt>";if(f==Message.PREV_SENDER["ch"+a]&&Message.PREV_SENDER["ch"+a]!=undefined){g=""}return g};Message.addBreak=function(c){return c;var e=new Array();if(c.length>25){var b=0;for(var a=0;a<c.length;a=a+25){e[b++]=c.substr(a,a+24)}c=e.join("<wbr>")}return c};Message.display=function(b,l,c){b=""+b;var n=Chat.parseDiv(b,"ctrlcomp","div");if(n==null){return}var a=null;var q=n.getElementsByTagName("DL");for(var h=0;h<q.length;h++){if(q[h].id=="msgdisp"){a=q[h];break}}if(!ie){l=util.optimizeFontForMozilla(l)}if(a!=null){var f=true;if((n.scrollHeight-n.scrollTop)==n.clientHeight||n.scrollHeight<n.clientHeight){f=false}var g=a.innerHTML+l;a.innerHTML=g;try{MyChild.updateMsg(b,l,c)}catch(p){}if(!f||c){n.scrollTop=n.scrollHeight-n.clientHeight}}};Message.trim=function(a){a=a.replace(/<br>/gi,"");a=a.replace(/<p>/gi,"");a=a.replace(/<\/p>/gi,"");a=a.replace(/<a/gi,"<a target='_blank'");a=a.replace(/\n/gi,"<br>");a=a.replace(/^\s*$/gi,"");a=a.replace(/<br>$/gi,"");return a};Message.format=function(f){try{f=" "+f;var c=/([a-z0-9]([a-z0-9_\-\.]*)@([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}))/gi;var b=/([^(href|src)="'])(((http(s){0,1}:\/\/))([^ <]*))/gi;var a=/([^(href|src|\/\/)"'=])((www\.)([^ <]*))/gi;f=f.replace(c,"<a href='mailto:$1'>$1</a>");f=f.replace(b,"$1<a href='$2' target='_blank'>$2</a>");f=f.replace(a,"$1<a href='http://$2' target='_blank'>$2</a>")}catch(e){}return f};Message.constructAttUrl=function(a){return"<img src='https://img.zohostatic.com/ichat/v42_https/images/dwn-arrow.gif'>&nbsp;<a target=_blank href='"+_WMSCHATURL+"download.sas?mime="+escape(a.content)+"&url="+escape(a.url)+"&fName="+encodeURIComponent(a.fName)+"'>"+a.fName+"</a>&nbsp;<span class='sendflinfo'>(Size: "+a.size+", Type: "+a.content+")</span>"};Message.getDisplayContent=function(a){a=Smiley.replace(a);a=Message.trim(a);a=Message.format(a);return a};Message.autofill=function(c,a){try{if(Message.msglist[a]==undefined){Message.msglist[a]=new Array()}Message.msglist[a][Message.msglist[a].length]=c;Message.currentmsg=-1;if(Message.msglist[a].length>60){Message.msglist[a]=Message.msglist[a].splice(20,60)}}catch(b){}};Message.autocomplete=function(c,b,a){try{if(b.value.trim()==""&&(c.keyCode==38||c.keyCode==40)&&Message.msglist[a]!=undefined&&Message.msglist[a][0]!=undefined){if(c.keyCode==38){Message.currentmsg++;if(Message.currentmsg>Message.msglist[a].length-1){Message.currentmsg=0}}else{if(c.keyCode==40){Message.currentmsg--;if(Message.currentmsg<0){Message.currentmsg=Message.msglist[a].length-1}}}b.value=Message.msglist[a][Message.msglist[a].length-1-Message.currentmsg]}}catch(c){}};Message.getInfoMsgString=function(c){var h=c.mode;var g="";switch(h){case"GUEST ENTERED":g=WmsResource.getRealValue("Guest")+" "+(c.nname)+" "+WmsResource.getRealValue("entered_the_chat");break;case"USER ADDED":var b=new Array();var e=c.userslist;var f=c.opruser;for(var a in e){b.push(WebMessanger.getContactName(a,e[a]))}g=(WebMessanger.getContactName(f.zuid,f.nname))+" "+WmsResource.getRealValue("added")+" "+b.join(",");break;case"GUEST LEFT":g=WmsResource.getRealValue("Guest")+" "+(c.nname)+" "+WmsResource.getRealValue("left_the_chat");break;case"USER DELETED":var b=new Array();var e=c.userslist;var f=c.opruser;for(var a in e){b.push(WebMessanger.getContactName(a,e[a]))}g=(WebMessanger.getContactName(f.zuid,f.nname))+" "+WmsResource.getRealValue("deleted")+" "+b.join(",");break;case"GUEST ACCESS":var f=c.opruser;g=(WebMessanger.getContactName(f.zuid,f.nname))+" "+WmsResource.getRealValue("turned")+" "+((c.access=="on")?WmsResource.getRealValue("on"):WmsResource.getRealValue("off"))+" "+WmsResource.getRealValue("guest_access");break;case"TITLE CHANGE":var f=c.opruser;g=(WebMessanger.getContactName(f.zuid,f.nname))+" "+WmsResource.getRealValue("names_the_chat_as")+" "+(c.title);break}return g};Message.decodehtml=function(a){var b=a.replace(/&lt;/g,"<");b=b.replace(/&gt;/g,">");return b};function Chat(){}var PREVCONID="-1";var CURCONID="-1";var CURCHATS=new Array();Chat.isExists=function(a){var b=document.getElementById(a);if(b!=null){return true}return false};Chat.getScrollDown=function(b){var a=Chat.parseDiv(b,"msgdisp","div");if(a!=null){a.scrollTop=a.scrollHeight-a.clientHeight}};Chat.highlight=function(a){if(!WindowHandler.isCurrentWin(a)){WindowHandler.highlightByWinId(a)}};Chat.parseDiv=function(b,g,f){var a=document.getElementById(b);if(a!=null){var c=a.getElementsByTagName(f);for(var h=0;h<c.length;h++){if(c[h].id==g){return c[h]}}}};var op=/opera|opera 5|opera\/5/i.test(navigator.userAgent);var opera_browser=op;var ie=!op&&/msie/i.test(navigator.userAgent);var mz=!op&&!ie&&/mozilla\/5/i.test(navigator.userAgent);var wms_sf=(((navigator.userAgent).indexOf("Safari")!=-1));var version=parseInt(navigator.appVersion);var ie5=(ie&&(version==4)&&(navigator.userAgent.indexOf("msie 5.0")!=-1));var ie5_5=(ie&&(version==4)&&(navigator.userAgent.indexOf("msie 5.5")!=-1));var ie6=(ie&&(version==4)&&(navigator.userAgent.indexOf("msie 6.")!=-1));var ie7=(ie&&navigator.userAgent.indexOf("MSIE 7.")!=-1);if(!ie&&document.layers){var browser_nn4=true}else{if(document.layers||(!document.all&&document.getElementById)){var browser_nn6=true}}function Util(){this.findPosX=c;this.findPosY=a;this.clearTextSelection=s;this.findDocDim=o;this.getObj=b;this.getTZString=f;this.makeTimeReadable=n;this.downloadFile=l;this.anonDownloadFile=r;this.optimizeFontForMozilla=optimizeFontForMozilla;this.insertSpanForColor=insertSpanForColor;this.validateEmail=e;this.trimLength=trimLength;this.isEmpty=h;this.mousePosX=q;this.mousePosY=p;this.findPosXY=g;function g(v,t){var w=0;var u=0;if(document.getElementById||document.all){while(v&&v.parentNode&&v.offsetParent){w+=(t)?v.offsetLeft:(v.offsetLeft-v.scrollLeft);u+=(t)?v.offsetTop:(v.offsetTop-v.scrollTop);v=v.offsetParent}}else{if(document.layers){w+=(t)?v.x:(v.x-v.scrollLeft);u+=(t)?v.y:(v.y-v.scrollTop)}}return{x:w,y:u}}function q(u){var t=0;if(u.pageX){t=u.pageX}else{if(u.clientX){t=(u.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft))}}return t}function p(t){var u=0;if(t.pageY){u=t.pageY}else{if(t.clientY){u=(t.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop))}}return u}function c(t){var u=0;if(t!=null){if(document.getElementById||document.all){while(t.offsetParent){u+=t.offsetLeft;t=t.offsetParent}}else{if(document.layers){u+=t.x}}}return u}function a(u){var t=0;if(u!=null){if(document.getElementById||document.all){while(u.offsetParent){t+=(u.offsetTop-u.scrollTop);u=u.offsetParent}}else{if(document.layers){t+=u.y}}if(!ie){t=t+document.body.scrollTop}}return t}function s(){if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}}function o(){if(ie&&!ie7){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}else{return{width:document.body.clientWidth,height:document.body.clientHeight}}}function b(z,w){var v,u,t;if(!w){w=document}if((v=z.indexOf("?"))>0&&parent.frames.length){w=parent.frames[z.substring(v+1)].document;z=z.substring(0,v)}if(!(t=w[z])&&w.all){t=w.all[z]}for(u=0;!t&&u<w.forms.length;u++){t=w.forms[u][z]}for(u=0;!t&&w.layers&&u<w.layers.length;u++){t=b(z,w.layers[u].document)}if(!t&&w.getElementById){t=w.getElementById(z)}return t}function f(v,t){if(v==""||t==""){return""}var u=v.lastIndexOf(":");if(u==-1){return""}return v.substring(0,u)+" "+t}function n(w,u){var t=util.getTZString(w,u);var v=t.split(" ");var w;if(v.length==3){w=v[0]+" at "+v[1]+" "+v[2]}return w}function l(t,u){return"/download.do?module="+t+((u!=undefined&&u!=null&&u!="")?"&url="+u:"")}function r(t,u){return"/download.ua?module="+t+((u!=undefined&&u!=null&&u!="")?"&url="+u:"")+nocachefix()}function e(w){if(w==undefined||w==null||w==""){alert("Enter the mail id(s) to invite.");return false}var w=w.split(",");var v="";for(var t=0;t<w.length;t++){if(!(w[t].length>0)){continue}var u=/^[a-z0-9]([a-z0-9_\-\.]*)@([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2})$/i;if(!u.test(w[t])){if(v.length>0){v+","}v=v+w[t]}}if(v.length>0){alert("Following mail id(s) were found to be invalid.\n"+v);return false}return true}function h(t){if((t.trim()).length>0){return false}return true}this.checkEmpty=function(t,u){if(t.value.trim()==u){t.value=""}};this.fillDefault=function(t,u){if(t.value.trim()==""){t.value=u}};this.toggle=function(t){if(t.style.display=="block"){t.style.display="none"}else{t.style.display="block"}}}var util=new Util();function instanceOf(b,a){while(b!=null){if(b==a.prototype){return true}b=b.__proto__}return false}function getClassName(b){if(b&&b.constructor&&b.constructor.toString){var a=b.constructor.toString().match(/function\s*(\w+)/);return a&&a.length==2?a[1]:undefined}else{return undefined}}String.prototype.trim=function(){var a=this;a=a.replace(/^\s*(.*)/,"$1");a=a.replace(/(.*?)\s*$/,"$1");return a};String.prototype.reverse=function(){var b="";var a=this.length;while(a>0){b+=this.substring(a-1,a);a--}return b};var scrollConst=0;if(!ie&&!mz){scrollConst=125}var scrX=0,scrY=0,pgeX=0,pgeY=0,srcElement;if(ie){document.attachEvent("onclick",popUpListener)}else{document.addEventListener("click",popUpListener,true)}function popUpListener(a){if(ie){srcElement=window.event.srcElement}else{srcElement=a.target;scrX=a.screenX;scrY=a.screenY;pgeX=a.pageX;pgeY=a.pageY}WmsClick(a)}function getSource(a){if(ie){return window.event.srcElement}else{return a.target}}function getSourceId(a){if(typeof(a)!="string"){return a}if(document.getElementById){a=document.getElementById(a)}else{if(document.all){a=document.all[a]}else{a=null}}return a}function addEvent(a,c,b){if(a.attachEvent){a.attachEvent("on"+c,b)}else{if(a.addEventListener){a.addEventListener(c,b,true)}else{a["on"+c]=b}}}function removeEvent(a,c,b){if(a.detachEvent){a.detachEvent("on"+c,b)}else{if(a.removeEventListener){a.removeEventListener(c,b,true)}else{a["on"+c]=null}}}function optimizeFontForMozilla(b){var c="<FONT";if(b.indexOf(c)!=-1){var e=b.split(c);for(i=0;i<e.length;i++){e[i]=util.insertSpanForColor(e[i])}var a="";if(e.length>1){for(i=0;i<e.length;i++){if(i==0){a=e[i]}else{a=a+c+e[i]}}}if(a!=""){b=a}}return b}function insertSpanForColor(f){var g=">";var c="";var e="";if(f.indexOf(g)!=-1){var h=f.indexOf(g)+1;c=c+f.substring(0,h);e=f.substring(h,f.length);var b;g="color=";if(c.indexOf(g)!=-1){h=c.indexOf(g)+g.length;var a=c.substring(h,c.length);g="rgb(";if(a.indexOf(g)!=-1){b=a.substring(a.indexOf(g),a.indexOf(")")+1);c=c+"<span style='color:"+b+";'>";g="<";if(e.indexOf(g)!=-1){h=e.indexOf(g);c=c+e.substring(0,h);e=e.substring(h,e.length);f=c+"</span>"+e}}}}return f}function trimLength(b,a){if(b.length>(a+2)){b=b.substr(0,a)+".."}return b}function getEventTarget(a){if(ie){return window.event.srcElement}else{return a.target}}function HtmlTag(){}HtmlTag.cure=function(a){a=HtmlTag.identifyLink(a);return a};HtmlTag.makeItReadable=function(a){a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a};HtmlTag.identifyLink=function(f){try{var c=/([a-z0-9]([a-z0-9_\-\.]*)@([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}))/gi;var b=/((href|src)=["'])?(((http:\/\/[^(www\.)])|(https:\/\/[^(www\.)])|(http:\/\/www\.)|(https:\/\/www\.))([a-z0-9](([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}([^( <)]*)))))/gi;var a=/((href|src)=["'])?([^\/])((www\.)([a-z0-9](([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}([^( <)|(http:\/\/)]*)))))/gi;f=f.replace(c,"<a href='mailto:$1' target='_blank'>$1</a>");f=f.replace(b,function(h,g){return(g==""||g==undefined)?"<a href='"+h+"' target='_blank'>"+h+"</a>":h});f=f.replace(a,function(h,g,o,n,l){return(g==""||g==undefined)?n+"<a href='http://"+l+"' target='_blank'>"+l+"</a>":h})}catch(e){}return f};HtmlTag.insertBreak=function(msg,len){try{var match=eval("/(.{"+len+"})/g");return msg.replace(match,"$1<wbr>")}catch(e){return msg}};HtmlTag.identifyStatus=function(h,a){try{if(h.indexOf("<a href=")!=-1){return h}var b=h;var e=/([a-z0-9]([a-z0-9_\-\.]*)@([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}))/gi;var c=/(((^http:\/\/)|(^https:\/\/))([a-z0-9](([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}([^ ]*)))))/gi;var f=/(((^www\.))([a-z0-9](([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}([^ ]*)))))/gi;if(a!=undefined&&b.length>a){h=h.replace(e,"<a href='mailto:$1' target='_blank'>::::</a>");h=h.replace(f,"<a href='http://$1' target='_blank'>::::</a>");h=h.replace(c,"<a href='$1' target='_blank'>::::</a>");if(h!=b){h=h.replace("::::",HtmlTag.insertBreak(b,a))}else{h=HtmlTag.insertBreak(h,a)}}else{h=h.replace(e,"<a href='mailto:$1' target='_blank'>$1</a>");h=h.replace(f,"<a href='http://$1' target='_blank'>$1</a>");h=h.replace(c,"<a href='$1' target='_blank'>$1</a>")}}catch(g){}return h};function WmsClick(a){}function MyDate(){}MyDate.getTMonth=function(b){var a=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");return WmsResource.getTrimmedValue(a[b])};MyDate.getTDay=function(a){var b=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");return WmsResource.getTrimmedValue(b[a])};MyDate.formatTime=function(h){var b=new Date(Number(h));var c=b.getDate();var l=MyDate.getTMonth(b.getMonth());var n=b.getFullYear();var g=b.getHours();var e=b.getMinutes();var f="";var a=((g>12)?g-12:((g==0)?"12":g));f+=(a<10)?"0"+a:a;f+=((e<10)?":0":":")+e;f+=(g>=12)?" "+WmsResource.getTrimmedValue("PM"):" "+WmsResource.getTrimmedValue("AM");return f};MyDate.formatDTTime=function(h){var b=new Date(Number(h));var c=b.getDate();var l=MyDate.getTMonth(b.getMonth());var n=b.getFullYear();var g=b.getHours();var e=b.getMinutes();var f="";f+=MyDate.formatDate(h);var a=((g>12)?g-12:((g==0)?"12":g));f+=(a<10)?"0"+a:a;f+=((e<10)?":0":":")+e;f+=(g>=12)?" "+WmsResource.getTrimmedValue("PM"):" "+WmsResource.getTrimmedValue("AM");return f};MyDate.formatFirstMsgTime=function(h){var b=new Date(Number(h));var c=b.getDate();var l=MyDate.getTMonth(b.getMonth());var n=MyDate.getTDay(b.getDay());var g=b.getHours();var e=b.getMinutes();var f="";if(WebMessanger.getDateFormat()!=undefined){f+=MyDate.formatDate(h)}else{f+=n+",";f+=c+" ";f+=l+", "}var a=((g>12)?g-12:((g==0)?"12":g));f+=(a<10)?"0"+a:a;f+=((e<10)?":0":":")+e;f+=(g>=12)?" "+WmsResource.getTrimmedValue("PM"):" "+WmsResource.getTrimmedValue("AM");return f};MyDate.formatDate=function(h){var b=new Date(Number(h));var p="";var o=WebMessanger.getDateFormat();if(o==undefined){var c=b.getDate();var l=MyDate.getTMonth(b.getMonth());var n=MyDate.getTDay(b.getDay());p+=c+" ";p+=l+" ";p+=b.getFullYear()+" ";return p}var g=b.getDate();var a=b.getMonth()+1;var f=b.getFullYear();o=o.replace(/dd/,(g<10)?"0"+g:g);o=o.replace(/MM/,(a<10)?"0"+a:a);o=o.replace(/yyyy/,f);var e=(""+f).substr(2,4);o=o.replace(/yy/,(e<10)?"0"+e:e);p=o+" ";return p};function ChatBlink(){}ChatBlink.init=function(){this.stopblink=false;this.blinktimer=-1;this.defaultTitle=null;this.blinkmsg="";this.curval="title";this.pagetitle=ChatBlink.getTitle()};ChatBlink.stopRepeat=function(){try{var a=Collaboration.getPageTitle();if(a!==false){this.defaultTitle=a}}catch(b){}if(this.defaultTitle!=null){ChatBlink.setTitle(this.defaultTitle)}else{ChatBlink.setTitle(this.pagetitle)}if(this.blinktimer!=-1){clearTimeout(this.blinktimer);this.blinktimer=-1}this.pagetitle=ChatBlink.getTitle()};ChatBlink.start=function(a){try{if(WMSUI.isMaximized()){ChatBlink.scrollTitle(a)}}catch(b){}};ChatBlink.scrollTitle=function(a){this.blinkmsg=a;if(this.blinktimer==-1){this.defaultTitle=ChatBlink.getTitle()}else{this.stopRepeat()}this.repeatMessage()};ChatBlink.repeatMessage=function(){try{if(!Self.Idle){this.stopRepeat();return}if(this.curval=="title"){this.chmsg=this.blinkmsg;this.curval="chmsg"}else{this.chmsg=this.defaultTitle;this.curval="title"}ChatBlink.setTitle(this.chmsg);this.blinktimer=setTimeout("ChatBlink.repeatMessage()",1500)}catch(a){}};ChatBlink.setTitle=function(b){b=Message.decodehtml(b);if(ie){document.title=b}else{try{document.title=b}catch(a){}document.getElementsByTagName("title")[0].text=b}};ChatBlink.getTitle=function(){if(ie){return document.title}else{return(document.title!=undefined&&document.title!="")?document.title:document.getElementsByTagName("title")[0].text}};document.onclick=function(){ChatBlink.stopblink=true;Self.Idle=false};document.onfocus=function(){};window.onblur=function(){ChatBlink.stopblink=false};window.onfocus=function(){};document.onblur=function(){ChatBlink.stopblink=false};ChatBlink.init();var wmsuserstatus=new Object();function Self(){Self.Idle=true;Self.prevIdleStatus}Self.init=function(){Self.isIdle=new Object();Self.prevIdleStatus=new Object();setInterval("Self.status.chkstatus()",10000)};Self.status={init:function(a){Self.isIdle[a]=true;Self.Idle=true;Self.prevIdleStatus[a]=true},chkstatus:function(){try{var c=new Object();for(var b in wmsuserstatus){var a=wmsuserstatus[b];if(a!=null&&typeof a!="undefined"&&typeof a!="function"){var g=0;for(g in a){}if(g==0){continue}if((new Date()).getTime()-g<(500*60)){c[b]=a;continue}if(Self.status.getmsg(b)!=""){Self.status.send(b,NFY_USER_ENTERED)}else{Self.status.send(b,NFY_USER_IDLE)}Self.prevIdleStatus[b]=Self.isIdle[b];Self.isIdle[b]=true;Self.Idle=true}}wmsuserstatus=c}catch(f){}},isEnabled:function(){if(WebMessanger.scode==WMS_INVISIBLE){return false}return true},send:function(b,a){try{if(isNaN(b)){return false}}catch(f){}try{if(WebMessanger.liveChats.indexOf(b)==-1){return}}catch(f){}if(a==NFY_USER_ENTERED){wmsuserstatus[b]=new Object()}if(Self.status.isEnabled()){var c="userid="+WebMessanger.getUserName()+"&chid="+b+"&status="+a+"&dname="+encodeURIComponent(WebMessanger.getNickName())+"&sid="+encodeURIComponent(WebMessanger.getSid())+nocachefix();WmsAjax.postrequest("/"+_WMSCONT+"/sendstatus"+dext,c)}},idle:function(b){var a=new Object();a[(new Date()).getTime()]=NFY_USER_IDLE;Self.prevIdleStatus[b]=Self.isIdle[b];Self.isIdle[b]=true;Self.Idle=true;wmsuserstatus[b]=a},update:function(e){var c=""+e.chid;if(e.sender==WebMessanger.getUserName()||e.sender==WebMessanger.getZuid()){return}var a=document.getElementById(c);if(a!=null){var b=Chat.parseDiv(c,"wmsustat","div");if((WindowHandler.getObjectInObject(b,"wmsprogressbar","div")!=undefined)){WindowHandler.getObjectInObject(b,"wmsloadingtxt","DIV").innerHTML=e.msg;MyChild.updateStatus(c,e.msg)}else{b.innerHTML=e.msg;MyChild.updateStatus(c,e.msg)}}},check:function(b){var a=new Object();a[(new Date()).getTime()]=NFY_USER_TYPING;if(Self.isIdle[b]!=Self.prevIdleStatus[b]){if(Self.status.getmsg(b)!=""){WindowHandler.makeNormalWinById(b);ChatBlink.stopRepeat();Self.status.send(b,NFY_USER_TYPING)}else{Self.prevIdleStatus[b]=Self.isIdle[b];Self.Idle=true;Self.isIdle[b]=true;a[(new Date()).getTime()]=NFY_USER_IDLE}}wmsuserstatus[b]=a},active:function(a){Self.prevIdleStatus[a]=Self.isIdle[a];Self.isIdle[a]=false;Self.Idle=false;if(a==undefined){return}Self.status.check(a)},clear:function(c){var a=document.getElementById(c);if(a!=null){var b=Chat.parseDiv(c,"wmsustat","div");if((WindowHandler.getObjectInObject(b,"wmsprogressbar","div")==undefined)){b.innerHTML="&nbsp;";MyChild.updateStatus(c,"&nbsp;")}}},getmsg:function(b){try{var a=document.getElementById(b);if(a!=null){var f=Chat.parseDiv(b,"editor","TEXTAREA");return f.value}else{if(document.getElementById("editor")!=null){return document.getElementById("editor").value}}}catch(c){}return""}};Self.init();function Smiley(){this.smileycode;this.smileytext;this.smilies;this.curSmileyObj}Smiley.init=function(){this.smileycode=new Array("X-\\(",":o",":\\^\\#","8-\\(",":=P~",":\\(",":-P","=\\(\\(",":xs","\\?D",":\\)\\)",":\\^\\)",":\\)",":D","B-\\)",":-s",":-\\$",":-\\*","#-s",";\\)",":x~",":x-",":=x",":x=",":-\\(",":-\\)",";-\\(",";-\\)",";\\(",";\\)");this.smileytext=new Array("Angry","Surprised","Smug","Rolling_Eyes","Drooling","Sad","Tongue","Broken_Heart","Love","What","Laugh","Blushing","Smile","Grin","Cool","Worried","Keep_confidential","Kiss","Tired","Wink","Excellent","Thumbs_up","Skull","Pumpkin");this.smilies=Smiley.generateUI()};Smiley.replace=function(f){if(this.smilies==null){Smiley.init()}try{var b="wmssmils";for(var c=0;c<this.smileycode.length;c++){var a=(c=="24"||c=="26"||c=="28")?5:(c=="25"||c=="27"||c=="29")?12:c;var g=new RegExp(this.smileycode[c],"g");var l="<img src='https://img.zohostatic.com/ichat/v42_https/images/spacer.gif' class='wmssmils"+(a+1)+"'>";f=f.replace(g,l)}}catch(h){}return f};Smiley.show=function(b,c){if(this.smilies==null){Smiley.init()}this.smilies.style.display="block";selectbtn(this.curSmileyObj);var a=503;this.smilies.style.zIndex=a;this.smilies.style.left=c+"px";this.smilies.style.top=b+"px";addEvent(document,"mousedown",Smiley.hideIntelligence)};Smiley.hide=function(){this.smilies.style.display="none";unselectbtn(this.curSmileyObj)};Smiley.hideIntelligence=function(e){var f=getSource(e);var b=f.id;var a=false;var c=f.className;if(b.indexOf("smiley")!=-1){a=true;return}Smiley.hide();if(!a){removeEvent(document,"mousedown",Smiley.hideIntelligence)}};Smiley.toggle=function(l,f){this.curSmileyObj=f;if(this.smilies==null){Smiley.init()}if(this.smilies.style.display=="block"){Smiley.hide();return}var c=0;var n=0;if(ie){c=window.event.clientX+document.body.scrollLeft;n=window.event.clientY+document.body.scrollTop}else{c=l.pageX;n=l.pageY}try{var f=getSource(l);if(f!=null){var a=f.offsetWidth;var b=f.offsetHeight;var h=util.findPosX(f);var o=util.findPosY(f);this.smilies.style.display="block";c=h-parseInt((this.smilies.offsetWidth/2)-(a/2));n=o-this.smilies.offsetHeight}}catch(g){}Smiley.show(n,c)};Smiley.updateSmiley=function(b){var a=null;try{if(WindowHandler){if(WindowHandler.lastViewed!=-1){a=WindowHandler.exist[WindowHandler.lastViewed].composer}}}catch(c){}if(a==null){a=document.getElementById("editor")}if(a!=null){a.value=a.value+b;a.focus()}Smiley.hide()};Smiley.generateUI=function(){var b=document.createElement("div");b.id="smilies";b.className="wmssmileycon";var c='<div id="smileylist" class="wmssmileylist"><table border="0" cellspacing="0" cellpadding="3" id="smileytable" align="center">';for(var a=0;a<this.smileytext.length;a++){if(a%6==0){c+='<tr id="smileytr">'}c=c+'<td id="smileytd" align="center"><div id="smileydiv" class="wmssmils'+(a+1)+'" title="'+WmsResource.getRealValue(this.smileytext[a])+'" onclick="Smiley.updateSmiley(\''+this.smileycode[a]+"')\"></div></td>";if(a%6==5){c+="</tr>"}}c+="</table></div>";b.innerHTML=c;if(document.body){document.body.appendChild(b)}else{b=null}return b};function wmsLogin(){}wmsLogin.generateLoginUI=function(b){var a="<form name=wmslogin id=wmslogin onsubmit=\"javascript:return wmsLogin.login('"+b+'\');"><fieldset style="border:none;padding:2px;margin:4px 4px 0px 4px;"><legend style="font-weight:bold;margin:4px;">Sorry, your session has expired.</legend><p id="wmsloginmsg" style="border: 1px solid #E00;background-color: #FF6A6A;color: #FFF;display:none;"></p><label style="margin-left:20px;">Username: </label><label style="font-weight:bold;">'+b+'</label><br><label style="margin-left:20px;">Password: </label><input style="margin:7px 0px 0px 0px;width:130px;" onkeypress="wmsLogin.clearmsg();" type=password name="wmsloginpass" id="wmsloginpass"></fieldset><p align=center style="padding:0px;margin:0px 0px 0px 0px;_margin:4px 0px 0px 0px;"><input type=submit name="wmsloginbtn" value="Sign In"></p><p align=center style="padding:0px;margin:2px 0px 0px 0px;"><a href="javascript:;" onclick="wmsLogin.reload();">Sign out completely</a></p></form>';return a};wmsLogin.createui=function(b){var a='<div class="wmssignupdiv"><form name=wmslogin id=wmslogin onsubmit="javascript:return wmsLogin.login(\''+b+'\');"><h4>Sign In</h4><ul class="wmssignupul"><li id="wmsloginmsg" style="widht:100%;border: 1px solid #E00;background-color: #FF6A6A;color: #FFF;display:none;"></li><li class="fields">User Name </li><li class="fieldval"><label>'+b+'</label></li><li class="fields">Password </li><li class="fieldval"><input onkeypress="wmsLogin.clearmsg();" type=password name="wmsloginpass" id="wmsloginpass"/></li><li class="fields">&nbsp;</li><li class="fieldval"><input class="signupbtn" value="" type=submit name="wmsloginbtn" value="Sign In"/></li><li class="fields">&nbsp;</li><li class="fieldval"><a href="javascript:;" onclick="wmsLogin.reload();">Sign out completely</a></li></ul></form></div>';return a};wmsLogin.login=function(b){var a=document.getElementById("wmsloginpass").value;if(a.trim()==""){wmsLogin.error("Please enter the password");return false}wmsloginjs=document.createElement("script");wmsloginjs.id="wmsloginjsid";wmsloginjs.src=WMSIAMURL+"/iam/login?LOGIN_ID="+b+"&PASSWORD="+a+"&silent=true";wmsloginjs.type="text/javascript";document.body.appendChild(wmsloginjs);return false};wmsLogin.reload=function(){window.location.href=window.location.href};wmsLogin.clearmsg=function(){document.getElementById("wmsloginmsg").style.display="none"};wmsLogin.show=function(a){wmsloginfrez=document.createElement("DIV");wmsloginfrez.id="wmsloginfrez";wmsloginfrez.className="wmsloginfrez";wmsloginfrez.style.display="block";wmsloginfrez.style.zIndex=1000;document.body.appendChild(wmsloginfrez);wmslogindiv=document.createElement("DIV");wmslogindiv.id="wmslogindiv";wmslogindiv.className="wmslogindiv";wmslogindiv.style.zIndex=1001;wmslogindiv.innerHTML=wmsLogin.createui(a);document.body.appendChild(wmslogindiv);ZMSGUI.center(wmslogindiv);document.getElementById("wmsloginpass").focus()};wmsLogin.error=function(b){var a=document.getElementById("wmsloginmsg");a.innerHTML=b;a.style.display="block"};function showsuccess(a,b,c){document.body.removeChild(wmsloginfrez);document.body.removeChild(wmslogindiv);setTimeout("document.body.removeChild(wmsloginjs)",100);WebMessanger.disablewms=false;WebMessanger.registerWms(WebMessanger.prd,WebMessanger.zuid,WebMessanger.uname,WebMessanger.nname,silent,true)}function showmsg(a){wmsLogin.error(a);document.getElementById("wmsloginpass").focus();setTimeout("document.body.removeChild(wmsloginjs)",100)}function Cookie(){}Cookie.get=function(b){if(WebMessanger.getPrd()==undefined){return}b=WebMessanger.getPrd()+b;var f=(document.cookie).indexOf(b);var a=document.cookie.length;var e="";if(f!=-1){var c=b.length;beginIndex=(f+c);e=(document.cookie).substr((beginIndex+1),a);if(e.indexOf(";")!=-1){e=e.substring(0,e.indexOf(";"))}}return e};Cookie.set=function(b,e,c){if(typeof e=="undefined"||typeof b=="undefined"||WebMessanger.getPrd()==undefined){return}b=WebMessanger.getPrd()+b;var a=new Date();if(c==null||c==""){c=(30*24*60*60*1000)}a.setTime(a.getTime()+c);document.cookie=b+"= "+e+";expires= "+((a).toGMTString())+";path= /";return true};Cookie.set_withdomain=function(b,e,c){if(typeof e=="undefined"||typeof b=="undefined"||WebMessanger.getPrd()==undefined){return}b=WebMessanger.getPrd()+b;var a=new Date();if(c==null||c==""){c=(30*24*60*60*1000)}a.setTime(a.getTime()+c);document.cookie=b+"= "+e+";domain="+document.domain+";expires= "+((a).toGMTString())+";path= /";return true};Cookie.remove=function(b){var c=Cookie.get(b);if(c!=""){b=WebMessanger.getPrd()+b;var a=new Date();document.cookie=b+"=;expires= "+((a).toGMTString())}return c};Cookie.update=function(){var b=new Array();for(var a in WindowHandler.openedChats){if(WindowHandler.openedChats[a]!="close"){b.push(a+"|"+WindowHandler.openedChats[a])}}var c=b.join(",");Cookie.remove("och");Cookie.set("och",c,60000)};Cookie.syncronize=function(){var a=Cookie.remove("och");Cookie.set("och",a,60000);var c=Cookie.remove("con");Cookie.set("con",c,60000);var b=Cookie.remove("wmsuihide");Cookie.set("wmsuihide",b,60000)};Cookie.init=function(){Cookie.openedChats=new Object();Cookie.syncronize();setInterval("Cookie.syncronize()",55000)};Cookie.restore=function(){var e=Cookie.get("och");if(e!=""){var a=e.split(",");for(var b=0;b<a.length;b++){var c=a[b].split("|");if(c[1]!="close"){Cookie.openedChats[c[0]]=c[1];WebMessanger.join(c[0])}}}};Cookie.isMinimized=function(a){return Cookie.openedChats[a]=="min"};Cookie.removeFromOpenedChats=function(a){try{delete Cookie.openedChats[a]}catch(b){}};Cookie.init();function WmsApi(){}WmsApi.sendMessage=function(a,b){WebMessanger.sendMessage(a,b)};WmsApi.sendHTMLMessange=function(a,c,b){WebMessanger.sendMessage(a,c,b)};WmsApi.register=function(e,b,a,c){WebMessanger.registerWms(e,b,a,null,c)};WmsApi.setDomain=function(a){WebMessanger.setDomain(a)};WmsApi.setIamTicketName=function(a){WebMessanger.setIamTicketName(a)};WmsApi.setRebrand=function(a){WebMessanger.setRebrand(a)};WmsApi.setLocale=function(b,a){WebMessanger.setLocale(b,a)};WmsApi.disableMeeting=function(){WebMessanger.disableMeeting()};WmsApi.chat=function(a){WebMessanger.chat(a)};WmsApi.quit=function(a){WebMessanger.quit(a)};WmsApi.join=function(a){WebMessanger.join(a)};WmsApi.formatMessage=function(a){return Message.formatMessage(a)};WmsApi.getTranscript=function(a,b){WebMessanger.transcript(a,b)};function ZohoFeeds(){}ZohoFeeds.getFeedHistory=function(a,g,e,f,c){var b="zmsg"+cadapter+"?pageno="+g+"&limit="+a;if(e!=""){b=b+"&searchstr="+e}if(f!=""){b=b+"&category="+f}if(c!=""){b=b+"&sender="+c}b=b+"&fromapi=true&module=zohomessageapi";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix())};ZohoFeeds.getFeedsHistoryCount=function(c,e,b){var a="zmsgcount"+cadapter+"?fromapi=true";if(c!=""){a=a+"&searchstr="+c}if(e!=""){a=a+"&category="+e}if(b!=""){a=a+"&sender="+b}a=a+"&module=zohomsgcountapi";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};ZohoFeeds.getUnreadFeeds=function(){var a="unreadzmsg"+cadapter+"?pageno=1&limit=0&fromapi=true&module=unreadmessageapi";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};ZohoFeeds.getFeedsinRange=function(e,l,n,a,g,c,f,b){var h="zmsg"+cadapter+"?pageno="+l+"&limit="+e+"&range="+true;if(n!=""){h=h+"&searchstr="+n}if(a!=""){h=h+"&category="+a}if(g!=""){h=h+"&sender="+g}if(c!=""){h=h+"&prd="+c}if(f!=undefined&&f!=""){h=h+"&fromtime="+f}if(b!=undefined&&b!=""){h=h+"&totime="+b}h=h+"&fromapi=true&module=zohofeedsinrange";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(h)+nocachefix())};ZohoFeeds.feedDelete=function(a){var b="deletefeed"+cadapter+"?feedid="+a;WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(b)+nocachefix())};function WmsUIApi(){}WmsUIApi.positionFeedHistory=function(b,a){ZMSGUI.positionFeedHistory(b,a)};WmsUIApi.positionUnreadFeeds=function(b,a){ZMSGUI.positionUnreadFeeds(b,a)};WmsUIApi.setContactsLabel=function(a){WMSUI.contactsText=a;WMSUI.updateContactsText(a,true)};function WMSZohoApi(){}WMSZohoApi.acceptLiveSupport=function(c,e,b,f){if(_WMSCHATURL!=""){var l;l=document.createElement("script");l.setAttribute("type","text/javascript");var h="?chid="+c+"&guid="+e+"&a="+b+"&g="+f;if(!silent){h=h+"&sid="+encodeURIComponent(WebMessanger.getSid())}l.setAttribute("src",_WMSCHATURL+"acccsupport.ext"+h);document.body.appendChild(l)}};function WmsGroups(){}WmsGroups.init=function(){WmsGroups.grouplist=new Object();WmsGroups.lastupdatetime=0;WmsGroups.interval=(30*60*1000)};WmsGroups.getZohoGroups=function(){return WmsGroups.grouplist};WmsGroups.fetchzohogroups=function(){WmsAjax.postrequest("/"+_WMSCONT+"/getgroups"+dext,nocachefix())};WmsGroups.updategrouplist=function(c){for(var b in c){var a=c[b];try{WmsGroups.grouplist[b]["NAME"]=a.NAME;WmsGroups.grouplist[b]["OWNER"]=a.OWNER;WmsGroups.grouplist[b]["MODERATOR"]=a.MODERATOR;WmsGroups.grouplist[b]["DESC"]=a.DESC}catch(f){WmsGroups.grouplist[b]=new Object();WmsGroups.grouplist[b]["NAME"]=a.NAME;WmsGroups.grouplist[b]["OWNER"]=a.OWNER;WmsGroups.grouplist[b]["MODERATOR"]=a.MODERATOR;WmsGroups.grouplist[b]["DESC"]=a.DESC}}WmsGroups.lastupdatetime=new Date().getTime();try{WMSUI.handlegroup()}catch(g){}WmsGroupImpl.handleGetGroups()};WmsGroups.fetchingStatus=function(){if(WmsGroups.lastupdatetime==undefined||WmsGroups.lastupdatetime==null||WmsGroups.lastupdatetime==0){return true}else{if(WmsGroups.lastupdatetime>0){var a=new Date().getTime();if((a-WmsGroups.lastupdatetime)>WmsGroups.interval){return true}}}return false};function WmsActiveChat(){}WmsActiveChat.updateList=function(b){for(var a in b){var g=b[a];try{var f=WmsActiveChat.chatlist[a]["TITLE"]}catch(c){WmsActiveChat.chatlist[a]=new Object();WmsActiveChat.chatcnt++}WmsActiveChat.chatlist[a]["TITLE"]=g}WmsActiveChat.lastupdatetime=new Date().getTime();WmsActiveChat.handlePopulation()};WmsActiveChat.updateChatTitle=function(a,c){try{WmsActiveChat.chatlist[a]["TITLE"]=c;WmsActiveChat.lastupdatetime=new Date().getTime();WmsActiveChat.handlePopulation()}catch(b){}};WmsActiveChat.removeList=function(b){for(var c=0;c<b.length;c++){var a=b[c];try{var g=WmsActiveChat.chatlist[a]["TITLE"];delete WmsActiveChat.chatlist[a];WmsActiveChat.chatcnt=(WmsActiveChat.chatcnt>0)?WmsActiveChat.chatcnt-1:0}catch(f){}}WmsActiveChat.lastupdatetime=new Date().getTime();WmsActiveChat.handlePopulation()};WmsActiveChat.init=function(){WmsActiveChat.chatlist=new Object();WmsActiveChat.lastupdatetime=0;WmsActiveChat.chatcnt=0};WmsActiveChat.getChatList=function(){return WmsActiveChat.chatlist};WmsActiveChat.getCount=function(){return WmsActiveChat.chatcnt};WmsActiveChat.handlePopulation=function(){WMSUI.populateActiveChat()};function WMSKeyHandler(){}WMSKeyHandler.init=function(){if(ie){document.attachEvent("onkeydown",WMSKeyHandler.handle)}else{document.addEventListener("keydown",WMSKeyHandler.handle,true)}if(ie){document.attachEvent("onclick",WMSKeyHandler.onclick)}else{document.addEventListener("click",WMSKeyHandler.onclick,true)}WMSKeyHandler.skipeventlistener=false};WMSKeyHandler.onclick=function(a){if(WMSKeyHandler.skipeventlistener===true){WMSKeyHandler.skipeventlistener=false;return}WMSUI.handleDocumentClick(a)};WMSKeyHandler.handle=function(c){if(!c){c=window.event}var a=(window.event)?c.keyCode:c.which;if(a==27){if(mz){c.preventDefault()}if(ie){c.cancelBubble=true;c.returnValue=false}var b=getSource(c);if(b.nodeName=="TEXTAREA"||b.type=="text"){return}WMSKeyHandler.escapee()}};WMSKeyHandler.escapee=function(){WMSUI.handleDocumentEscape()};WMSKeyHandler.cancelEvent=function(a){if(ie){a.cancelBubble=true;a.returnValue=false}else{a.preventDefault();a.stopPropagation()}};WMSKeyHandler.init();function NotificationApi(){}NotificationApi.getUnreadChatCount=function(){var a="getnoti"+cadapter+"?config=1";WmsProxyAjax.postrequest("/"+_WMSCONT+"/chatadapter.do","url="+encodeURIComponent(a)+nocachefix())};function WMSSessionConfig(){}WMSSessionConfig.CHAT=1;WMSSessionConfig.CHAT_PRESENCE=2;WMSSessionConfig.PRESENCE_PERSONAL=4;WMSSessionConfig.PRESENCE_ORG=8;WMSSessionConfig.LOADBALANCED=16;WMSSessionConfig.MP=32;WMSSessionConfig.CROSS_PRD=64;WMSSessionConfig.MULTI_DISPATCH=128;WMSSessionConfig.REUSE_SESSION=256;function WmsSound(){}WmsSound.tune="";WmsSound.getTune=new Object();WmsSound.getTune={notify:"https://media.zohostatic.com/ichat/v42_https/sound/notify.mp3",newchat:"https://media.zohostatic.com/ichat/v42_https/sound/newchatmsg2.mp3",chatmsg:"https://media.zohostatic.com/ichat/v42_https/sound/tik.mp3",support:"https://media.zohostatic.com/ichat/v42_https/sound/notifysupport.mp3"};WmsSound.IS_FLASH_EXIST=false;WmsSound.loopid="";WmsSound.isplaying="";WmsSound.winfocus=true;WmsSound.init=function(){var o=0;var b=0;var a=false;var g=false;if(navigator.plugins&&navigator.plugins.length){x=navigator.plugins["Shockwave Flash"];if(x){o=2;if(x.description){y=x.description;b=y.match(/\d{1,2}/)}}else{o=1}if(navigator.plugins["Shockwave Flash 2.0"]){o=2;b=2}}else{if(navigator.mimeTypes&&navigator.mimeTypes.length){x=navigator.mimeTypes["application/x-shockwave-flash"];if(x&&x.enabledPlugin){o=2}else{o=1}}else{g=true}}if(g){var h=new Array("ShockwaveFlash.ShockwaveFlash.9","ShockwaveFlash.ShockwaveFlash.8.5","ShockwaveFlash.ShockwaveFlash.8","ShockwaveFlash.ShockwaveFlash.7");for(var c=0;c<h.length;c++){try{var f=new ActiveXObject(h[c]);if(f!=null){a=true;break}}catch(n){}}}else{if(o==2&&b>7){a=true}}WmsSound.IS_FLASH_EXIST=a;if(WmsSound.IS_FLASH_EXIST){var l=document.createElement("SPAN");l.className="wmssoundplayer";l.style.display="block";l.innerHTML='<objectclassid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="<%=schema%>://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="28" height="20" id="player" align="middle" wmode="transparent"><param name="allowScriptAccess" value="sameDomain" /><param name="movie" value="https://media.zohostatic.com/ichat/v42_https/flash/player.swf" /><param name="quality" value="high" /><param name="bgcolor" value="" /><param name="wmode" value="transparent"/><embed src="https://media.zohostatic.com/ichat/v42_https/flash/player.swf" quality="high"  width="28"height="20" name="player" align="middle"allowScriptAccess="sameDomain" wmode="transparent"type="application/x-shockwave-flash" pluginspage="<%=schema%>://www.macromedia.com/go/getflashplayer" /></object>';document.body.appendChild(l)}};WmsSound.getPlayer=function(){if(!WmsSound.IS_FLASH_EXIST){return}if(window.document.player){return window.document.player}if(navigator.appName.indexOf("Microsoft Internet")==-1){if(document.embeds&&document.embeds.player){return document.embeds.player}}else{return document.getElementById("player")}};WmsSound.set_Isplaying=function(a,b){Cookie.set_withdomain("_ISPLAYING",a,b);WmsSound.isplaying=a};WmsSound.get_Isplaying=function(){WmsSound.isplaying=Cookie.get("_ISPLAYING")};WmsSound.setTune=function(a){if(a!=null){WmsSound.tune=WmsSound.getTune[a]}else{WmsSound.tune=WmsSound.getTune.notify}};WmsSound.play=function(){try{var a=WmsSound.getPlayer();a.SetVariable("_root.loops",1);a.TCallLabel("_root.$listener","setloops");a.SetVariable("_root.$listener.fpath",WmsSound.tune);a.TCallLabel("_root.$listener","playfile")}catch(b){}};WmsSound.playTune=function(b,a){if(!WmsSound.IS_FLASH_EXIST||WmsSettings.sound!="1"){return}setTimeout(function(){WmsSound.get_Isplaying();if(WmsSound.isplaying=="true"){return}WmsSound.setTune(b);if(a==null){WmsSound.set_Isplaying("true",2000);WmsSound.play()}else{WmsSound.set_Isplaying("true",a);WmsSound.play();WmsSound.loopid=setInterval("WmsSound.play()",1400);setTimeout("WmsSound.stop()",a)}},Math.floor(Math.random()*100))};WmsSound.stop=function(){clearInterval(WmsSound.loopid);WmsSound.set_Isplaying("false","")};WmsSound.getWinFocus=function(){return WmsSound.winfocus};if(ie){document.onfocusout=function(){WmsSound.winfocus=false};document.onfocusin=function(){WmsSound.winfocus=true}}else{window.onblur=function(){WmsSound.winfocus=false};window.onfocus=function(){WmsSound.winfocus=true}}function WmsSettings(){}WmsSettings.bsettings=new Object();WmsSettings.bsettings={sound:"0",soc:"1",scp:"0"};WmsSettings.populate=function(){this.sound=WmsSettings.bsettings.sound;this.soc=WmsSettings.bsettings.soc;this.scp=WmsSettings.bsettings.scp};WmsSettings.updateWmsSettings=function(c,b,a){WebMessanger.UpdateWmsSettings(c,b,a)};WmsSettings.handleUpdateWmsSettings=function(b){for(d in b){if(d=="sound"){this.sound=b[d];WMSUI.handleSoundSettings()}else{if(d=="soc"){this.soc=b[d];try{WMSUI.populateusrs(false)}catch(a){}}else{if(d=="scp"){this.scp=b[d];try{WMSUI.populateusrs(false)}catch(a){}}}}}WMSUI.updateWmsSettings()};function WmsDragDrop(){}WmsDragDrop.onDropEvent=function(a,g,b){try{if(isNaN(a)){return}g.preventDefault();var f=g.dataTransfer.files;WmsDragDrop.nooffiles=f.length;WmsDragDrop.pos=0;var c=WindowHandler.getWinObjById(a);if(c.isMultiProtocolChat()){if(confirm(WmsResource.getRealValue("File_transfer_is_supported_only_between_zoho_users_would_you_like_to_upload"))){WmsDragDrop.uploadFile(a,f)}}else{WmsDragDrop.uploadFile(a,f)}}catch(h){}};WmsDragDrop.uploadFile=function(b,a){var e=function(){WmsDragDrop.uploadFile(b,a)};var c={onprogress:function(g){var f=Math.round((g.loaded/g.total)*100);WindowHandler.showProgress(b,f,WmsDragDrop.pos)},oncomplete:function(f){},success:function(){WindowHandler.showProgress(b,100,WmsDragDrop.pos);if(WmsDragDrop.pos<WmsDragDrop.nooffiles){WindowHandler.showProgress(b,0,WmsDragDrop.pos);WmsDragDrop.uploadFileUsingPost(b,a[WmsDragDrop.pos],c,a);WmsDragDrop.pos++}else{WindowHandler.clearProgress(b)}}};WmsDragDrop.uploadFileUsingPost(b,a[WmsDragDrop.pos],c,a);WmsDragDrop.pos++};WmsDragDrop.uploadFileUsingPost=function(t,v,z,f){try{if(v.size>10000000){alert(WmsResource.getRealValue("You_have_exceeded_the_maximum_allowed_file_size_of_10MB"));WindowHandler.clearProgress(t);if(WmsDragDrop.nooffiles>WmsDragDrop.pos+1){WmsDragDrop.pos++;WmsDragDrop.uploadFileUsingPost(t,f[WmsDragDrop.pos],z,f)}return}var a=new XMLHttpRequest();var b=["chid","username","sender","mod","sid"];var h=[t,WebMessanger.getUserName(),WebMessanger.getUserName(),"att",WebMessanger.getSid()];a.onreadystatechange=function(){if(a.readyState==4){var e=(a.status==200)?z.success:z.fail;if(e){e(a.responseText)}}};if(z.onprogress){a.addEventListener("progress",z.onprogress,false);a.upload.addEventListener("progress",z.onprogress,false)}if(z.oncomplete){a.addEventListener("load",z.oncomplete,false);a.upload.addEventListener("load",z.oncomplete,false)}var r="/wms/upload";a.open("POST",r,true);if(typeof FormData!="undefined"){var c=new FormData();for(var o=0;o<b.length;o++){c.append(b[o],h[o])}c.append("file1",v);a.send(c);return a}var q=(new Date).getTime();var l="";l+="\r\n--"+q;var w="\r\n";var n=v.fileName;var u;if(!u){u=[]}for(var p=0;p<b.length;p++){u[u.length]=WmsDragDrop.getMultiPartParamObject(b[p],h[p])}for(var p=0;p<u.length;p++){var g=u[p];w+=WmsDragDrop.getMultiPartParamStr(g.name,encodeURIComponent(g.value))+"\r\n--"+q+"\r\n"}l+=w;var n=v.fileName;if(n==undefined||null){n="file1"}l+='Content-Disposition: form-data; name="file1";filename="'+n+'"\r\nContent-Type:'+v.type+"\r\n\r\n"+v.getAsBinary();l+="\r\n--"+q+"--";a.setRequestHeader("Content-Length",l.length);a.setRequestHeader("Content-Type","multipart/form-data; charset: UTF-8; accept-charset: UTF-8; boundary="+q);a.setRequestHeader("Connection","close");a.sendAsBinary(l);return a}catch(s){}};WmsDragDrop.getMultiPartParamStr=function(a,b){return'Content-Disposition: form-data; name="'+a+'"\r\n\r\n'+b};WmsDragDrop.getMultiPartParamObject=function(a,b){return{name:a,value:b}};